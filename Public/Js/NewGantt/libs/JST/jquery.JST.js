$.fn.loadTemplates=function(){return $.JST.loadTemplates($(this)),this},$.JST={_templates:new Object,_decorators:new Object,loadTemplates:function(e){e.each(function(){$(this).find(".__template__").each(function(){for(var e=$(this),t=e.attr("type"),r=!1,a=e.get(0).firstChild;a&&!r;){if(8==a.nodeType){var o=a.nodeValue;r=!0;break}a=a.nextSibling}if(!r)var o=e.html();if(o.match(/##\w+##/))try{$.JST._templates[t]=o}catch(n){console.error("JST error: "+t,n,o)}else{var i="var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+o.replace(/[\r\t\n]/g," ").replace(/'(?=[^#]*#\))/g,"	").split("'").join("\\'").split("	").join("'").replace(/\(#=(.+?)#\)/g,"',$1,'").split("(#").join("');").split("#)").join("p.push('")+"');}return p.join('');";try{$.JST._templates[t]=new Function("obj",i)}catch(n){console.error("JST error: "+t,n,i)}}e.remove()})})},createFromTemplate:function(e,t,r){function a(e,t){for(var r in t){var a=t[r];e=e.replace(new RegExp("##"+r+"##","gi"),a)}return e=e.replace(new RegExp("##\\w+##","gi"),"")}var o=$.JST._templates,n=new Object;if(r)for(var i in e){var l=e[i];"string"==typeof l&&(l=(l+"").replace(/\n/g,"<br>")),n[i]=l}else n=e;var c="";if("undefined"==typeof t)alert("Template is required"),c="<div>Template is required</div>";else if("function"==typeof o[t])try{c=o[t](n)}catch(p){console.error("JST error: "+t,p.message),c="<div> ERROR: "+t+"<br>"+p.message+"</div>"}else{if(c=o[t],!c||""==c.trim())return console.error("No template found for type '"+t+"'"),$("<div>");c=a(c,n)}var s=$(c);s.attr("__template",t);var f=$.JST._decorators[t];return"function"==typeof f&&f(s,n),s},existsTemplate:function(e){return $.JST._templates[e]},loadDecorator:function(e,t){$.JST._decorators[e]=t},getDecorator:function(e){return $.JST._decorators[e]},decorateTemplate:function(e){var t=$.JST._decorators[e.attr("__template")];"function"==typeof t&&t(editor)},ajaxLoadAsynchTemplates:function(e,t){$.get(e,function(e){var r=$("<div>");r.html(e),$.JST.loadTemplates(r),t()},"html")},ajaxLoadTemplates:function(e){$.ajax({async:!1,url:e,dataType:"html",success:function(e){var t=$("<div>");t.html(e),$.JST.loadTemplates(t)}})}};