Date.$VERSION=1.02,Date.LZ=function(e){return(0>e||e>9?"":"0")+e},Date.monthNames=new Array("一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"),Date.monthAbbreviations=new Array("一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"),Date.dayNames=new Array("星期日","星期一","星期二","星期三","星期四","星期五","星期六"),Date.dayAbbreviations=new Array("日","一","二","三","四","五","六"),Date.preferAmericanFormat=!0,Date.firstDayOfWeek=0,Date.defaultFormat="dd/MM/yyyy",Date.prototype.getFullYear||(Date.prototype.getFullYear=function(){var e=this.getYear();return 1900>e?e+1900:e}),Date.parseString=function(e,t){if("undefined"==typeof t||null==t||""==t){for(var n=new Array(Date.defaultFormat,"y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d","MMM-d","d-MMM"),r=new Array("M/d/y","M-d-y","M.d.y","M/d","M-d"),i=new Array("d/M/y","d-M-y","d.M.y","d/M","d-M"),a=new Array(n,Date.preferAmericanFormat?r:i,Date.preferAmericanFormat?i:r),s=0;s<a.length;s++)for(var o=a[s],l=0;l<o.length;l++){var h=Date.parseString(e,o[l]);if(null!=h)return h}return null}this.isInteger=function(e){for(var t=0;t<e.length;t++)if(-1=="1234567890".indexOf(e.charAt(t)))return!1;return!0},this.getInt=function(e,t,n,r){for(var i=r;i>=n;i--){var a=e.substring(t,t+i);if(a.length<n)return null;if(this.isInteger(a))return a}return null},this.decodeShortcut=function(e){var t=e.trim().toUpperCase(),n=new Date;if(n.clearTime(),["NOW","N"].indexOf(t)>=0)n=new Date;else if(["TODAY","T"].indexOf(t)>=0);else if(["YESTERDAY","Y"].indexOf(t)>=0)n.setDate(n.getDate()-1);else if(["TOMORROW","TO"].indexOf(t)>=0)n.setDate(n.getDate()+1);else if(["W","TW","WEEK","THISWEEK","WEEKSTART","THISWEEKSTART"].indexOf(t)>=0)n.setFirstDayOfThisWeek();else if(["LW","LASTWEEK","LASTWEEKSTART"].indexOf(t)>=0)n.setFirstDayOfThisWeek(),n.setDate(n.getDate()-7);else if(["NW","NEXTWEEK","NEXTWEEKSTART"].indexOf(t)>=0)n.setFirstDayOfThisWeek(),n.setDate(n.getDate()+7);else if(["M","TM","MONTH","THISMONTH","MONTHSTART","THISMONTHSTART"].indexOf(t)>=0)n.setDate(1);else if(["LM","LASTMONTH","LASTMONTHSTART"].indexOf(t)>=0)n.setDate(1),n.setMonth(n.getMonth()-1);else if(["NM","NEXTMONTH","NEXTMONTHSTART"].indexOf(t)>=0)n.setDate(1),n.setMonth(n.getMonth()+1);else if(["Q","TQ","QUARTER","THISQUARTER","QUARTERSTART","THISQUARTERSTART"].indexOf(t)>=0)n.setDate(1),n.setMonth(3*Math.floor(n.getMonth()/3));else if(["LQ","LASTQUARTER","LASTQUARTERSTART"].indexOf(t)>=0)n.setDate(1),n.setMonth(3*Math.floor(n.getMonth()/3)-3);else if(["NQ","NEXTQUARTER","NEXTQUARTERSTART"].indexOf(t)>=0)n.setDate(1),n.setMonth(3*Math.floor(n.getMonth()/3)+3);else if(/^-?[0-9]+[DWMY]$/.test(t)){var r=t.substr(t.length-1),i=parseInt(t.substr(0,t.length-1));"W"==r?n.setDate(n.getDate()+7*i):"M"==r?n.setMonth(n.getMonth()+i):"Y"==r&&n.setYear(n.getYear()+i)}else n=void 0;return n};var u=this.decodeShortcut(e);if(u)return u;e+="",t+="";for(var f,g,D=0,M=0,y="",T="",d=(new Date).getFullYear(),A=1,m=1,E=0,p=0,c=0,b="";M<t.length;){for(y=t.charAt(M),T="";t.charAt(M)==y&&M<t.length;)T+=t.charAt(M++);if("yyyy"==T||"yy"==T||"y"==T){if("yyyy"==T&&(f=4,g=4),"yy"==T&&(f=2,g=2),"y"==T&&(f=2,g=4),d=this.getInt(e,D,f,g),null==d)return null;D+=d.length,2==d.length&&(d=d>70?1900+(d-0):2e3+(d-0))}else if("MMM"==T||"MMMM"==T){A=0;for(var v="MMMM"==T?Date.monthNames.concat(Date.monthAbbreviations):Date.monthAbbreviations,s=0;s<v.length;s++){var O=v[s];if(e.substring(D,D+O.length).toLowerCase()==O.toLowerCase()){A=s%12+1,D+=O.length;break}}if(1>A||A>12)return null}else if("E"==T||"EE"==T||"EEE"==T||"EEEE"==T)for(var v="EEEE"==T?Date.dayNames:Date.dayAbbreviations,s=0;s<v.length;s++){var S=v[s];if(e.substring(D,D+S.length).toLowerCase()==S.toLowerCase()){D+=S.length;break}}else if("MM"==T||"M"==T){if(A=this.getInt(e,D,T.length,2),null==A||1>A||A>12)return null;D+=A.length}else if("dd"==T||"d"==T){if(m=this.getInt(e,D,T.length,2),null==m||1>m||m>31)return null;D+=m.length}else if("hh"==T||"h"==T){if(E=this.getInt(e,D,T.length,2),null==E||1>E||E>12)return null;D+=E.length}else if("HH"==T||"H"==T){if(E=this.getInt(e,D,T.length,2),null==E||0>E||E>23)return null;D+=E.length}else if("KK"==T||"K"==T){if(E=this.getInt(e,D,T.length,2),null==E||0>E||E>11)return null;D+=E.length,E++}else if("kk"==T||"k"==T){if(E=this.getInt(e,D,T.length,2),null==E||1>E||E>24)return null;D+=E.length,E--}else if("mm"==T||"m"==T){if(p=this.getInt(e,D,T.length,2),null==p||0>p||p>59)return null;D+=p.length}else if("ss"==T||"s"==T){if(c=this.getInt(e,D,T.length,2),null==c||0>c||c>59)return null;D+=c.length}else if("a"==T){if("am"==e.substring(D,D+2).toLowerCase())b="AM";else{if("pm"!=e.substring(D,D+2).toLowerCase())return null;b="PM"}D+=2}else{if(e.substring(D,D+T.length)!=T)return null;D+=T.length}}if(D!=e.length)return null;if(2==A)if(d%4==0&&d%100!=0||d%400==0){if(m>29)return null}else if(m>28)return null;return(4==A||6==A||9==A||11==A)&&m>30?null:(12>E&&"PM"==b?E=E-0+12:E>11&&"AM"==b&&(E-=12),new Date(d,A-1,m,E,p,c))},Date.isValid=function(e,t){return null!=Date.parseString(e,t)},Date.prototype.isBefore=function(e){return null==e?!1:this.getTime()<e.getTime()},Date.prototype.isAfter=function(e){return null==e?!1:this.getTime()>e.getTime()},Date.prototype.equals=function(e){return null==e?!1:this.getTime()==e.getTime()},Date.prototype.equalsIgnoreTime=function(e){if(null==e)return!1;var t=new Date(this.getTime()).clearTime(),n=new Date(e.getTime()).clearTime();return t.getTime()==n.getTime()},Date.prototype.format=function(e){e||(e=Date.defaultFormat),e+="";var t="",n=0,r="",i="",a=this.getFullYear()+"",s=this.getMonth()+1,o=this.getDate(),l=this.getDay(),h=this.getHours(),u=this.getMinutes(),f=this.getSeconds(),g=new Object;for(a.length<4&&(a=""+(+a+1900)),g.y=""+a,g.yyyy=a,g.yy=a.substring(2,4),g.M=s,g.MM=Date.LZ(s),g.MMM=Date.monthAbbreviations[s-1],g.MMMM=Date.monthNames[s-1],g.d=o,g.dd=Date.LZ(o),g.E=Date.dayAbbreviations[l],g.EE=Date.dayAbbreviations[l],g.EEE=Date.dayAbbreviations[l],g.EEEE=Date.dayNames[l],g.H=h,g.HH=Date.LZ(h),0==h?g.h=12:h>12?g.h=h-12:g.h=h,g.hh=Date.LZ(g.h),g.K=g.h-1,g.k=g.H+1,g.KK=Date.LZ(g.K),g.kk=Date.LZ(g.k),h>11?g.a="PM":g.a="AM",g.m=u,g.mm=Date.LZ(u),g.s=f,g.ss=Date.LZ(f);n<e.length;){for(r=e.charAt(n),i="";e.charAt(n)==r&&n<e.length;)i+=e.charAt(n++);t+="undefined"!=typeof g[i]?g[i]:i}return t},Date.prototype.getDayName=function(){return Date.dayNames[this.getDay()]},Date.prototype.getDayAbbreviation=function(){return Date.dayAbbreviations[this.getDay()]},Date.prototype.getMonthName=function(){return Date.monthNames[this.getMonth()]},Date.prototype.getMonthAbbreviation=function(){return Date.monthAbbreviations[this.getMonth()]},Date.prototype.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},Date.prototype.add=function(e,t){if("undefined"==typeof e||null==e||"undefined"==typeof t||null==t)return this;if(t=+t,"y"==e)this.setFullYear(this.getFullYear()+t);else if("M"==e)this.setMonth(this.getMonth()+t);else if("d"==e)this.setDate(this.getDate()+t);else if("w"==e)for(var n=t>0?1:-1;0!=t;){for(this.add("d",n);0==this.getDay()||6==this.getDay();)this.add("d",n);t-=n}else"h"==e?this.setHours(this.getHours()+t):"m"==e?this.setMinutes(this.getMinutes()+t):"s"==e&&this.setSeconds(this.getSeconds()+t);return this},Date.prototype.toInt=function(){return 1e4*this.getFullYear()+100*(this.getMonth()+1)+this.getDate()},Date.fromInt=function(e){var t=parseInt(e/1e4),n=parseInt((e-1e4*t)/100),r=parseInt(e-1e4*t-100*n);return new Date(t,n-1,r,12,0,0)},Date.prototype.isHoliday=function(){return isHoliday(this)},Date.prototype.isToday=function(){return this.toInt()==(new Date).toInt()},Date.prototype.incrementDateByWorkingDays=function(e){for(var t=Math.abs(e);t>0;)this.setDate(this.getDate()+(e>0?1:-1)),this.isHoliday()||t--;return this},Date.prototype.distanceInWorkingDays=function(e){var t=new Date(this.getTime());t.setHours(23,59,59,999);var n=0,r=new Date(e.getTime());r.setHours(23,59,59,999);for(var i=r.getTime();t.getTime()<=i;)n+=isHoliday(t)?0:1,t.setDate(t.getDate()+1);return n},Date.prototype.setFirstDayOfThisWeek=function(e){e||(e=Date.firstDayOfWeek),this.setDate(this.getDate()-this.getDay()+e-(0==this.getDay()&&0!=e?7:0))};