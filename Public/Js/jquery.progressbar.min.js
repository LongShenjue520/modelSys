!function(e){e.extend({progressBar:new function(){this.defaults={increment:2,speed:15,showText:!0,width:120,boxImage:TP_PUBLIC+"/Images/progressbar.gif",barImage:{0:TP_PUBLIC+"/Images/progressbg_red.gif",30:TP_PUBLIC+"/Images/progressbg_orange.gif",70:TP_PUBLIC+"/Images/progressbg_green.gif"},height:12},this.construct=function(t,n){var r=null,a=null;return null!=t&&(isNaN(t)?a=t:(r=t,null!=n&&(a=n))),this.each(function(t){function n(e,t){var n=t.barImage;if("object"==typeof t.barImage)for(var r in t.barImage){if(!(e>=parseInt(r)))break;n=t.barImage[r]}return n}var i=this;if(null!=r&&null!=this.bar&&null!=this.config)this.config.tpercentage=r,null!=a&&(i.config=e.extend(this.config,a));else{var c=e(this),s=e.extend({},e.progressBar.defaults,a),g=r;if(null==r)var g=c.html().replace("%","");c.html("");var o=document.createElement("img"),p=document.createElement("span");o.id=this.id+"_percentImage",p.id=this.id+"_percentText",o.title=g+"%",o.alt=g+"%",o.src=s.boxImage,o.width=s.width;var h=e(o),f=e(p);this.bar=h,this.ntext=f,this.config=s,this.config.cpercentage=0,this.config.tpercentage=g,h.css("width",s.width+"px"),h.css("height",s.height+"px"),h.css("background-image","url("+n(this.config.cpercentage,s)+")"),h.css("padding","0"),h.css("margin","0"),c.append(h),c.append(f)}var l=setInterval(function(){var e=i.config,t=parseInt(e.cpercentage),r=parseInt(e.tpercentage),a=parseInt(e.increment),c=i.bar,s=i.ntext,g=e.width/100;c.css("background-image","url("+n(t,e)+")"),c.css("background-position",-1*e.width+t*g+"px 50%"),e.showText&&s.html(" "+Math.round(t)+"%"),t>r?r>t-a?i.config.cpercentage=0+r:i.config.cpercentage-=a:i.config.cpercentage<i.config.tpercentage?t+a>r?i.config.cpercentage=r:i.config.cpercentage+=a:clearInterval(l)},i.config.speed)})}}}),e.fn.extend({progressBar:e.progressBar.construct})}(jQuery);