function SFNS(){function t(t,e){for(var i in e)t[i]=e[i]}function e(){}function i(){if(!document.all)return!1;var t,e=new RegExp("MSIE\\s*([0-9]+)");return(t=e.exec(navigator.userAgent))&&parseInt(t[0])<7?!1:!0}function n(t){var e,i;e=new RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})[ t]([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(?:\\.[0-9]{1,3})?(?:[\\+\\-][0-9]{1,2}:[0-9]{1,2})?$","ig");var i=e.exec(t);return i?new Date(i[1],i[2]-1,i[3],i[4],i[5],i[6]):new Date(t)}function s(t,e,i){for(t||(t=" "),i||(i=""),i=i.toString();i.length<e;)i=t+i;return i}function a(t,e,i){if(!t)return"";i=i?i:{},"s"==e&&(e="yyyy-MM-ddTHH:mm:ss");var n=t.getYear();1900>n&&(n+=1900);var a=[],r=function(e){switch(e){case"ddd":return i.weekStrs?i.weekStrs[t.getDay()]:t.getDay();case"dd":return s("0",2,t.getDate());case"d":return t.getDate();case"yyyy":return s("0",4,n);case"yy":return s("0",2,n%100);case"MM":return s("0",2,t.getMonth()+1);case"M":return t.getMonth()+1;case"hhh":return Math.ceil((t.getMonth()+1)/6);case"HH":return s("0",2,t.getHours());case"H":return t.getHours();case"mm":return s("0",2,t.getMinutes());case"m":return t.getMinutes();case"ss":return s("0",2,t.getSeconds());case"s":return t.getSeconds();case"q":return Math.ceil((t.getMonth()+1)/3)}return e};return e=e.replace(new RegExp("\\\\([a-zA-Z])","g"),function(t,e){return a.push(e),"\\"}),e=e.replace(new RegExp("([a-zA-Z])\\1*","g"),r),e=e.replace(new RegExp("\\\\","g"),function(t){return a.shift()})}function r(t,e){function i(t,i){return e[i]}return typeof e!=wi[190]&&(e=[e]),t.replace(new RegExp("%([0-9a-zA-Z_]+)","gi"),i)}function o(t,e){if(e.indexOf(",")>0){for(var i=e.split(","),n=0;n<i.length;n++)if(o(t,i[n]))return!0;return!1}try{return e.toLowerCase().indexOf(".cur")>0&&(e="url("+e+"),auto"),e=e.toLowerCase(),"hand"!=e||document.all||(e=wi[189]),t.style.cursor=e,!0}catch(s){return!1}}function l(t,e){t.style.filter=wi[188]+parseInt(100*e)+")",t.style.MozOpacity=e,t.style.opacity=e}function h(t,e,i,n){if(t){var s=n?[]:null;i=i?i:function(t,e){return t==e};for(var a=t.length-1;a>=0;a--)if(i(t[a],e)){if(!n)return t[a];s.push(s)}return s}}function d(t,e,i){if(t)for(var n=t.length-1;n>=0;n--)if(t[n]==e&&(t.splice(n,1),!i))return t[n]}function u(e,i){t(e.style,{width:i[0]+"px",height:i[1]+"px"})}function c(t){var e=[t.offsetWidth,t.offsetHeight];if(t.clientHeight&&!document.all&&(e[1]=t.clientHeight),e[0]||(e[0]=t.clientWidth),e[0]||(e[0]=parseInt(t.style.width)),e[1]||(e[1]=t.clientHeight),e[1]||(e[1]=parseInt(t.style.height)),!e[0]||!e[1])for(t=t.parentElement;t&&(!e[0]&&t.offsetWidth&&(e[0]=t.offsetWidth),!e[1]&&t.offsetHeight&&(e[1]=t.offsetHeight),!e[0]||!e[1]);)t=t.parentElement;return e}function g(e,i){i=Math.round(i%360);var n,s=i*Math.PI/180,a=e.style,r=wi[187];if(typeof a[n="WebkitTransform"]==r||typeof a[n="MozTransform"]==r||typeof a[n="transform"]==r){var o=0==i?"":"rotate("+i+"deg)",l={};return l[n]=o,t(e.style,l),!0}return typeof a.filter==wi[187]&&document.body.filters?(t(e.style,{filter:0==i?"":"progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',M11="+Math.cos(s)+",M12="+-Math.sin(s)+",M21="+Math.sin(s)+",M22="+Math.cos(s)+")"}),!0):!1}function p(t){}function f(){}function m(t,e){return function(){return e.apply(t,arguments)}}function v(t){return t.tagName||t.nodeName||t==window}function y(t){return t||(t=[]),t[0]||(t[0]=window.event),t[0]&&!t[0].target&&t[0].srcElement&&(t[0].target=t[0].srcElement),t}function w(t,e){return function(){e.apply(t,y(arguments))}}function S(t){t=t?t:window.event,t&&(document.all?(t.cancelBubble=!0,t.returnValue=!1):t.stopPropagation&&(t.preventDefault(),t.stopPropagation()))}function T(t){t=t?t:window.event,t&&(document.all?(t.cancelBubble=!0,t.returnValue=!0):t.stopPropagation&&t.stopPropagation())}function C(t,e,i,n,s){return x(t,e,v(t)?w(i,n):m(i,n),s)}function k(t,e){if(t){t.parentNode&&!e&&t.parentNode.removeChild(t),e||(D(t),t._SF_E_&&(t._SF_E_=null));for(var i;i=t.firstChild;)k(i)}}function b(t,e){return function(){t.apply(this,arguments),E(e)}}function x(t,e,i,n){var s=[t,e];n&&(i=b(i,s));var a=v(t);if(a)if(i=w(t,i),t.addEventListener)t.addEventListener(e,i,!1);else if(t.attachEvent)t.attachEvent("on"+e,i);else{var r=t["on"+e];typeof r==wi[186]?t["on"+e]=function(){r(),i()}:t["on"+e]=i}return s.push(i),t._SF_E_||(t._SF_E_=[]),h(t._SF_E_,e)||t._SF_E_.push(e),t[wi[185]+e]&&"shape"!=a?t[wi[185]+e].push(s):t[wi[185]+e]="shape"==a?[]:[s],f.allEvents||(f.allEvents=[]),"unload"!=e&&f.allEvents.push(s),s}function E(t){if(t&&0!=t.length){try{v(t[0])&&(t[0].removeEventListener?t[0].removeEventListener(t[1],t[2],!1):t[0].detachEvent?t[0].detachEvent("on"+t[1],t[2]):t[0]["on"+t[1]]=null)}catch(e){}for(d(t[0][wi[185]+t[1]],t),d(f.allEvents,t);t.length>0;)t.pop()}}function D(t,e){if(t&&t._SF_E_)if(e)for(var i,n=t[wi[185]+e];i=n.pop();)E(i);else for(var s=t._SF_E_.length-1;s>=0;s--)D(t,t._SF_E_[s])}function F(){var t=f.allEvents;if(t)for(var e=t.length-1;e>=0;e--)E(t[e]);f.allEvents=null}function L(t,e,i){if(v(t))try{t.fireEvent&&t.fireEvent("on"+e),t.dispatchEvent&&t.dispatchEvent(e)}catch(n){}i||(i=[]);var s=t[wi[185]+e];if(s&&s.length>0)for(var a=0;a<s.length;a++){var r=s[a];r&&r[2]&&r[2].apply(t,i)}}function P(t,e){for(var i=[0,0],n=t;n&&n.offsetParent&&n!=e;)i[0]+=n.offsetLeft,i[1]+=n.offsetTop,n=n.offsetParent,n&&(i[0]-=n.scrollLeft,i[1]-=n.scrollTop);return i}function I(t,e){if(typeof t.clientX!=wi[184]){var i=e.getBoundingClientRect();return[t.clientX-i.left,t.clientY-i.top]}if(typeof t.pageX!=wi[184]){var n=P(e);return[t.pageX-n[0],t.pageY-n[1]]}return[0,0]}function N(t,e){return I(t,e)}function M(t){return document.all?t.button:2==t.button?2:1}function O(t){document.all?(t.unselectable="on",t.onselectstart=z):t.style.MozUserSelect="text"}function z(){return!1}function H(){f._ganttUnloadListener||(f._ganttUnloadListener=x(window,"unload",F))}function R(){}function A(){return window.XMLHttpRequest?new window.XMLHttpRequest:typeof ActiveXObject!=wi[184]?new ActiveXObject("Microsoft.XMLHTTP"):void 0}function _(t,e,i,n){var s;if(0!=location.protocol.indexOf("http")&&0!=t.indexOf("http://")){try{s=j(),s.load(t)}catch(a){}if(s&&s.documentElement)return e&&e.apply(null,[s]),void(s=null)}var r=A(),o=!1,l=m(this,function(){if(o=!0,4==r.readyState){var t=r.responseXML;if(t.documentElement||(t=j(r.responseText)),!t||!t.documentElement)return void e();e&&e.apply(null,[t]),t=null,D(r),r=null}});r.onreadystatechange=l,r.open(n?"POST":"GET",t,!!i),r.send(n?n:null),i||o||l()}function j(t){var e;if(typeof ActiveXObject!=wi[184]&&typeof window.GetObject!=wi[184]){try{e=new ActiveXObject("Msxml2.DOMDocument")}catch(i){e=new ActiveXObject("Msxml.DOMDocument")}t&&e.loadXML(t)}else t?typeof DOMParser!=wi[184]&&(e=(new DOMParser).parseFromString(t,"text/xml")):document.implementation&&document.implementation.createDocument&&(e=document.implementation.createDocument("","",null));return e}function B(t,e){for(var i=e.split("/"),n=0;n<i.length;n++){if(!t)return t;var s=i[n];if(".."!=s){var a;for(a=t.firstChild;a&&("*"!=s&&s!=a.nodeName);a=a.nextSibling);t=a}else t=t.parentNode}return t}function V(t){return t&&typeof t==wi[190]?t.text?t.text:t.childNodes[0]?t.childNodes[0].nodeValue:"":t}function W(t,e){for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(t.ownerDocument.createTextNode(e))}function G(t){return t.xml?t.xml:(new window.XMLSerializer).serializeToString(t)}function U(t,e){for(;t;){if(!e||e==t.nodeName)return t;t=t.nextSibling}return null}function X(t){this.obj=t?t:{},this.inited=!1,t||Y(this.obj,window._SFGantt_config,!1)}function Y(t,e,i){if(e)for(var n in e)switch(typeof e[n]){case wi[186]:break;case wi[190]:if(v(e[n])){t[n]=e[n];continue}t[n]||(t[n]={}),Y(t[n],e[n],i);break;default:0==i&&t[n]||(t[n]=e[n])}}function $(t,e){if(e)for(var i in e)typeof e[i]!=wi[186]&&(t[i]=e[i])}function Z(t){this.imgs=[];var e=new Image;this.img=e,C(e,"load",this,this.onLoad),e.src=t,e.complete&&this.onLoad()}function Q(t,e){Z.objs||(Z.objs={}),Z.objs[e]||(Z.objs[e]=new Z(e)),Z.objs[e].addImg(t)}function q(t,e){if(Z.objs)for(var i in Z.objs)if(!(!Z.objs[i]instanceof Z)){var n=Z.objs[i];n&&n.depose(),Z.objs[i]=null,delete Z.objs[i]}}function K(t){this.getWorkTime=t}function J(t){switch(t){case"AnyDay":return new K(tt([[[480,720],[780,1020]],[[480,720],[780,1020]],[[480,720],[780,1020]],[[480,720],[780,1020]],[[480,720],[780,1020]],[[480,720],[780,1020]],[[480,720],[780,1020]]],[]));case wi[183]:return new K(tt([[],[[480,720],[780,1020]],[[480,720],[780,1020]],[[480,720],[780,1020]],[[480,720],[780,1020]],[[480,720],[780,1020]],[]],[]));case"AnyTime":default:return new K(function(){return[Number.MIN_VALUE,Number.MIN_VALUE]})}}function tt(t,e){return function(i){return et(i,t,e)}}function et(t,e,i){for(var n=(t.valueOf()-60*t.getTimezoneOffset()*1e3)%864e5,s=t.valueOf()-n,a=0;a<i.length;a++){var r=i[a];if(i[a][0].valueOf()<=s&&i[a][1].valueOf()>t.valueOf()){if(0==r[2].length)return et(i[a][1],e,i);for(var a=0;a<r[2].length;a++){var o=r[2][a];if(n<60*o[1]*1e3)return[new Date(s+60*o[0]*1e3),new Date(s+60*o[1]*1e3)]}return et(new Date(s+864e5),e,i)}}for(var l=t.getDay(),a=0;a<e[l].length;a++){var o=e[l][a];if(n<60*o[1]*1e3)return[new Date(s+60*o[0]*1e3),new Date(s+60*o[1]*1e3)]}return et(new Date(s+864e5),e,i)}function it(e,i,n){t(this,{div:e,handle:i,container:e,interval:256}),t(this,n)}function nt(t,e,i){return x(t,wi[182],function(n){if(1==M(n)){var s=new it(t,e,i);s.onMouseDown(n)}})}function st(){arguments.length<1||(this.div=document.createElement("div"))}function at(){var e=this.div=document.createElement("canvas");t(e.style,{position:wi[178],zIndex:420})}function rt(){return typeof at._isSupport==wi[184]&&(at._isSupport=!!document.createElement("canvas").getContext),at._isSupport}function ot(){var e=this.div=document.createElement("div");t(e.style,{position:wi[178],zIndex:420}),this.ctx=new window.jsGraphics(e)}function lt(){return!!window.jsGraphics}function ht(){var e=wi[175],i=this.div=document.createElementNS(e,"svg");t(i.style,{position:wi[178],zIndex:420});var n=this.path=document.createElementNS(e,"path");i.appendChild(n)}function dt(){if(typeof ht._isSupport==wi[184])if(document.createElementNS){var t=wi[175],e=document.createElementNS(t,"svg");ht._isSupport=typeof e.ownerSVGElement==wi[190]}else ht._isSupport=!1;return ht._isSupport}function ut(){var e=this.div=document.createElement("v:shape");t(e,{unselectable:"on",filled:"true"});var i=this.stroke=document.createElement("v:stroke");t(i,{joinstyle:"round",endcap:"round"}),e.appendChild(i);var n=this.fill=document.createElement("v:fill");e.appendChild(n),i.style.cssText=n.style.cssText=e.style.cssText=wi[171],i.style.behavior=n.style.behavior=e.style.behavior=wi[170],e.style.position=wi[178],e.style.zIndex="420"}function ct(){if(typeof ut._isSupport==wi[184])try{if(document.namespaces){document.namespaces.v||document.namespaces.add("v","urn:schemas-microsoft-com:vml");var t=document.createElement("v:shape");t.style.cssText=wi[171],t.style.behavior=wi[170],document.body.appendChild(t),ut._isSupport=typeof t.Path==wi[190],t.parentNode.removeChild(t)}else ut._isSupport=!1}catch(e){ut._isSupport=!1}return ut._isSupport}function gt(e,i){i=i?i:new X,$(this,i.getConfigObj("SFData")),t(this,{modules:[],adapter:e,components:[],rootElement:{},lastElement:{},elementUids:{}}),e.initialize(),this.initialize()}function pt(){}function ft(){}function mt(){this.elementType=wi[169],t(this,{SuccessorLinks:[],PredecessorLinks:[],Assignments:[]}),t(this,{getParentTask:this.getParent,getNextTask:this.getNext,getPreviousTask:this.getPrevious,getAncestorTask:this.getAncestor,getNextViewTask:this.getNextView,getPreviousViewTask:this.getPreviousView,containsTask:this.contains})}function vt(){this.elementType=wi[167]}function yt(){this.elementType=wi[166]}function wt(){this.elementType=wi[168],t(this,{getParentResource:this.getParent,getNextResource:this.getNext,getPreviousResource:this.getPrevious,getAncestorResource:this.getAncestor,getNextViewResource:this.getNextView,getPreviousViewResource:this.getPreviousView,containsResource:this.contains}),this.Assignments=[]}function St(t,e){this.read=t,this.write=e}function Tt(t){return this.read.apply(this,[t])}function Ct(t,e){return this.write.apply(this,[t,e])}function kt(){St.types={Bool2Int:new St(It,Nt),Int:new St(Lt,Pt),Float:new St(Mt,Ot),String:new St(Dt,Ft),Time:new St(xt,Et)}}function bt(t){return St.types[t]}function xt(t){return n(V(t))}function Et(t,e){W(t,a(e,"s"))}function Dt(t){return V(t)}function Ft(t,e){W(t,e)}function Lt(t){return parseInt(V(t))}function Pt(t,e){W(t,parseInt(e))}function It(t){return parseInt(V(t))>0?!0:!1}function Nt(t,e){W(t,e?1:0)}function Mt(t){return parseFloat(V(t))}function Ot(t,e){W(t,parseFloat(e))}function zt(){}function Ht(){}function Rt(e,i){t(this,{taskReader:{},taskWriter:{},resourceReader:{},resourceWriter:{},linkReader:{},linkWriter:{},assignmentReader:{},assignmentWriter:{}});var n=typeof e==wi[187]?this.loadUrl(e):e;i=i?i:new X,$(this,i.getConfigObj("SFDataXml")),t(this,{doc:n,config:i}),this.addDefaultProperty()}function At(e,i){t(this,{taskReader:{},taskWriter:{},resourceReader:{},resourceWriter:{},linkReader:{},linkWriter:{},assignmentReader:{},assignmentWriter:{}}),i=i?i:new X,$(this,i.getConfigObj("SFDataProject")),t(this,{doc:e,config:i}),this.addDefaultProperty()}function _t(){}function jt(){}function Bt(){}function Vt(){}function Wt(){}function Gt(t){this.setTaskFields("Name,Start,Finish,Summary,PercentComplete,Notes"),this.setLinkFields(wi[147]),this.clear(),t&&t.addComponent(this)}function Ut(t,e){t=this.config=t?t:new X,this.elementType=wi[169],$(this,t.getConfigObj("SFGantt")),this.initContainer(),this.setViewSize(c(this.container)),this.controls=[];var i=this.container.ownerDocument;i.createDocumentFragment&&(this.containerFragment=i.createDocumentFragment());var n;switch(this.addControl(new Ne),this.addControl(new pe),this.addControl(new he),this.addControl(new Qt),this.addControl(new oe(this[this.elementType.toLowerCase()+wi[105]].split(","))),this.addControl(new ee),this.addControl(new Me),this.addControl(new Oe(this.elementType)),this.addControl(new re({elementType:this.elementType})),this.addControl(new ye),this.addControl(new Jt({elementType:this.elementType})),this.addControl(n=new ae({fieldNames:this[this.elementType.toLowerCase()+wi[105]].split(","),bgColor:this.bodyBgColor,elementType:this.elementType})),this.addControl(new ae({fieldNames:this[this.elementType.toLowerCase()+"IdFieldNames"].split(","),bgColor:this.idCellBgColor,mainList:n,elementType:this.elementType})),this.addControl(new te),this.addControl(new ne),this.addControl(new le),this.addControl(new ge),this.addControl(new me),this.addControl(new ve),this.addControl(new ke),this.addControl(new xe),this.addControl(new Ee),this.addControl(new De),this.addControl(new He),this.addControl(new Zt),this.addControl(new Te),this.addControl(new Se),this.elementType){case wi[169]:this.addControl(new Ce),this.addControl(new be),this.addControl(new de);break;case wi[168]:this.addControl(new SFGanttResourceMap)}this.addControl(new Pe),this.addControl(new ce),this.addControl(new Kt),this.addControl(new qt),this.addControl(new se),this.addControl(new Ie),this.addControl(new ze),this.addControl(new Fe),this.addControl(new fe),this.containerFragment&&(this.container.appendChild(this.containerFragment),this.containerFragment=null),e&&this.setData(e)}function Xt(){}function Yt(t,e,i){this.unit=t,this.number=e,this.format=i}function $t(e,i,n,s,a,r){a||($t.idNum||($t.idNum=0),a="MenuItem_"+$t.idNum++),r=r?r:500,t(this,{showHandle:e,runHandle:i,text:n,icon:s,id:a,index:r})}function Zt(){}function Qt(t){}function qt(){}function Kt(){}function Jt(){}function te(){}function ee(){}function ie(t,e){if(e.indexOf(",")>0){for(var i=e.split(","),n=0;n<i.length;n++)if(this.setCursor(t,i[n]))return!0;return!1}try{return e.toLowerCase().indexOf(".cur")>0&&(e="url("+this.imgPath+"cursor/"+e+"),auto"),e=e.toLowerCase(),"hand"!=e||document.all||(e=wi[189]),t.style.cursor=e,!0}catch(s){return!1}}function ne(){}function se(){}function ae(e){t(this,e)}function re(){this.selectedElements=[]}function oe(t){this.fieldNames=t}function le(){}function he(){this.panels={}}function de(){}function ue(e,i){this.time=e?n(e):new Date,this.progressType="normal",t(this,{vertexSize:[11,11],lineColor:"red",lineWeight:1}),t(this,i)}function ce(){}function ge(){}function pe(){this.contextMenuItems=[]}function fe(){}function me(){}function ve(){}function ye(){}function we(){}function Se(t){this.layoutName="listFoot"}function Te(){this.layoutName="mapFoot"}function Ce(){}function ke(){}function be(t){$(this,t),this.items=[]}function xe(){}function Ee(){}function De(){}function Fe(e,i,n){t(this,{time:e,dragable:i,style:n})}function Le(t,e,i){var n=new Fe(t,e,i);return this.addControl(n),n}function Pe(t,e){}function Ie(){}function Ne(){}function Me(){}function Oe(t){this.elementType=t}function ze(){}function He(){}function Re(){if(!(arguments.length<=0)){t(this,{width:100,headText:"",headStyle:{textAlign:wi[91]},bodyStyle:{textAlign:wi[103]},inputStyle:{}});var e=arguments[0];if(typeof e!=wi[190]){var i=arguments;e={},i[0]&&(e.width=i[0]),i[1]&&(e.headText=i[1]),i[2]&&(e.headFunc=i[2]),i[3]&&(e.bodyFunc=i[3]),i[4]&&(e.inputFunc=i[4]),i[5]&&(e.inputData=i[5]),i[6]&&(e.bodyData=i[6])}t(this,e)}}function Ae(t,e){var i=Re[wi[39]+t];return i&&i[e]||je(t,e,new Re(100,e)),i||(i=Re[wi[39]+t]),i[e]}function _e(t,e){for(var i=[],n=0;n<e.length;n++)e[n]&&i.push(Ae(t,e[n]));return i}function je(t,e,i){var n=Re[wi[39]+t];n||(n=Re[wi[39]+t]={}),n[e]=i,i.Name=e}function Be(t){return _e(wi[169],t)}function Ve(t){return _e(wi[168],t)}function We(t){return _e(wi[167],t)}function Ge(t){return Ae(wi[169],t)}function Ue(t){return Ae(wi[168],t)}function Xe(t){return Ae(wi[167],t)}function Ye(t,e){return je(wi[169],t,e)}function $e(t,e){return je(wi[168],t,e)}function Ze(t,e){return je(wi[167],t,e)}function Qe(t,e,i,n,s,a,r,o){je(wi[169],t,new Re({width:e,headText:i,headFunc:n,bodyFunc:s,inputFunc:a,inputData:r,bodyData:o}))}function qe(){if(!Re.inited){Re.inited=!0,Re.NormalHead=Re.prototype.headFunc,Re.NormalBody=Re.prototype.bodyFunc,Re.BoolBody=Ke.prototype.bodyFunc,Re.BoolInput=Ke.prototype.inputFunc,Re.BoolCheckbox=Ke.prototype.inputFunc,Re.createInput=Re.prototype.createInput,Re.NormalInput=Re.prototype.inputFunc,Re.DateBody=ni.prototype.bodyFunc,Re.DateInput=ni.prototype.inputFunc;var t=window._SFGantt_config.SFGanttField,e=t.fieldTexts;Ye("Empty",new Re({width:36,ReadOnly:!0})),Ye("UID",new Re({width:36,bodyData:"UID",headText:e.UID,ReadOnly:!0,bodyStyle:{textAlign:wi[91]}})),Ye("ID",new Re({width:36,bodyData:"ID",headText:e.ID,ReadOnly:!0,bodyStyle:{textAlign:wi[91]}})),Ye("name",new Re({width:120,bodyData:"Name",headText:e.TaskName})),Ye("Name",new ri({width:120,headText:e.TaskName})),Ye(wi[145],new Re({width:100,bodyData:wi[145],headText:e.OutlineNumber,ReadOnly:!0}));var i=new oi({width:32,headText:e.StatusIcon});i.addIcon(function(e,i){if(100==e.PercentComplete){var n=this.createImage(i);return Q(n,i.imgPath+"icon_finished"+i.imgType),i.setTooltip&&i.setTooltip(n,function(s){return s.bindObject==n?!1:(s.bindObject=n,s.setContent(i.container.ownerDocument.createTextNode(r(t.tooltipPercentComplete,a(e.Finish,t.dateShowFormat)))),!0)}),n}},wi[142]),i.addIcon(function(e,i){if(e.ConstraintType&&!(e.ConstraintType<=1)){var n=this.createImage(i);return Q(n,i.imgPath+"icon_constraint"+e.ConstraintType+i.imgType),i.setTooltip&&i.setTooltip(n,function(s){if(s.bindObject==n)return!1;s.bindObject=n;var o=r(t.tooltipConstraint,[t.constraintTypes[e.ConstraintType],a(e.ConstraintDate,t.dateShowFormat)]);return s.setContent(i.container.ownerDocument.createTextNode(o)),!0}),n}},"ConstraintType,ConstraintDate"),i.addIcon(function(t,e){if(t.Notes){var i=this.createImage(e);return Q(i,e.imgPath+wi[38]+e.imgType),e.setTooltip&&e.setTooltip(i,function(n){if(n.bindObject==i)return!1;n.bindObject=i;var s=Ae(t.elementType,wi[141]).headText+': "'+t.Notes+'"';return n.setContent(e.container.ownerDocument.createTextNode(s)),!0}),i}},wi[141]),i.addIcon(function(t,e){if(t.HyperlinkAddress){var i=e.container.ownerDocument.createElement("a");i.href=t.HyperlinkAddress,i.target="_blank";var n=this.createImage(e);return Q(n,e.imgPath+wi[37]+e.imgType),i.appendChild(n),e.setTooltip&&e.setTooltip(n,function(i){if(i.bindObject==n)return!1;i.bindObject=n;var s=t.Hyperlink?t.Hyperlink:t.HyperlinkAddress;return i.setContent(e.container.ownerDocument.createTextNode(s)),!0}),i}},wi[36]),Ye(wi[35],i),Ye("Duration",new si({width:60,bodyData:"Start,Finish",headText:e.Duration})),Ye(wi[148],new ni({width:100,bodyData:wi[148],headText:e.Start,disableSummaryEdit:!0})),Ye(wi[149],new ni({width:100,bodyData:wi[149],headText:e.Finish,disableSummaryEdit:!0})),Ye(wi[141],new ii({width:100,bodyData:wi[141],headText:e.Notes})),Ye(wi[136],new ai({width:120,bodyData:wi[136],headText:e.ClassName})),Ge(wi[136]).getOptions=function(t,e){return t.Summary?{SummaryNormal:wi[34],SummaryArrow:wi[33]}:t.Start&&t.Finish&&t.Start.valueOf()==t.Finish.valueOf()?{MilestoneNormal:wi[32],MilestoneCircle:wi[31]}:{TaskNormal:wi[30],TaskImportant:"TaskImportant"}},Ye(wi[140],new ai({width:120,bodyData:wi[140],headText:e.ConstraintType,options:window._SFGantt_config.SFGanttField.constraintTypes})),Ye(wi[139],new ni({width:100,bodyData:wi[139],headText:e.ConstraintDate})),Ye(wi[133],new Ke({width:30,bodyData:wi[133],headText:e.Critical})),Ye(wi[75],new ei({width:30,headText:e.Selected})),Ye(wi[168],new Re({width:100,bodyData:wi[168],headText:e.Resource,bodyFunc:function(t,e,i){for(var n=[],s=e.getAssignments(),a=0;a<s.length;a++){var r=s[a].getResource();if(r){var o=r.Name;1!=s[a].Units&&(o+="["+100*s[a].Units+"%]"),n.push(o)}}t.appendChild(t.ownerDocument.createTextNode(n.join(",")))},ReadOnly:!0})),Ye(wi[142],new Je({width:100,bodyData:wi[142],headText:e.PercentComplete})),Ye(wi[138],new ni({width:100,bodyData:wi[138],headText:e.ActualStart,disableSummaryEdit:!0})),Ye(wi[137],new ni({width:100,bodyData:wi[137],headText:e.ActualFinish,disableSummaryEdit:!0})),Ye("ActualDuration",new si({width:60,bodyData:"ActualStart,ActualFinish",headText:e.ActualDuration})),Ye(wi[132],new ni({width:100,bodyData:wi[132],headText:e.BaselineStart,disableSummaryEdit:!0})),Ye(wi[131],new ni({width:100,bodyData:wi[131],headText:e.BaselineFinish,disableSummaryEdit:!0})),$e("Empty",new Re({width:36,ReadOnly:!0})),$e("UID",new Re({width:36,bodyData:"UID",headText:e.UID,ReadOnly:!0,bodyStyle:{textAlign:wi[91]}})),$e("ID",new Re({width:36,bodyData:"ID",headText:e.ID,ReadOnly:!0,bodyStyle:{textAlign:wi[91]}})),$e("name",new Re({width:120,bodyData:"Name",headText:e.ResourceName})),$e("Name",new ri({width:120,headText:e.ResourceName})),$e(wi[145],new Re({width:100,bodyData:wi[145],headText:e.OutlineNumber,ReadOnly:!0}));var i=new oi({width:32,headText:e.StatusIcon});i.addIcon(function(t,e){if(t.Notes){var i=this.createImage(e);return Q(i,e.imgPath+wi[38]+e.imgType),e.setTooltip&&e.setTooltip(i,function(n){if(n.bindObject==i)return!1;n.bindObject=i;var s=Ae(t.elementType,wi[141]).headText+': "'+t.Notes+'"';return n.setContent(e.container.ownerDocument.createTextNode(s)),!0}),i}},wi[141]),i.addIcon(function(t,e){if(t.HyperlinkAddress){var i=e.container.ownerDocument.createElement("a");i.href=t.HyperlinkAddress,i.target="_blank";var n=this.createImage(e);return Q(n,e.imgPath+wi[37]+e.imgType),i.appendChild(n),e.setTooltip&&e.setTooltip(n,function(i){if(i.bindObject==n)return!1;i.bindObject=n;var s=t.Hyperlink?t.Hyperlink:t.HyperlinkAddress;return i.setContent(e.container.ownerDocument.createTextNode(s)),!0}),i}},wi[36]),$e(wi[35],i),$e(wi[141],new ii({width:100,bodyData:wi[141],headText:e.Notes})),$e(wi[136],new ai({width:120,bodyData:wi[136],headText:e.ClassName})),Ue(wi[136]).getOptions=function(t,e){return t.Summary?{SummaryNormal:wi[34],SummaryArrow:wi[33]}:t.Start&&t.Finish&&t.Start.valueOf()==t.Finish.valueOf()?{MilestoneNormal:wi[32],MilestoneCircle:wi[31]}:{ResourceNormal:"ResourceNormal",ResourceImportant:"ResourceImportant"}},$e(wi[133],new Ke({width:30,bodyData:wi[133],headText:e.Critical})),$e(wi[75],new ei({width:30,headText:e.Selected})),$e(wi[169],new Re({width:100,bodyData:wi[168],headText:e.Resource,bodyFunc:function(t,e,i){for(var n=[],s=e.getAssignments(),a=0;a<s.length;a++){var e=s[a].getResource();if(e){var r=e.Name;1!=s[a].Units&&(r+="["+100*s[a].Units+"%]"),n.push(r)}}t.appendChild(t.ownerDocument.createTextNode(n.join(",")))},ReadOnly:!0})),Re.linkFields={},Ze(wi[147],new ai({width:100,bodyData:wi[147],headText:e.LinkType,options:window._SFGantt_config.SFGanttField.linkTypes})),Ze("FromTask",new ti({width:100,bodyData:wi[122],headText:e.FromTask})),Ze("ToTask",new ti({width:100,bodyData:wi[123],headText:e.ToTask}))}}function Ke(){arguments.length<=0||(Re.apply(this,arguments),this.inputData=this.bodyData)}function Je(){Re.apply(this,arguments),this.inputFunc=this.bodyFunc}function ti(){Re.apply(this,arguments),this.ReadOnly=!0}function ei(){Ke.apply(this,arguments),this.bodyData=wi[75]}function ii(){Re.apply(this,arguments),this.inputData=this.bodyData}function ni(){Re.apply(this,arguments),this.inputData=this.bodyData}function si(){Re.apply(this,arguments),this.ReadOnly=!0}function ai(){Re.apply(this,arguments),this.inputData=this.bodyData}function ri(){Re.apply(this,arguments),this.bodyData="Name,Summary,Collapse",this.inputData="Name"}function oi(){Re.apply(this,arguments),this.ReadOnly=!0,this.bodyDatas=[],this.icons=[]}function li(){}function hi(){}function di(){}function ui(){}function ci(){}function gi(){}function pi(){}function fi(){}function mi(){}function vi(){}function yi(){}SFNS.vinfo={time:"Sat Sep 25 22:00:55 UTC+0800 2010",version:"1.0",ov:"0.1.20080518"};var wi=["yyyy年MM月dd日","inset 1px #000000","#FFFFE1","Type,FromTask,ToTask","name,BaselineStart,BaselineFinish","name,ActualStart,ActualFinish,ActualDuration,PercentComplete","name,Start,Finish,Duration","${/SFGantt/imgPath}$arrow_black_$D${/SFGantt/imgType}$","${/SFGantt/imgPath}$arrow_red_$D${/SFGantt/imgType}$","${/SFGantt/imgPath}$arrow_blue_$D${/SFGantt/imgType}$","url(${/SFGantt/imgPath}$grid_red${/SFGantt/imgType}$)","solid 1px #FF0000","${/SFGantt/imgPath}$task_head_3_hollow${/SFGantt/imgType}$","${/SFGantt/imgPath}$task_head_2${/SFGantt/imgType}$","${/SFGantt/imgPath}$task_head_3${/SFGantt/imgType}$","url(${/SFGantt/imgPath}$grid_black${/SFGantt/imgType}$)","url(${/SFGantt/imgPath}$grid_blue${/SFGantt/imgType}$)","solid 1px #0000FF","#F4F4F4","LineHeight,Selected","Collapse,LineHeight,Selected","Percent","position:absolute;font-size:0px;z-index:100;left:0px;width:","px;height:11px;z-index:150;","px;top:","position:absolute;width:","SFGanttField","SFGanttField/boolTypes","keydown","selectstart","TaskNormal","MilestoneCircle","MilestoneNormal","SummaryArrow","SummaryNormal","StatusIcon","HyperlinkAddress,Hyperlink","icon_hyperlink","icon_notes","_Fields_","dotted 1px #808080","afterstarttimechange","#DDDDDD","px;height:","px;left:","scroll_barbg1","scroll_barright1","scroll_barcenter1","scroll_barleft1","scrollend","scrollstart","scroll_barcenter","scroll_barbg","scroll_barright","scroll_barleft","scroll_right","scroll_left","bodyScroll","checkbox","input","#999999","solid 1px #000000","contextmenu","elementheightchanged","taskchange","taskoutview","taskinview","http://www.baidu.com","#000000","col-resize,se-resize","default","scroll","clearSelected","setSelected","getSelected","Selected","orderdrag.cur,move","itemHeight","lineselect.cur,default","listfieldsresize","listfieldsscroll","list","dblclick","click","#FFFFFF","table","right","column","col-resize","100%","listBody","center","solid 1px ","afterscalechange","layoutchange","mapBody","heightspanchange","resize","Month","afterresize","beforeresize","initialize","hidden","left","relative","FieldNames","PreviousUID","afterlinkchange","aftertaskadd","aftertaskmove","aftertaskdelete","aftertaskchange","Assignments","Assignments/Assignment","../Links/*","SuccessorLink","Resources","NextSiblingDataUrl","Tasks","ChildrenDataUrl","CalendarUID","SFDataXmlBase","PredecessorTask","SuccessorTask","PredecessorLink","ExtendedAttribute","FieldID","ResourceUID","TaskUID","SuccessorUID","PredecessorUID","BaselineFinish","BaselineStart","Critical","LineHeight","Collapse","ClassName","ActualFinish","ActualStart","ConstraintDate","ConstraintType","Notes","PercentComplete","ReadOnly","OutlineLevel","OutlineNumber","Units","Type","Start","Finish","change","Summary","after","move","NextSibling","FirstChild","getRoot","delete","before","unregister","register","update","linkunregister","linkregister","afterlinkadd","beforelinkadd","Assignment","Link","Resource","Task","url(#default#VML)","behavior:url(#default#VML)","dashed","none","style","http://www.w3.org/2000/svg","solid","transparent","absolute","start","mouseup","mousemove","mousedown","Standard","undefined","_SF_E_","function","string","progid:DXImageTransform.Microsoft.Alpha(opacity=","pointer","object"];t(e,{setProperty:t,isCompatible:i,getDate:n,getLengthStr:s,getDateString:a,formatString:r,setCursor:o,setOpacity:l,findInArray:h,deleteInArray:d,setElementSize:u,getElementSize:c,setRotate:g,setNoPrint:p}),t(f,{getCallback:m,isHtmlControl:v,getEvent:y,createAdapter:w,cancelBubble:S,returnTrue:T,bind:C,deposeNode:k,runOnceHandle:b,addListener:x,removeListener:E,clearListeners:D,clearAllListeners:F,trigger:L,getPageOffset:P,getEventPosition:I,getEventRelative:N,getEventButton:M,setUnSelectable:O,falseFunction:z,load:H}),t(R,{createHttpRequest:A,loadXml:_,createDocument:j,selectSingleNode:B,getNodeValue:V,setNodeValue:W,getXmlString:G,getNextSibling:U}),t(X.prototype,{getConfig:function(t,e){this.inited||(this.inited=!0,this.parseWildcard());var i=this.getConfigObj(t);return typeof i!=wi[184]?i:e},getConfigObj:function(t){this.inited||(this.inited=!0,this.parseWildcard());for(var e,i=t.split(new RegExp("[/\\.]")),n=this.obj;typeof(e=i.shift())==wi[187];)if(e){if(!n||typeof n!=wi[190])break;n=n[e]}return n},setConfig:function(t,e,i){for(var n,s=t.split(new RegExp("[/\\.]")),a=this.obj;n=s.shift();)s[0]?(a[n]&&typeof a[n]==wi[190]||(a[n]={}),a=a[n]):0==i&&a[n]||(a[n]=e)},parseWildcard:function(t){if(t||(t=this.obj),t)for(var e in t)switch(typeof t[e]){case wi[190]:this.parseWildcard(t[e]);break;case wi[187]:if(t[e].indexOf("${")>=0){var i=this;t[e]=t[e].replace(new RegExp("\\$\\{([^\\}]+)\\}\\$","g"),function(t,e){return i.getConfig(e)})}}}}),t(X,{addConfig:Y,applyProperty:$}),t(Z.prototype,{addImg:function(t){this.imgs.push(t),this.loaded&&this.onLoad()},onLoad:function(){this.loaded=!0;for(var t;t=this.imgs.pop();)"img"==t.tagName.toLowerCase()?t.src=this.img.src:t.style.backgroundImage="url("+this.img.src+")"},depose:function(){this.imgs.length=0,D(this);for(var t in this)this[t]=null}}),t(Z,{setImageSrc:Q,depose:q}),t(K,{getCalendar:J,WT_WeekDay:tt,WT_WeekDayCal:et}),t(it.prototype,{onMouseDown:function(e){S(e);var i=this.div,n=i.ownerDocument;i.setCapture&&i.setCapture();var s=I(e,this.container);if(t(this,{ml:C(n,wi[181],this,this.onMouseMove),ul:C(n,wi[180],this,this.onMouseUp),sp:s,lp:s,timeout:window.setInterval(m(this,this.onTime),this.interval)}),this.rtp){var a=i.style;this.dsp={x:parseInt(a.left),y:parseInt(a.top)}}this.handle(s,s,wi[179])},onMouseMove:function(e){S(e);var i=I(e,this.container),n=this.rtp;if(this.lp=i,this.moveed=!0,n){var s=this.dsp,a=this.sp,r=s.x+n.x*(i.x-a.x),o=s.y+n.y*(i.y-a.y),l=this.rtpLimit;l&&(l.minX&&(r=Math.max(r,l.minX)),l.maxX&&(r=Math.min(r,l.maxX)),l.minY&&(o=Math.max(o,l.minY)),l.maxY&&(o=Math.min(o,l.maxY))),t(this.div.style,{left:r+"px",top:o+"px"})}},onTime:function(){this.div&&this.moveed&&(this.handle(this.sp,this.lp),this.moveed=!1)},onMouseUp:function(t){this.onTime();var e=this.div.ownerDocument;S(t),E(this.ml),E(this.ul),window.clearInterval(this.timeout),delete this.div,delete this.container,e.releaseCapture&&e.releaseCapture(),
this.handle(this.sp,this.lp,"end")}}),t(it,{setup:nt}),t(st.prototype,{getPanel:function(){return this.div},start:function(){},moveTo:function(){},lineTo:function(){},finish:function(){},clear:function(){},setScale:function(){},setPosition:function(e){t(this.div.style,{position:wi[178],left:e.x+"px",top:e.y+"px"})},setLineColor:function(){},setFillColor:function(){},setOpacity:function(){},setLineWeight:function(){},setLineStyle:function(){},setLineArrow:function(){}}),at.prototype=new st,t(at.prototype,{start:function(e,i,n){t(this,{origin:e,size:n,scale:i,pathArr:[]})},moveTo:function(t){var e=this.pathArr,i=this.scale,n=this.origin;e.push({type:"m",argu:[(t.x-n.x)/i,(t.y-n.y)/i]})},lineTo:function(t){var e=this.pathArr,i=this.scale,n=this.origin;e.push({type:"l",argu:[(t.x-n.x)/i,(t.y-n.y)/i]})},finish:function(){this.lastScale=this.scale,this.reDraw()},clear:function(){this.div.getContext("2d")},setScale:function(e){this.lastScale=e;var i=this.size;t(this.div.style,{width:i.x/e+"px",height:i.y/e+"px"}),this.reDraw()},reDraw:function(){var e=this.scale,i=this.lastScale,n=this.size,s=this.div,a=this.pathArr;if(n&&a&&0!=a.length){t(s,{width:n.x/i,height:n.y/i});var r=s.getContext("2d");t(r,{lineCap:"round",lineJoin:"round",fillStyle:this.bgcolor,lineWidth:this.lineWeight/e*i,strokeStyle:this.lineColor,globalAlpha:this.opacity}),r.beginPath(),r.scale(e/i,e/i);for(var o=0;o<a.length;o++){var l=a[o];switch(l.type){case"m":r.moveTo.apply(r,l.argu);break;case"l":r.lineTo.apply(r,l.argu)}}this.bgcolor&&r.fill(),this.lineColor&&r.stroke()}},setLineColor:function(t){t==wi[177]&&(t=""),this.lineColor=t,this.reDraw()},setFillColor:function(t){t==wi[177]&&(t=""),this.bgcolor=t,this.reDraw()},setOpacity:function(t){this.opacity=t,this.reDraw()},setLineWeight:function(t){this.lineWeight=t,this.reDraw()}}),t(at,{isSupport:rt}),ot.prototype=new st,t(ot.prototype,{start:function(e,i,n){t(this,{origin:e,size:n,scale:i,pathArr:[]})},moveTo:function(t){var e=this.pathArr,i=this.scale,n=this.origin,s={xPoints:[(t.x-n.x)/i],yPoints:[(t.y-n.y)/i]};e.push(s)},lineTo:function(t){var e=this.pathArr,i=e[e.length-1],n=this.scale,s=this.origin;i.xPoints.push((t.x-s.x)/n),i.yPoints.push((t.y-s.y)/n)},finish:function(){this.lastScale=this.scale,this.reDraw()},setScale:function(e){this.lastScale=e;var i=this.size;t(this.div.style,{width:i.x/e+"px",height:i.y/e+"px"}),this.reDraw()},setLineColor:function(t){t==wi[177]&&(t=""),this.lineColor=t,this.reDraw()},setFillColor:function(t){t==wi[177]&&(t=""),this.bgcolor=t,this.reDraw()},setOpacity:function(e){t(this.div.style,{filter:wi[188]+parseInt(100*e)+")",MozOpacity:e,opacity:e})},setLineWeight:function(t){this.lineWeight=t,this.reDraw()},setLineStyle:function(t){this.lineStyle=t.toLowerCase()},reDraw:function(){var e=this.scale,i=this.lastScale,n=this.size,s=this.div,a=this.pathArr;if(n&&a&&0!=a.length){t(s,{width:n.x/i,height:n.y/i});var r=this.ctx;r.clear();for(var o=0;o<a.length;o++){var l,h,d=a[o];if(e==i)l=d.xPoints,h=d.yPoints;else{l=new Array(d.xPoints.length),h=new Array(d.yPoints.length);for(var u=e/i,c=d.xPoints,g=d.yPoints,p=l.length-1;p>=0;p--)l[p]=c[p]*u,h[p]=g[p]*u}this.bgcolor&&(r.setColor(this.bgcolor),r.fillPolygon(l,h)),this.lineColor&&(r.setColor(this.lineColor),r.setStroke(this.lineStyle&&this.lineStyle!=wi[176]&&window.Stroke?window.Stroke.DOTTED:this.lineWeight),r.drawPolyline(l,h))}r.paint()}}}),t(ot,{isSupport:lt}),ht.prototype=new st,t(ht.prototype,{start:function(e,i,n){t(this,{origin:e,size:n,scale:i,pathArr:[]})},moveTo:function(t){var e=this.pathArr,i=this.scale,n=this.origin;e.push("M"),e.push((t.x-n.x)/i),e.push((t.y-n.y)/i)},lineTo:function(t){var e=this.pathArr,i=this.scale,n=this.origin;e.push("L"),e.push((t.x-n.x)/i),e.push((t.y-n.y)/i)},finish:function(){this.pathArr;this.path.setAttribute("d",this.pathArr.join(" ")),this.setScale(this.scale)},clear:function(){this.path.setAttribute("d","")},setScale:function(e){var i=this.size,n=this.lineWeight;i&&(t(this.div.style,{width:i.x/e+2*n+"px",height:i.y/e+2*n+"px"}),this.path.setAttribute("transform","scale("+this.scale/e+") translate("+n+","+n+")"),this.lastScale=e,this.path.setAttribute(wi[174],this.getStyle()))},setPosition:function(e){if(e){this.lastPosition=e;var i=this.lineWeight;t(this.div.style,{position:wi[178],left:e.x-i+"px",top:e.y-i+"px"})}},setLineColor:function(t){t!=wi[177]&&t||(t=wi[173]),this.lineColor=t,this.path.setAttribute(wi[174],this.getStyle())},setFillColor:function(t){t!=wi[177]&&t||(t=wi[173]),this.bgcolor=t,this.path.setAttribute(wi[174],this.getStyle())},setOpacity:function(t){this.opacity=t,this.path.setAttribute(wi[174],this.getStyle())},setLineWeight:function(t){this.lineWeight=t,this.setScale(this.lastScale),this.setPosition(this.lastPosition)},setLineStyle:function(t){var e;switch(t.toLowerCase()){case"dotted":e=[1,6];break;case wi[172]:e=[6,6]}this.dashArray=e,this.path.setAttribute(wi[174],this.getStyle())},getStyle:function(){var t=[];return t.push("fill:none"),t.push("opacity:"+this.opacity),t.push("stroke:"+this.lineColor),t.push("stroke-linecap:round"),t.push("stroke-linejoin:round"),t.push("stroke-dasharray:"+this.dashArray),t.push("stroke-width:"+this.lineWeight/this.scale*this.lastScale),t.push("fill:"+this.bgcolor),t.join(";")}}),t(ht,{isSupport:dt}),ut.prototype=new st,t(ut.prototype,{setPosition:function(t){var e=this.div;e.style.position=wi[178],e.style.left=t.x+"px",e.style.top=t.y+"px"},start:function(e,i,n){t(this,{origin:e,size:n,scale:i,pathArr:[]}),this.div.coordsize=parseInt(256*n.x/i)+","+parseInt(256*n.y/i)},moveTo:function(t){var e=this.pathArr,i=this.scale,n=this.origin;e.push("m"),e.push(parseInt(256*(t.x-n.x)/i)),e.push(parseInt(256*(t.y-n.y)/i))},lineTo:function(t){var e=this.pathArr,i=this.scale,n=this.origin;e.push("l"),e.push(parseInt(256*(t.x-n.x)/i)),e.push(parseInt(256*(t.y-n.y)/i))},finish:function(){var t=this.pathArr;t.push("e"),this.div.path=this.pathArr.join(" "),this.setScale(this.scale)},clear:function(){this.div.style.display=wi[173],this.div.path="e",this.div.style.display=""},setScale:function(t){var e=this.div,i=this.size;e.style.width=i.x/t+"px",e.style.height=i.y/t+"px"},setLineColor:function(t){var e=this.div;t==wi[177]||""==t?e.stroked=!1:(e.stroked=!0,e.strokecolor=t)},setFillColor:function(t){var e=this.div;t==wi[177]||""==t?e.filled=!1:(e.filled=!0,e.fillcolor=t)},setOpacity:function(t){this.stroke.opacity=t,this.fill.opacity=t},setLineWeight:function(t){this.div.strokeweight=t},setLineStyle:function(t){switch(t.toLowerCase()){case"dotted":t="ShortDot";break;case wi[172]:t="ShortDash"}this.stroke.dashstyle=t},setLineArrow:function(t){t[0]&&(this.stroke.startarrow=t[0]),t[1]&&(this.stroke.endarrow=t[1])}}),t(ut,{isSupport:ct}),t(gt.prototype,{initialize:function(){if(this.addTreeModule(wi[169]),this.addTreeModule(wi[168]),this.addModule(wi[167]),this.addModule(wi[166]),this.addLink=function(t,e,i){if(!this.checkEvent(wi[165],[t,e,i]))return!1;var n=this.adapter.addLink(t,e,i);return n.PredecessorTask=e,n.SuccessorTask=t,n.Type=i,this.registerLink(n),L(this,wi[164],[n]),n},this.addAssignment=function(t,e,i){if(!this.checkEvent("beforeassignmentadd",[t,e,i]))return!1;var n=this.adapter.addAssignment(t,e,i);return n.task=t,n.resource=e,this.registerAssignment(n),L(this,"afterassignmentadd",[n]),n},this._registerLink=function(t){if(t.SuccessorTask||(t.SuccessorTask=this.getTaskByUid(t.SuccessorUID,!1)),t.PredecessorTask||(t.PredecessorTask=this.getTaskByUid(t.PredecessorUID,!1)),t.SuccessorTask&&t.PredecessorTask)return void this.registerLink(t);if(this.afterTaskLinks||(this.afterTaskLinks={}),t.SuccessorUID&&!t.SuccessorTask){var e=t.SuccessorUID;this.afterTaskLinks[e]||(this.afterTaskLinks[e]=[]),this.afterTaskLinks[e].push(t)}if(t.PredecessorUID&&!t.PredecessorTask){var e=t.PredecessorUID;this.afterTaskLinks[e]||(this.afterTaskLinks[e]=[]),this.afterTaskLinks[e].push(t)}},this.readTaskLinks=function(t){for(var e=this.adapter.readTaskFirstLink(t);e;e=this.adapter.readTaskNextLink(t,e))this._registerLink(e)},this.readTaskAssignments=function(t){for(var e=this.adapter.readTaskFirstAssignment(t);e;e=this.adapter.readTaskNextAssignment(t,e))e.task=t,this.registerAssignment(e)},this.readResourceAssignments=function(t){for(var e=this.adapter.readResourceFirstAssignment(t);e;e=this.adapter.readResourceNextAssignment(t,e))e.resource=t,this.registerAssignment(e)},C(this,"taskregister",this,function(t){var e=t.UID;if(e&&this.afterTaskLinks&&this.afterTaskLinks[e]){var i,n=this.afterTaskLinks[e];for(this.afterTaskLinks[e]=null,delete this.afterTaskLinks[e];i=n.pop();)this._registerLink(i)}}),C(this,"taskunregister",this,function(t){for(var e=t.PredecessorLinks,i=e.length-1;i>=0;i--)this.unregisterLink(e[i]);for(var e=t.SuccessorLinks,i=e.length-1;i>=0;i--)this.unregisterLink(e[i]);for(var n=t.Assignments,i=n.length-1;i>=0;i--)this.unregisterAssignment(n[i])}),C(this,"resourceunregister",this,function(t){for(var e=t.Assignments,i=e.length-1;i>=0;i--)this.unregisterAssignment(e[i])}),C(this,wi[163],this,function(t){t.SuccessorTask.PredecessorLinks.push(t),t.PredecessorTask.SuccessorLinks.push(t)}),C(this,wi[162],this,function(t){d(t.PredecessorTask.SuccessorLinks,t),d(t.SuccessorTask.PredecessorLinks,t)}),C(this,wi[165],this,function(t,e,i){if(e&&i){for(var n=e.getPredecessorLinks(),s=n.length-1;s>=0;s--)if(n[s].PredecessorTask==i)return void(t.returnValue=!1);for(var n=e.getSuccessorLinks(),s=n.length-1;s>=0;s--)if(n[s].PredecessorTask==i)return void(t.returnValue=!1)}}),C(this,"assignmentregister",this,function(t){t.getTask().Assignments.push(t),t.getResource()&&t.getResource().Assignments.push(t)}),C(this,"assignmentunregister",this,function(t){d(t.task.Assignments,t),d(t.resource.Assignments,t)}),this.initComponents)for(var t=this.initComponents.split(","),e=0;e<t.length;e++)this.addComponent(new window[t[e]])},addModule:function(t){this.modules.push(t),this.elementUids[t]={},this["get"+t+"ByUid"]=function(e,i){return this.getElementByUid(t,e,i)},this[wi[161]+t]=function(e,i,n){return this.updateElement(t,e,i,n)},this[wi[160]+t]=function(e){return this.registerElement(t,e)},this[wi[159]+t]=function(e){return this.unregisterElement(t,e)},this["add"+t]=function(){for(var e=[t],i=0;i<arguments.length;i++)e.push(arguments[i]);return this.addElement(e)},this["canAdd"+t]=function(){return this.checkEvent(wi[158]+t+"add",arguments)},this[wi[157]+t]=function(e){return this.deleteElement(t,e)},this["canDelete"+t]=function(){return this.checkEvent(wi[158]+t+wi[157],arguments)}},addTreeModule:function(t){this.addModule(t),this[wi[156]+t]=function(e){return this.getRootElement(t)},this["read"+t+wi[155]]=function(e){return this.readElementFirstChild(t,e)},this["read"+t+wi[154]]=function(e){return this.readElementNextSibling(t,e)},this["get"+t+"ByOutline"]=function(e){return this.getElementByOutline(t,e)},this["compare"+t]=function(t,e){return this.compareElement(t,e)},this[wi[159]+t]=function(e){return this.unregisterTreeElement(t,e)},this["add"+t]=function(e,i){return this.addTreeElement(t,e,i)},this[wi[157]+t]=function(e){return this.deleteTreeElement(t,e)},this[wi[153]+t]=function(e,i,n){return this.moveElement(t,e,i,n)},this["canMove"+t]=function(e,i,n){return this.canMoveElement(t,e,i,n)}},getModules:function(){return this.modules},addComponent:function(t){h(this.components,t)||(t.initialize(this),this.components.push(t))},removeComponent:function(t){t.remove(t),d(this.components,t)},getCalendar:function(){return this.adapter.getCalendar()},checkEvent:function(t,e){for(var i=t,n={returnValue:!0},s=[n],a=0;a<e.length;a++)s.push(e[a]);return L(this,i,s),n.returnValue?!0:!1},depose:function(){D(this);for(var t in this)this[t]=null},registerElement:function(t,e){e.data=this;var i=e.UID;i&&(this.elementUids[t][i]=e),L(this,t.toLowerCase()+wi[160],[e])},unregisterElement:function(t,e){var i=e.UID;i&&(this.elementUids[t][i]=null,delete this.elementUids[t][i]),L(this,t.toLowerCase()+wi[159],[e]),e.data=null},addElement:function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);if(!this.checkEvent(wi[158]+t.toLowerCase()+"add",e))return!1;var n=this.adapter["add"+t].apply(this.adapter,e);return L(this,wi[152]+t.toLowerCase()+"add",[n]),this.registerElement(t,n),n},deleteElement:function(t,e){return this.checkEvent(wi[158]+t.toLowerCase()+wi[157],[e])?(this.unregisterElement(t,e),this.adapter[wi[157]+t](e),L(this,wi[152]+t.toLowerCase()+wi[157],[e]),!0):!1},getRootElement:function(t){var e=this.rootElement[t];return e||(e=this.rootElement[t]=this.adapter["readRoot"+t](),e&&this.registerElement(t,e)),e},readElementFirstChild:function(t,e){if(!e.firstChild){var i=e.firstChild=this.adapter["read"+t+wi[155]](e);i&&(i.parent=e,this.registerElement(t,i))}return e.firstChild},readElementNextSibling:function(t,e){if(e==this.getRootElement(t))return null;if(!e.nextSibling){var i=e.nextSibling=this.adapter["read"+t+wi[154]](e);i&&(i.previousSibling=e,i.parent=e.parent,this.registerElement(t,e.nextSibling))}return e.nextSibling},getElementByUid:function(t,e,i){var n=this.elementUids[t][e];if(n||i===!1)return n;for(this.lastElement[t]||(this.lastElement[t]=this.getRootElement(t));this.lastElement[t]=this.lastElement[t].getNext();)if(this.lastElement[t].UID==e)return this.lastElement[t];return null},getElementByOutline:function(t,e){var i=this.getRootElement(t);return e?this.searchElementOutline(t,i,e.split(".")):i},searchElementOutline:function(t,e,i){if(0==i.length)return e;for(var n=e.getFirstChild(),s=i.shift(),a=1;s>a;a++)n=n.getNextSibling();return this.searchElementOutline(t,n,i)},compareElement:function(t,e){for(var i=t.getOutlineNumber(this).split("."),n=e.getOutlineNumber(this).split("."),s=Math.min(i.length,n.length),a=0;s>a;a++){if(1*i[a]<1*n[a])return 1;if(1*i[a]>1*n[a])return-1}return i.length==n.length?0:i.length<n.length?1:-1},updateElement:function(t,e,i,n){this.adapter[wi[161]+t](e,i,n)},addTreeElement:function(t,e,i){if(!this.checkEvent(wi[158]+t.toLowerCase()+"add",[e,i]))return!1;e.getFirstChild()||e.setProperty(wi[151],!0);var n=this.adapter["add"+t](e,i);return n.parent=e,i?(n.previousSibling=i,n.nextSibling=i.getNextSibling(),n.nextSibling&&(n.nextSibling.previousSibling=n),i.nextSibling=n):(n.previousSibling=null,n.nextSibling=e.getFirstChild(),n.nextSibling&&(n.nextSibling.previousSibling=n),n.nextSibling=e.getFirstChild(),e.firstChild=n),this.registerElement(t,n),L(this,wi[152]+t.toLowerCase()+"add",[n]),n},deleteTreeElement:function(t,e){if(!this.checkEvent(wi[158]+t.toLowerCase()+wi[157],[e]))return!1;var i=e.getParent(),n=e.getPreviousSibling(),s=e.getNextSibling();return n&&(n.nextSibling=s),s&&(s.previousSibling=n),i&&(i.getFirstChild()==e&&(i.firstChild=s),i.setProperty(wi[151],!!i.getFirstChild())),e.previousSibling=null,e.nextSibling=null,this.adapter[wi[157]+t](e),this.unregisterTreeElement(t,e),L(this,wi[152]+t.toLowerCase()+wi[157],[e,i,n]),!0},unregisterTreeElement:function(t,e){var i=e.firstChild;for(e.firstChild=null;i;){this.unregisterTreeElement(t,i);var n=i.nextSibling;i.nextSibling=null,i.previousSibling=null,i.parent=null,i=n}this.unregisterElement(t,e)},moveElement:function(t,e,i,n){if(!this.canMoveElement(t,e,i,n))return!1;var s=e.getParent(),a=e.getPreviousSibling(),r=e.getNextSibling();return s.getFirstChild()==e&&(s.firstChild=r,r||s.setProperty(wi[151],!1)),e.parent=null,a&&(a.nextSibling=r,e.previousSibling=null),r&&(r.previousSibling=a,e.nextSibling=null),e.parent=i,e.previousSibling=n,n?(e.nextSibling=n.getNextSibling(),n.nextSibling=e):(e.nextSibling=i.getFirstChild(),i.firstChild=e),e.nextSibling&&(e.nextSibling.previousSibling=e),i.setProperty(wi[151],!0),this.adapter[wi[153]+t](e,s,a),L(this,wi[152]+t.toLowerCase()+wi[153],[e,s,a]),!0},canMoveElement:function(t,e,i,n){return!i&&n&&(i=n.getParent()),i||(i=this.getRootElement(t)),n&&n.getParent()!=i?!1:e.contains(i)?!1:this.checkEvent(wi[158]+t.toLowerCase()+wi[153],[e,i,n])?!0:!1}}),t(pt.prototype,{getProperty:function(t){return this[t]},setProperty:function(t,e){var i=typeof this[t]==wi[190]&&e?this[t].valueOf():this[t],n=typeof e==wi[190]&&e?e.valueOf():e;if(i==n)return!0;if(!this.canSetProperty(t,e))return!1;var s=this[t];if(this[t]=e,!this.data)return!0;if(this.data[wi[161]+this.elementType]&&this.data[wi[161]+this.elementType](this,t,e),"UID"==t){var a=this.data.elementUids[this.elementType];s&&delete a[s],e&&(a[e]=this)}L(this.data,wi[152]+this.elementType.toLowerCase()+wi[150],[this,t,e,s]);var r={},o={};return r[t]=s,o[t]=e,L(this.data,wi[152]+this.elementType.toLowerCase()+wi[161],[this,[t],o,r]),!0},canSetProperty:function(t,e){return this.data?this.data.checkEvent(wi[158]+this.elementType.toLowerCase()+wi[150],[this,t,e]):!0}}),ft.prototype=new pt,t(ft.prototype,{getFirstChild:function(){return typeof this.firstChild==wi[184]&&(this.firstChild=this.data.readElementFirstChild(this.elementType,this)),this.firstChild},getParent:function(){return this.parent},getPreviousSibling:function(){return this.previousSibling},getNextSibling:function(t){if(typeof this.nextSibling==wi[184]&&(this.nextSibling=this.data.readElementNextSibling(this.elementType,this)),!this.nextSibling&&t){var e=this.getParent();if(e)return e.getNextSibling(t)}return this.nextSibling},getAncestor:function(t){for(var e=this.getOutlineLevel(),i=this;e>t;)i=i.getParent(),e--;return i},getPrevious:function(){var t=this.getPreviousSibling();return t?t.getLastDescendant():this.getParent()},getNext:function(){if(this==this.data.getRootElement(this.elementType))return this.getFirstChild();if(this.Summary){var t=this.getFirstChild();if(t)return t}var t=this.getNextSibling();if(t)return t;for(var e=this.getParent();e;e=e.getParent())if(t=e.getNextSibling())return t;return null},getLastChild:function(){for(var t=null,e=this.getFirstChild();e;e=e.getNextSibling())t=e;return t},getLastDescendant:function(t){if(!this.Summary||t&&this.Collapse)return this;var e=this.getLastChild();return e?e.getLastDescendant(t):this},getNextView:function(){return this.Collapse?this.getNextSibling(!0):this.getNext()},getPreviousView:function(){var t=this.getPreviousSibling();return t?t.getLastDescendant(!0):(t=this.getParent(),t&&t.getOutlineLevel()>0?t:null)},isHidden:function(){if(!this.data)return!0;for(var t=this.getParentTask();t;t=t.getParentTask())if(t.Collapse||!t.data)return!0;return!1},contains:function(t){for(var e=t;e;e=e.getParent())if(e==this)return!0;return!1},getSiblingIndex:function(){for(var t=0,e=this;e;)e=e.getPreviousSibling(),t++;return t},getOutlineNumber:function(t){t=t?t:this.data;var e=this,i=t.getRootElement(this.elementType);if(e==i)return"0";for(var n=[];e&&e!=i;)n.unshift(e.getSiblingIndex()),e=e.getParent();return n.join(".")},getOutlineLevel:function(){for(var t=this,e=-1;t;)e++,t=t.getParent();return e}}),mt.prototype=new pt,t(mt.prototype,{getOutlineLevel:function(){for(var t=this,e=-1;t;)e++,t=t.getParent();return e},getOutlineNumber:function(t){t=t?t:this.data;var e=this,i=t.getRootElement(this.elementType);if(e==i)return"0";for(var n=[];e&&e!=i;)n.unshift(e.getSiblingIndex()),e=e.getParent();return n.join(".")},getSiblingIndex:function(){for(var t=0,e=this;e;)e=e.getPreviousSibling(),t++;return t},contains:function(t){for(var e=t;e;e=e.getParent())if(e==this)return!0;return!1},isHidden:function(){if(!this.data)return!0;for(var t=this.getParentTask();t;t=t.getParentTask())if(t.Collapse||!t.data)return!0;return!1},getPreviousView:function(){var t=this.getPreviousSibling();return t?t.getLastDescendant(!0):(t=this.getParent(),t&&t.getOutlineLevel()>0?t:null)},getNextView:function(){return this.Collapse?this.getNextSibling(!0):this.getNext()},getLastDescendant:function(t){if(!this.Summary||t&&this.Collapse)return this;var e=this.getLastChild();return e?e.getLastDescendant(t):this},getLastChild:function(){for(var t=null,e=this.getFirstChild();e;e=e.getNextSibling())t=e;return t},getNext:function(){if(this==this.data.getRootElement(this.elementType))return this.getFirstChild();if(this.Summary){var t=this.getFirstChild();if(t)return t}var t=this.getNextSibling();if(t)return t;for(var e=this.getParent();e;e=e.getParent())if(t=e.getNextSibling())return t;return null},getPrevious:function(){var t=this.getPreviousSibling();return t?t.getLastDescendant():this.getParent()},getAncestor:function(t){for(var e=this.getOutlineLevel(),i=this;e>t;)i=i.getParent(),e--;return i},getNextSibling:function(t){if(typeof this.nextSibling==wi[184]&&(this.nextSibling=this.data.readElementNextSibling(this.elementType,this)),!this.nextSibling&&t){var e=this.getParent();if(e)return e.getNextSibling(t)}return this.nextSibling},getPreviousSibling:function(){return this.previousSibling},getParent:function(){return this.parent},getFirstChild:function(){return typeof this.firstChild==wi[184]&&(this.firstChild=this.data.readElementFirstChild(this.elementType,this)),this.firstChild},update:function(){},checkTime:function(){for(var t=Number.MAX_VALUE,e=Number.MIN_VALUE,i=this.getFirstChild();i;i=i.getNextSibling())i.Start&&(t=Math.min(t,i.Start.valueOf())),i.Finish&&(e=Math.max(e,i.Finish.valueOf()));t==Number.MAX_VALUE?this.setProperty(wi[149],this.Start):(this.setProperty(wi[148],new Date(t)),this.setProperty(wi[149],new Date(Math.max(t,e))))},getPredecessorLinks:function(){return this.linksRead||(this.data.readTaskLinks(this),this.linksRead=!0),this.PredecessorLinks},getSuccessorLinks:function(){return this.linksRead||(this.data.readTaskLinks(this),this.linksRead=!0),this.SuccessorLinks},getPredecessorTasks:function(){for(var t=[],e=this.getPredecessorLinks(),i=0;i<e.length;i++)t.push(e[i].getPredecessorTask());return t},getSuccessorTasks:function(){for(var t=[],e=this.getSuccessorLinks(),i=0;i<e.length;i++)t.push(e[i].getSuccessorTask());return t},getAssignments:function(){return this.Summary?[]:(this.assignmentsRead||(this.data.readTaskAssignments(this),this.assignmentsRead=!0),this.Assignments)},addPredecessorLink:function(t,e){var i=this.data.addLink(this,t,e);if(i)return e&&i.setProperty(wi[147],e),i},addSuccessorLink:function(t,e){var i=this.data.addLink(t,this,e);if(i)return e&&i.setProperty(wi[147],e),i},addAssignment:function(t,e){var i=this.data.addAssignment(this,t,e);if(i)return e&&i.setProperty(wi[146],e),i}}),vt.prototype=new pt,t(vt.prototype,{getPredecessorTask:function(){return this.PredecessorTask},getSuccessorTask:function(){return this.SuccessorTask}}),yt.prototype=new pt,t(yt.prototype,{getTask:function(){return this.task?this.task:this.data.getTaskByUid(this.TaskUID)},getResource:function(){return this.resource?this.resource:this.data.getResourceByUid(this.ResourceUID)}}),wt.prototype=new ft,t(wt.prototype,{getAssignments:function(){return this.assignmentsRead||(this.data.readResourceAssignments(this),this.assignmentsRead=!0),this.Assignments},addAssignment:function(t,e){var i=this.data.addAssignment(t,this);if(i)return e&&i.setProperty(wi[146],e),i}}),t(St,{read:Tt,write:Ct,init:kt,getType:bt,TimeRead:xt,TimeWrite:Et,StringRead:Dt,StringWrite:Ft,IntRead:Lt,IntWrite:Pt,Bool2IntRead:It,Bool2IntWrite:Nt,FloatRead:Mt,FloatWrite:Ot}),t(zt.prototype,{initialize:function(){},remove:function(){},depose:function(){if(this.listeners)for(var t;t=this.listeners.pop();)E(t)},getCalendar:function(){return J(wi[183])},readRootTask:function(){},readTaskFirstChild:function(){},readTaskNextSibling:function(){},readRootResource:function(){},readResourceFirstChild:function(){},readResourceNextSibling:function(){},readTaskFirstLink:function(){},readTaskNextLink:function(){},readTaskFirstAssignment:function(){},readTaskNextAssignment:function(){},readResourceFirstAssignment:function(){},readResourceNextAssignment:function(){},updateTask:function(){},addTask:function(){return new mt},deleteTask:function(){},moveTask:function(){},updateResource:function(){},addResource:function(){return new wt},deleteResource:function(){},moveResource:function(){},updateLink:function(){},addLink:function(){return new vt},deleteLink:function(){},updateAssignment:function(){},addAssignment:function(){return new yt},deleteAssignment:function(){}}),Ht.prototype=new zt,t(Ht.prototype,{initialize:function(){zt.prototype.initialize.apply(this,arguments)},getConfig:function(){return this.config},getXml:function(){return this.doc},readCalendar:function(t){for(var e=new Array(7),i=[],s=B(t,"WeekDays"),a=s.firstChild;a;a=a.nextSibling)if("WeekDay"==a.nodeName){var r=parseInt(V(B(a,"DayType"))),o=(parseInt(V(B(a,"DayWorking"))),this.getCalendarTime(B(a,"WorkingTimes")));r?e[r-1]=o:i.push([n(V(B(a,"TimePeriod/FromDate"))),n(V(B(a,"TimePeriod/ToDate"))),o])}return new K(tt(e,i))},getCalendarTime:function(t){var e=[];if(!t)return e;for(var i=t.firstChild;i;i=i.nextSibling)"WorkingTime"==i.nodeName&&e.push([this.getMinutes(V(B(i,"FromTime"))),this.getMinutes(V(B(i,"ToTime")))]);return e},getMinutes:function(t){var e=new RegExp("^([0-9]+):([0-9]+):([0-9]+)$"),i=e.exec(t);return 60*parseInt(i[1],10)+parseInt(i[2],10)+parseInt(i[3],10)/60},addDefaultProperty:function(){var t=St.types;this.addTaskProperty("UID",0,t.String),this.addTaskProperty(wi[151],0,t.Bool2Int),this.addTaskProperty("ID",0,t.Int),this.addTaskProperty(wi[145],0,t.String),this.addTaskProperty(wi[144],0,t.Int),this.addTaskProperty(wi[148],0,t.Time),this.addTaskProperty(wi[149],0,t.Time),this.addTaskProperty("Name",0,t.String),this.addTaskProperty(wi[143],0,t.Bool2Int),this.addTaskProperty(wi[142],0,t.Int),this.addTaskProperty(wi[141],0,t.String),this.addTaskProperty(wi[140],0,t.Int),this.addTaskProperty(wi[139],0,t.Time),this.addTaskProperty(wi[138],0,t.Time),this.addTaskProperty(wi[137],0,t.Time),this.addTaskProperty("Hyperlink",0,t.String),this.addTaskProperty("HyperlinkAddress",0,t.String),this.addTaskProperty(wi[136],0,t.String),this.addTaskProperty(wi[135],0,t.Bool2Int),this.addTaskProperty(wi[134],0,t.Int),this.addTaskProperty(wi[133],0,t.Bool2Int),this.addTaskProperty(wi[132],"Baseline/Start",t.Time),this.addTaskProperty(wi[131],"Baseline/Finish",t.Time),this.addResourceProperty("UID",0,t.String),this.addResourceProperty(wi[151],0,t.Bool2Int),this.addResourceProperty(wi[135],0,t.Bool2Int),this.addResourceProperty("Name",0,t.String),this.addResourceProperty("ID",0,t.Int),this.addResourceProperty(wi[145],0,t.String),this.addResourceProperty(wi[144],0,t.Int),this.addResourceProperty(wi[143],0,t.Bool2Int),this.addResourceProperty(wi[141],0,t.String),this.addLinkProperty("UID",0,t.String),this.addLinkProperty(wi[130],0,t.String),this.addLinkProperty(wi[129],0,t.String),this.addLinkProperty(wi[147],0,t.Int),this.addAssignmentProperty("UID",0,t.String),this.addAssignmentProperty(wi[128],0,t.String),this.addAssignmentProperty(wi[127],0,t.String),this.addAssignmentProperty(wi[146],0,t.Float)},addTaskProperty:function(t,e,i){e=e?e:t;var n={proName:t,tagName:e,type:i};if(this.taskReader[e]=n,this.taskWriter[t]=n,e.indexOf("/")>0){var s=e.split("/")[0];this.taskReader[s]||(this.taskReader[s]=[]),this.taskReader[s].push(n)}},addResourceProperty:function(t,e,i){e=e?e:t;var n={proName:t,tagName:e,type:i};this.resourceReader[e]=n,this.resourceWriter[t]=n},addLinkProperty:function(t,e,i){e=e?e:t;var n={proName:t,tagName:e,type:i};this.linkReader[e]=n,this.linkWriter[t]=n},addAssignmentProperty:function(t,e,i){e=e?e:t;var n={proName:t,tagName:e,type:i};this.assignmentReader[e]=n,this.assignmentWriter[t]=n},addExtendedAttributes:function(t){this.extendedAttributes||(this.extendedAttributes={});for(var e,i,n=t.firstChild;n;n=n.nextSibling)switch(n.nodeName){case wi[126]:case"FieldName":i=V(n)}this.extendedAttributes[e]={FieldID:e,FieldName:i}},readTask:function(t){if(!t)return null;var e=new mt;e.node=t;for(var i=this.taskReader,n=t.firstChild;n;n=n.nextSibling)switch(n.nodeName){case wi[125]:for(var s=n.firstChild;s;s=s.nextSibling){var a,r;switch(s.nodeName){case wi[126]:a=V(s);break;case"Value":r=V(s)}}e[a]=r;break;default:var o=i[n.nodeName];if(o)if(o.length){for(var s=n.firstChild;s;s=s.nextSibling)if(0!=s.nodeName.indexOf("#")){var l=i[n.nodeName+"/"+s.nodeName];l&&(e[l.proName]=Tt.apply(l.type,[s]))}}else e[o.proName]=Tt.apply(o.type,[n])}return this.taskCount++,e.OutlineNumber&&(e.OutlineLevel||(e.OutlineLevel="0"==e.OutlineNumber?0:e.OutlineNumber.split(".").length),e.OriginalLevel=e.OutlineLevel),e},readResource:function(t){if(!t)return null;var e=new wt;e.node=t;for(var i=this.resourceReader,n=t.firstChild;n;n=n.nextSibling){var s=i[n.nodeName];s&&(e[s.proName]=Tt.apply(s.type,[n]))}return e.OutlineNumber&&(e.OutlineLevel||(e.OutlineLevel="0"==e.OutlineNumber?0:e.OutlineNumber.split(".").length),e.OriginalLevel=e.OutlineLevel),e},readLink:function(t){if(!t)return null;var e=new vt;e.node=t;for(var i=this.linkReader,n=t.firstChild;n;n=n.nextSibling){var s=i[n.nodeName];s&&(e[s.proName]=Tt.apply(s.type,[n]))}return e},readAssignment:function(t){if(!t)return null;var e=new yt;e.node=t;for(var i=this.assignmentReader,n=t.firstChild;n;n=n.nextSibling){var s=i[n.nodeName];s&&(e[s.proName]=Tt.apply(s.type,[n]))}return e},readTaskLink:function(t,e){if(!e)return null;var i=this.readLink(e);return i[e.nodeName==wi[124]?wi[123]:wi[122]]=t,i},readTaskAssignment:function(t,e){if(!e)return null;var i=this.readAssignment(e);return i.task=t,i},readResourceAssignment:function(t,e){if(!e)return null;var i=this.readAssignment(e);return i.resource=t,i},updateItem:function(t,e,i,n){var s=t[i];if(s){var a=B(e.node,s.tagName);if(!a)for(var r=s.tagName.split("/"),o=e.node,l=0;l<r.length;l++)r[l]&&(a=B(o,r[l]),a||(a=o.ownerDocument.createElement(r[l]),o.appendChild(a)),o=a);Ct.apply(s.type,[a,n])}if(!t[i]&&this.extendedAttributes&&this.extendedAttributes[i]){for(var h=e.node.firstChild;h;h=h.nextSibling)if(h.nodeName==wi[125]){var d=B(h,wi[126]);if(d&&V(d)==i){var u=B(h,"Value");return u||(u=h.ownerDocument.createElement("Value"),h.appendChild(u)),void Ct.apply(St.types.String,[u,n])}}var h=e.node.ownerDocument.createElement(wi[125]),d=h.ownerDocument.createElement(wi[126]);Ct.apply(St.types.String,[d,i]),h.appendChild(d);var u=h.ownerDocument.createElement("Value");Ct.apply(St.types.String,[u,n]),h.appendChild(u)}},updateTask:function(t,e,i){this.saveChange&&this.updateItem(this.taskWriter,t,e,i)},updateLink:function(t,e,i){this.saveChange&&this.updateItem(this.linkWriter,t,e,i)},updateResource:function(t,e,i){this.saveChange&&this.updateItem(this.resourceWriter,t,e,i)},updateAssignment:function(t,e,i){this.saveChange&&this.updateItem(this.assignmentWriter,t,e,i)}}),Rt.prototype=new Ht,t(Rt.prototype,{initialize:function(){Ht.prototype.initialize.apply(this,arguments)},loadUrl:function(t){function e(t){i=t}var i;return _(t,e,!1),i},getCalendar:function(){var t,e=B(this.doc.documentElement,wi[120]);if(e){t=V(e);for(var i=B(this.doc.documentElement,"Calendars"),n=i.firstChild;n;n=n.nextSibling)if("Calendar"==n.nodeName&&V(B(n,"UID"))==t)return this.readCalendar(n)}return J(wi[183])},readRootTask:function(){var t=B(this.doc.documentElement,wi[169]);if(!t){var e=this.addTask();return e}return this.readTask(t)},readTaskFirstChild:function(t){if(!t.node)return null;if(t.node.getAttribute(wi[119])){var e=this.loadUrl(t.node.getAttribute(wi[119]));t.node.removeAttribute(wi[119]);var i=B(t.node,wi[118]);for(i||(i=t.node.ownerDocument.createElement(wi[118]),t.node.appendChild(i));e.documentElement.firstChild;){var n=e.documentElement.firstChild;e.documentElement.removeChild(n),i.appendChild(n)}}return this.readTask(B(t.node,"Tasks/Task"))},readTaskNextSibling:function(t){if(!t.node)return null;if(t.node.getAttribute(wi[117])){var e=this.loadUrl(t.node.getAttribute(wi[117]));t.node.removeAttribute(wi[117]);for(var i=B(t.getParentTask().node,wi[118]);e.documentElement.firstChild;){var n=e.documentElement.firstChild;e.documentElement.removeChild(n),i.appendChild(n)}}return this.readTask(U(t.node.nextSibling,wi[169]))},readRootResource:function(){var t=B(this.doc.documentElement,wi[168]);if(!t){var e=this.addResource();return e}return this.readResource(t)},readResourceFirstChild:function(t){
if(!t.node)return null;if(t.node.getAttribute(wi[119])){var e=this.loadUrl(t.node.getAttribute(wi[119]));t.node.removeAttribute(wi[119]);var i=B(t.node,wi[116]);for(i||(i=t.node.ownerDocument.createElement(wi[116]),t.node.appendChild(i));e.documentElement.firstChild;){var n=e.documentElement.firstChild;e.documentElement.removeChild(n),i.appendChild(n)}}return this.readResource(B(t.node,"Resources/Resource"))},readResourceNextSibling:function(t){if(!t.node)return null;if(t.node.getAttribute(wi[117])){var e=this.loadUrl(t.node.getAttribute(wi[117]));t.node.removeAttribute(wi[117]);for(var i=B(t.getParentResource().node,wi[116]);e.documentElement.firstChild;){var n=e.documentElement.firstChild;e.documentElement.removeChild(n),i.appendChild(n)}}return this.readResource(U(t.node.nextSibling,wi[168]))},readTaskFirstLink:function(t){var e,i=t.node;if(!i)return null;for(e=i.firstChild;e&&(e.nodeName!=wi[124]&&e.nodeName!=wi[115]);e=e.nextSibling);return null==e&&(e=B(i,"Links/*")),this.readTaskLink(t,e)},readTaskNextLink:function(t,e){var i,n=e.node;if(!n)return null;for(i=n.nextSibling;i&&(i.nodeName!=wi[124]&&i.nodeName!=wi[115]);i=i.nextSibling);return i||"Links"==n.parentNode.nodeName||(i=B(n,wi[114])),this.readTaskLink(t,i)},readTaskFirstAssignment:function(t){return t.node?this.readTaskAssignment(t,B(t.node,wi[113])):null},readTaskNextAssignment:function(t,e){return e.node?this.readTaskAssignment(t,U(e.node.nextSibling,wi[166])):null},readResourceFirstAssignment:function(t){return t.node?this.readTaskAssignment(t,B(t.node,wi[113])):null},readResourceNextAssignment:function(t,e){return e.node?this.readTaskAssignment(t,U(e.node.nextSibling,wi[166])):null},insertNode:function(t,e,i,n){if(e){var s=B(e.node,n);s||(s=e.node.ownerDocument.createElement(n),e.node.appendChild(s)),i?i.node.nextSibling?s.insertBefore(t,i.node.nextSibling):s.appendChild(t):s.insertBefore(t,s.firstChild)}else this.doc.documentElement.appendChild(t)},addTask:function(t,e){var i=new mt;if(this.saveChange){var n=t.node.ownerDocument.createElement(wi[169]);this.insertNode(n,t,e,wi[118]),i.node=n}return i},deleteTask:function(t){this.saveChange&&t.node.parentNode.removeChild(t.node)},moveTask:function(t,e,i){this.saveChange&&(t.node.parentNode.removeChild(t.node),this.insertNode(t.node,e,i,wi[118]))},addResource:function(t,e){var i=new wt;if(this.saveChange){var n=t.node.ownerDocument.createElement(wi[168]);this.insertNode(n,t,e,wi[116]),i.node=n}return i},deleteResource:function(t){this.saveChange&&t.node.parentNode.removeChild(t.node)},moveResource:function(t,e,i){this.saveChange&&(t.node.parentNode.removeChild(t.node),this.insertNode(t.node,e,i,wi[116]))},addLink:function(t,e,i){var n=new vt;if(this.saveChange){var s=t.node.ownerDocument,a=s.createElement(wi[124]),r=s.createElement(wi[130]);W(r,e.UID),a.appendChild(r);var r=s.createElement(wi[147]);W(r,i),a.appendChild(r),n.node=a,n.setProperty(wi[147],i);var o=t.node.selectSingleNode("Links");o||(o=t.node.ownerDocument.createElement("Links"),t.node.appendChild(o)),o.appendChild(a)}return n},deleteLink:function(t){this.saveChange&&t.node.parentNode.removeChild(t.node)},addAssignment:function(t,e,i){var n=new yt;if(this.saveChange){var s=this.doc,a=s.createElement(wi[166]),r=s.createElement(wi[128]);W(r,t.UID),a.appendChild(r);var r=s.createElement(wi[127]);W(r,e.UID),a.appendChild(r);var r=s.createElement(wi[146]);W(r,i),a.appendChild(r),n.node=a;var o=t.node.selectSingleNode(wi[112]);o||(o=t.node.ownerDocument.createElement(wi[112]),t.node.appendChild(o)),o.appendChild(a)}return n},deleteAssignment:function(t){this.saveChange&&t.node.parentNode.removeChild(t.node)}}),At.prototype=new Ht,t(At.prototype,{initialize:function(){Ht.prototype.initialize.apply(this,arguments)},loadXml:function(t){t&&(this.doc=t),t=this.doc,t||(this.doc=t=j()),t.documentElement||t.appendChild(t.createElement("Project"));for(var e=this.doc.documentElement,i=e.firstChild;i;){switch(i.nodeName){case wi[118]:this.tasksNode=i;break;case wi[116]:this.resourcesNode=i;break;case wi[112]:this.assignmentsNode=i;break;case"ExtendedAttributes":this.addExtendedAttributes(i)}i=i.nextSibling}this.loaded=!0},getCalendar:function(){var t,e=B(this.doc.documentElement,wi[120]);if(e){t=V(e);for(var i=B(this.doc.documentElement,"Calendars"),n=i.firstChild;n;n=n.nextSibling)if("Calendar"==n.nodeName&&V(B(n,"UID"))==t)return this.readCalendar(n)}return J(wi[183])},getTasksNode:function(){return this.loaded||this.loadXml(),this.tasksNode||(this.tasksNode=this.doc.createElement(wi[118]),this.doc.documentElement.appendChild(this.tasksNode)),this.tasksNode},getResourcesNode:function(){return this.loaded||this.loadXml(),this.resourcesNode||(this.resourcesNode=this.doc.createElement(wi[116]),this.doc.documentElement.appendChild(this.resourcesNode)),this.resourcesNode},getAssignmentsNode:function(){return this.loaded||this.loadXml(),this.assignmentsNode||(this.assignmentsNode=this.doc.createElement(wi[112]),this.doc.documentElement.appendChild(this.assignmentsNode)),this.assignmentsNode},readRootTask:function(){var t=U(this.getTasksNode().firstChild,wi[169]);if(!t){var e=this.addTask();return e}return this.readTask(t)},readTaskFirstChild:function(t){if(!t.node)return null;var e=t.OriginalLevel,i=U(t.node.nextSibling,wi[169]);if(i){var n=B(i,wi[144])?V(B(i,wi[144])):V(B(i,wi[145])).split(".").length;if(n>e)return this.readTask(i)}return null},readTaskNextSibling:function(t){if(!t.node)return null;for(var e=t.OriginalLevel,i=t.node.nextSibling;i;i=i.nextSibling)if(i.nodeName==wi[169]){var n=B(i,wi[144])?V(B(i,wi[144])):V(B(i,wi[145])).split(".").length;if(!(n>e)){if(n==e)return this.readTask(i);break}}return null},readRootResource:function(){var t=this.getResourcesNode().firstChild;if(!t){var e=this.addResource("0");return e}return this.readResource(t)},readResourceFirstChild:function(t){return t.node?t.node!=U(this.getResourcesNode().firstChild,wi[168])?null:this.readResource(U(t.node.nextSibling,wi[168])):null},readResourceNextSibling:function(t){return t.node?t.node==U(this.getResourcesNode().firstChild,wi[168])?null:this.readResource(U(t.node.nextSibling,wi[168])):null},readTaskFirstLink:function(t){var e,i=t.node;if(!i)return null;for(e=i.firstChild;e&&(e.nodeName!=wi[124]&&e.nodeName!=wi[115]);e=e.nextSibling);return null==e&&(e=B(i,"Links/*")),this.readTaskLink(t,e)},readTaskNextLink:function(t,e){var i,n=e.node;if(!n)return null;for(i=n.nextSibling;i&&(i.nodeName!=wi[124]&&i.nodeName!=wi[115]);i=i.nextSibling);return i||"Links"==n.parentNode.nodeName||(i=B(n,wi[114])),this.readTaskLink(t,i)},readTaskFirstAssignment:function(t){for(var e=t.UID,i=this.getAssignmentsNode().firstChild;i;i=i.nextSibling)if(i.nodeName==wi[166]&&V(B(i,wi[128]))==e)return this.readTaskAssignment(t,i);return null},readTaskNextAssignment:function(t,e){if(!e.node)return null;for(var i=t.UID,n=e.node.nextSibling;n;n=n.nextSibling)if(n.nodeName==wi[166]&&V(B(n,wi[128]))==i)return this.readTaskAssignment(t,n);return null},readResourceFirstAssignment:function(t){for(var e=t.UID,i=this.getAssignmentsNode().firstChild;i;i=i.nextSibling)if(i.nodeName==wi[166]&&V(B(i,wi[127]))==e)return this.readResourceAssignment(t,i);return null},readResourceNextAssignment:function(t,e){if(!e.node)return null;for(var i=t.UID,n=e.node.nextSibling;n;n=n.nextSibling)if(n.nodeName==wi[166]&&V(B(n,wi[127]))==i)return this.readResourceAssignment(t,n);return null},addTask:function(t,e){var i=new mt;if(this.saveChange){var n=this.getTasksNode(),s=n.ownerDocument.createElement(wi[169]);if(t){var a=e?e.node:t.node;a.nextSibling?n.insertBefore(s,a.nextSibling):n.appendChild(s)}else n.insertBefore(s,n.firstChild);i.node=s}return i},deleteTask:function(t){this.saveChange&&t.node.parentNode.removeChild(t.node)},addResource:function(t,e){var i=new wt;if(this.saveChange){var n=this.getResourcesNode(),s=n.ownerDocument.createElement(wi[168]),a=e?e.node:t.node;a.nextSibling?n.insertBefore(s,a.nextSibling):n.appendChild(s),i.node=s}return i},deleteResource:function(t){this.saveChange&&t.node.parentNode.removeChild(t.node)},addLink:function(t,e,i){var n=new vt;if(this.saveChange){var s=t.node.ownerDocument,a=s.createElement(wi[124]),r=s.createElement(wi[130]);if(W(r,e.UID),a.appendChild(r),n.node=a,i){var r=s.createElement(wi[147]);W(r,i),a.appendChild(r),n.setProperty(wi[147],i)}t.node.appendChild(a)}return n},deleteLink:function(t){this.saveChange&&t.node.parentNode.removeChild(t.node)},addAssignment:function(t,e,i){var n=new yt;if(this.saveChange){var s=this.doc,a=s.createElement(wi[166]),r=s.createElement(wi[128]);W(r,t.UID),a.appendChild(r);var r=s.createElement(wi[127]);if(W(r,e.UID),a.appendChild(r),i){var r=s.createElement(wi[146]);W(r,i),a.appendChild(r),n.setProperty(wi[146],i)}n.node=a,this.getAssignmentsNode().appendChild(a)}return n},deleteAssignment:function(t){this.saveChange&&t.node.parentNode.removeChild(t.node)}}),t(_t.prototype,{initialize:function(){},remove:function(){},depose:function(){this.remove()}}),jt.prototype=new _t,t(jt.prototype,{initialize:function(t){return t.autoCalculateTime?(this.listeners=[C(t,wi[111],this,this.onTaskChange),C(t,wi[110],this,this.onTaskDelete),C(t,wi[109],this,this.onTaskMove)],!0):!1},onTaskChange:function(t,e,i){(e==wi[148]||e==wi[149])&&t.getParentTask()&&t.getParentTask().checkTime()},onTaskDelete:function(t,e){e&&e.checkTime()},onTaskMove:function(t,e){e&&e.checkTime(),t.getParentTask()&&t.getParentTask().checkTime()}}),Bt.prototype=new _t,t(Bt.prototype,{initialize:function(t){this.listeners=[];for(var e=t.getModules(),i=e.length-1;i>=0;i--)if(t[wi[156]+e[i]]){var n=e[i].toLowerCase();this.listeners=this.listeners.concat([C(t,n+wi[160],this,this.onElementRegister),C(t,wi[152]+n+"add",this,this.onElementAdd),C(t,wi[152]+n+wi[157],this,this.onElementDelete),C(t,wi[152]+n+wi[153],this,this.onElementMove)])}},setOutline:function(t,e){var i=t.getParent(),n="0",s=0;i&&(n=0==i.OutlineLevel?""+t.getSiblingIndex():i.OutlineNumber+"."+t.getSiblingIndex(),s=i.OutlineLevel+1);var a=n!=t[wi[145]];if(t.setProperty(wi[145],n),t.setProperty(wi[144],s),e&&a&&t.Summary)for(var r=t.getFirstChild();r;r=r.getNextSibling())this.setOutline(r,!0)},onElementRegister:function(t){this.setOutline(t,!1)},onElementAdd:function(t){for(var e=t;e;e=e.getNextSibling())this.setOutline(e,!0)},onElementDelete:function(t,e,i){if(e)for(var n=i?i.getNextSibling():e.getFirstChild();n;n=n.getNextSibling())this.setOutline(n,!0)},onElementMove:function(t,e,i){if(e)for(var n=i?i.getNextSibling():e.getFirstChild();n;n=n.getNextSibling())this.setOutline(n,!0);for(var n=t;n;n=n.getNextSibling())this.setOutline(n,!0)}}),Vt.prototype=new _t,t(Vt.prototype,{initialize:function(t){this.listeners=[];for(var e=t.getModules(),i=e.length-1;i>=0;i--)if(t[wi[156]+e[i]]){var n=e[i].toLowerCase();this.listeners=this.listeners.concat([C(t,n+wi[160],this,this.onElementRegister),C(t,wi[152]+n+"add",this,this.onElementAdd),C(t,wi[152]+n+wi[157],this,this.onElementDelete),C(t,wi[152]+n+wi[153],this,this.onElementMove)])}},setID:function(t){var e=t.getParent()?t.getPrevious().ID+1:0;return e!=t.ID?(t.setProperty("ID",e),!0):!1},onElementRegister:function(t){this.setID(t)},onElementAdd:function(t){for(var e=t.getNext();e&&this.setID(e);e=e.getNext());},onElementDelete:function(t,e,i){if(e)for(var n=i?i.getNext():e.getNext();n&&this.setID(n);n=n.getNext());},onElementMove:function(t,e,i){var n=[t];for(e&&n.push(i?i.getNext():e.getNext()),n.sort(function(t,e){return t&&e?t.data.compareElement(t,e):0});n.length>0;)for(var s=n.pop();s&&this.setID(s);s=s.getNext());}}),Wt.prototype=new _t,t(Wt.prototype,{initialize:function(t){if(t.ignoreReadOnly)return!1;this.listeners=[];var e=t.getModules();this.ignoreFields={};for(var i=e.length-1;i>=0;i--){var n=e[i].toLowerCase(),s=t[n+"ReadonlyIgnoreProperty"];this.ignoreFields[n]=s?s.split(","):[],this.listeners=this.listeners.concat([C(t,wi[158]+n+wi[150],this,this.onElementChange),C(t,wi[158]+n+wi[157],this,this.onElementAction),C(t,wi[158]+n+wi[153],this,this.onElementAction)])}return!0},onElementChange:function(t,e,i){h(this.ignoreFields[e.elementType.toLowerCase()],i)||e[wi[143]]&&(t.returnValue=!1)},onElementAction:function(t,e){e[wi[143]]&&(t.returnValue=!1)}}),Gt.prototype=new _t,t(Gt.prototype,{initialize:function(t){this.start(t)},start:function(t){this.stop(),this.listeners=[C(t,wi[108],this,this.onTaskAdd),C(t,wi[110],this,this.onTaskDelete),C(t,wi[109],this,this.onTaskMove),C(t,wi[111],this,this.onTaskChange),C(t,wi[164],this,this.onLinkAdd),C(t,"afterlinkdelete",this,this.onLinkDelete),C(t,wi[107],this,this.onLinkChange)]},clear:function(){t(this,{newTasks:[],updateTasks:[],moveTasks:[],deleteTasks:[],newLinks:[],updateLinks:[],deleteLinks:[]})},getXml:function(){var t=j(),e=t.createElement("Log");t.appendChild(e);var i=this.newTasks;if(i&&i.length>0)for(var n=this.addNode(e,"AddTasks"),s=0;s<i.length;s++){var a=i[s];if(a.task.data){var r=this.addNode(n,wi[169]);this.addPropertyNode(r,a.task,["UID"]),this.addPropertyNode(r,a.task,a.fields),a.task.getParentTask()&&this.addNode(r,"ParentUID",a.task.getParentTask().UID),a.task.getPreviousSibling()&&this.addNode(r,wi[106],a.task.getPreviousSibling().UID)}}var i=this.updateTasks;if(i&&i.length>0)for(var n=this.addNode(e,"UpdateTasks"),s=0;s<i.length;s++){var a=i[s];if(a.task.data){var r=this.addNode(n,wi[169]);this.addPropertyNode(r,a.task,["UID"]),this.addPropertyNode(r,a.task,a.fields)}}var i=this.moveTasks;if(i&&i.length>0)for(var n=this.addNode(e,"MoveTasks"),s=0;s<i.length;s++){var a=i[s];if(a.task.data){var r=this.addNode(n,wi[169]);this.addPropertyNode(r,a.task,["UID"]),a.task.getParentTask()&&this.addNode(r,"ParentUID",a.task.getParentTask().UID),a.task.getPreviousSibling()&&this.addNode(r,wi[106],a.task.getPreviousSibling().UID)}}var i=this.deleteTasks;if(i&&i.length>0)for(var n=this.addNode(e,"DeleteTasks"),s=0;s<i.length;s++){var a=i[s],r=this.addNode(n,wi[169]);this.addPropertyNode(r,a.task,["UID"])}var i=this.newLinks;if(i&&i.length>0)for(var n=this.addNode(e,"AddLinks"),s=0;s<i.length;s++){var a=i[s];if(a.link.data){var r=this.addNode(n,wi[167]);this.addPropertyNode(r,a.link,["UID",wi[147]]),this.addPropertyNode(r,a.link,a.fields),a.link.getPredecessorTask()&&this.addNode(r,wi[130],a.link.getPredecessorTask().UID),a.link.getSuccessorTask()&&this.addNode(r,wi[129],a.link.getSuccessorTask().UID)}}var i=this.updateLinks;if(i&&i.length>0)for(var n=this.addNode(e,"UpdateLinks"),s=0;s<i.length;s++){var a=i[s];if(a.link.data){var r=this.addNode(n,wi[167]);this.addPropertyNode(r,a.link,["UID"]),a.link.getPredecessorTask()&&this.addNode(r,wi[130],a.link.getPredecessorTask().UID),a.link.getSuccessorTask()&&this.addNode(r,wi[129],a.link.getSuccessorTask().UID),this.addPropertyNode(r,a.link,a.fields)}}var i=this.deleteLinks;if(i&&i.length>0)for(var n=this.addNode(e,"DeleteLinks"),s=0;s<i.length;s++){var a=i[s],r=this.addNode(n,wi[167]);this.addPropertyNode(r,a.link,["UID"])}return t},setTaskFields:function(t){this.taskFields=typeof t==wi[187]?t.split(","):t},onTaskAdd:function(t){var e=h(this.deleteTasks,t,function(t,e){return t.task==e});if(e)return void d(this.deleteTasks,e);e=h(this.moveTasks,t,function(t,e){return t.task==e}),e&&d(this.moveTasks,e);var i=[];e=h(this.updateTasks,t,function(t,e){return t.task==e}),e&&(d(this.updateTasks,e),i=e.fields),this.newTasks.push({task:t,fields:i})},onTaskDelete:function(t){var e=h(this.newTasks,t,function(t,e){return t.task==e});return e?void d(this.newTasks,e):(e=h(this.moveTasks,t,function(t,e){return t.task==e}),e&&d(this.moveTasks,e),e=h(this.updateTasks,t,function(t,e){return t.task==e}),e&&d(this.updateTasks,e),void this.deleteTasks.push({task:t}))},onTaskMove:function(t,e,i){h(this.deleteTasks,t,function(t,e){return t.task==e})||h(this.newTasks,t,function(t,e){return t.task==e})||h(this.moveTasks,t,function(t,e){return t.task==e})||this.moveTasks.push({task:t})},onTaskChange:function(t,e,i){if(!h(this.deleteTasks,t,function(t,e){return t.task==e})&&h(this.taskFields,e)){var n=h(this.newTasks,t,function(t,e){return t.task==e});n||(n=h(this.updateTasks,t,function(t,e){return t.task==e})),n||this.updateTasks.push(n={task:t,fields:[]}),h(n.fields,e)||n.fields.push(e)}},setLinkFields:function(t){this.linkFields=typeof t==wi[187]?t.split(","):t},onLinkAdd:function(t){var e=h(this.deleteLinks,t,function(t,e){return t.link==e});if(e)return void d(this.deleteLinks,e);var i=[];e=h(this.updateLinks,t,function(t,e){return t.link==e}),e&&(d(this.updateLinks,e),i=e.fields),this.newLinks.push({link:t,fields:i})},onLinkDelete:function(t){var e=h(this.newLinks,t,function(t,e){return t.link==e});return e?void d(this.newLinks,e):(e=h(this.updateLinks,t,function(t,e){return t.link==e}),e&&d(this.updateLinks,e),void this.deleteLinks.push({link:t}))},onLinkChange:function(t,e,i){if(!h(this.deleteLinks,t,function(t,e){return t.link==e})&&h(this.linkFields,e)){var n=h(this.newLinks,t,function(t,e){return t.link==e});n||(n=h(this.updateLinks,t,function(t,e){return t.link==e})),n||this.updateLinks.push(n={link:t,fields:[]}),h(n.fields,e)||n.fields.push(e)}},addNode:function(t,e,i){var n=t.ownerDocument.createElement(e);return null!=i&&n.appendChild(t.ownerDocument.createTextNode(this.pack(i))),t.appendChild(n),n},addPropertyNode:function(t,e,i){i=i?i:["UID"];for(var n=i.length-1;n>=0;n--)this.addNode(t,i[n],e[i[n]])},stop:function(){if(this.listeners)for(var t;t=this.listeners.pop();)E(t)},pack:function(t){switch(typeof t){case"boolean":return t?"1":"0";case wi[190]:if(t.constructor==Date)return a(t,"s")}return t.toString()},depose:function(){this.stop(),this.clear();for(var t in this)this[t]=null}}),t(Ut.prototype,{initContainer:function(){var e=this.container;this.container=e=typeof e==wi[190]?e:document.getElementById(e);var i,n=this.container.ownerDocument;try{n.execCommand("BackgroundImageCache",!1,!0)}catch(s){}var a=this.container.style;for(a.position!=wi[178]&&(a.position=wi[104]),t(a,{padding:"0px",margin:"0px",textAlign:wi[103],overflow:wi[102],backgroundColor:this.bodyBgColor,fontSize:this.fontSize+"px"});i=e.firstChild;)e.removeChild(i)},addControl:function(t){return t?(t.added=!0,t.initialize(this,this.containerFragment?this.containerFragment:this.container)?(this.controls.push(t),!0):!1):void 0},removeControl:function(t){t&&(t.remove(),t.added=!1,d(t))},initialize:function(){!this.loaded&&this.data&&(this.loaded=!0,L(this,wi[101]))},getContainer:function(){return this.container},setViewSize:function(t){var e=this.viewSize;if(!e||e[0]!=t[0]||e[1]!=t[1]){var i={returnValue:!0};return L(this,wi[100],[i,t]),i.returnValue?(this.viewSize=t,L(this,wi[99],[t]),!0):!1}},getViewSize:function(){return this.viewSize},setData:function(t){this.data=t,$(t,this.config.getConfigObj("SFData")),this.loaded||this.initialize()},getData:function(){return this.data},depose:function(){for(var t=this.controls,e=t.length-1;e>=0;e--)this.removeControl(t[e]);k(this.container,!0)}}),t(Xt.prototype,{initialize:function(){return!1},remove:function(){var t,e=this.listeners;if(e)for(;t=e.pop();)E(t);k(this.div),delete this.listeners,delete this.gantt},isUsing:function(){return!!this.added},depose:function(){this.remove(),D(this);for(var t in this)this[t]=null}}),t(Yt.prototype,{showHead:function(t){var e=window._SFGantt_config.SFGlobal;return a(t,this.format,e)},getFloorTime:function(t){switch(this.unit){case"Minute":var e=t.getMinutes()%this.number;return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()-e);case"Hour":var e=t.getHours()%this.number;return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()-e);case"Dat":var e=(t.valueOf()-60*t.getTimezoneOffset()*1e3)%(24*this.number*60*60*1e3);return new Date(t.valueOf()-e);case"Day":var e=t.getDay()%this.number,i=new Date(t.valueOf()-24*e*60*60*1e3);return new Date(i.getFullYear(),i.getMonth(),i.getDate());case"Week":var e=t.getDay(),i=new Date(t.valueOf()-24*e*60*60*1e3);return new Date(i.getFullYear(),i.getMonth(),i.getDate());case wi[98]:var e=t.getMonth()%this.number;return new Date(t.getFullYear(),t.getMonth()-e);case"Year":var e=t.getFullYear()%this.number;return new Date(t.getFullYear()-e);default:return t}},getNextTime:function(t){switch(this.unit){case"Minute":return new Date(t.valueOf()+60*this.number*1e3);case"Hour":return new Date(t.valueOf()+60*this.number*60*1e3);case"Dat":case"Day":return new Date(t.valueOf()+24*this.number*60*60*1e3);case"Week":return new Date(t.valueOf()+7*this.number*24*60*60*1e3);case wi[98]:var e=t.getFullYear(),i=t.getMonth()+this.number;return 12==i&&(e++,i=0),new Date(e,i);case"Year":var e=t.getFullYear()+this.number,n=new Date(0);return n.setYear(e),n;default:return t}}}),t($t.prototype,{getIndex:function(){return this.index},setIndex:function(t){this.index=parseInt(t)},getText:function(){return this.text},setText:function(t){this.text=t},setIcon:function(t){this.icon=t}}),Zt.prototype=new Xt,t(Zt.prototype,{initialize:function(t){var e=t.getContainer().style;return e.width&&e.width.indexOf("%")<0&&e.height&&e.height.indexOf("%")<0?!1:(this.gantt=t,this.listeners=[C(t.getContainer(),wi[97],this,this.onResize),C(window,wi[97],this,this.onResize),C(window,wi[153],this,this.onResize),C(window,"load",this,this.onResize)],!0)},onResize:function(){this.timeout||(this.timeout=window.setInterval(m(this,this.onTime),256)),this.changed=!0,this.idleTimes=0},onTime:function(){return this.changed?(this.changed=!1,void this.resize()):(this.idleTimes++,void(this.idleTimes>4&&(window.clearInterval(this.timeout),delete this.timeout)))},resize:function(){var t=this.gantt;t.setViewSize(c(t.getContainer())),this.timeout=null}}),Qt.prototype=new Xt,t(Qt.prototype,{initialize:function(t,e){return this.listeners=[C(this.gantt=t,wi[96],this,this.onChange)],!0},onChange:function(t){this.timeout||(this.timeout=window.setInterval(m(this,this.onTime),64)),this.changed=!0,this.idleTimes=0,this.bodyHeight=t[1]},onTime:function(){return this.changed?(this.changed=!1,void this.setBodyHeight()):(this.idleTimes++,void(this.idleTimes>16&&(window.clearInterval(this.timeout),delete this.timeout)))},setBodyHeight:function(){var t=this.gantt.getLayout(wi[95]);t&&(t.style.height=this.bodyHeight+100+"px")},remove:function(){this.timeout&&window.clearInterval(this.timeout),Xt.prototype.remove.apply(this,arguments)}}),qt.prototype=new Xt,t(qt.prototype,{initialize:function(e){if(!e.getLayout||!e.getCalList)return!1;var i=e.getLayout("mapHead"),n=e.container.ownerDocument;if(!i)return!1;$(this,e.config.getConfigObj("SFGanttCalDiv"));var s=this.div=n.createElement("div");O(s),t(this,{gantt:e,div:s,container:i,cals:{}}),t(s.style,{position:wi[178],padding:"0px",margin:"0px"});for(var a=0;a<this.calNum;a++){var r=n.createElement("div");t(r.style,{position:wi[178],padding:"0px",margin:"0px",left:"0px"}),s.appendChild(r)}return i.appendChild(s),this.listeners=[C(e,wi[101],this,this.onResize),C(e,wi[94],this,this.onResize),C(e,wi[93],this,this.showCal),C(e,wi[153],this,this.showCal)],this.onResize(),!0},onResize:function(){var e=(this.gantt,this.div),i=e.parentNode,n=this.size,s=[i.offsetWidth,i.offsetHeight];if(!n||n[1]!=s[1])for(var a=this.calNum,r=s[1],o=0;a>o;o++)t(e.childNodes[o].style,{top:Math.floor(r*o/a)+"px",height:Math.floor(r/a)+"px"});this.size=s,this.showCal()},showCal:function(){var t=this.gantt,e=t.getStartTime(),i=t.getScale(),n=t.getCalList();if(e&&i&&n){e=e.valueOf(),this.moveTo(i,e);for(var s=this.gantt.getCalList(),a=this.div.childNodes,r=0;r<this.calNum;r++)this.showCalItem(i,e,s[r],a[this.calNum-r-1],r)}},showCalItem:function(e,i,n,s,a){var r=this.cals[a];if(r&&r.cal==n){if(r.scale!=e){for(var o=s.firstChild;o;o=o.nextSibling)t(o.style,{left:(o.sTime-r.start)/e+"px",width:(o.eTime-o.sTime)/e+"px"});s.style.left=(r.start-this.drawStart)/e+"px",r.scale=e}}else this.clearItem(a),this.cals[a]=r={start:i,cal:n,scale:e},s.style.left=(i-this.drawStart)/e+"px";var l=i+this.container.offsetWidth*e,h=s.firstChild?s.firstChild.sTime:Number.MAX_VALUE,d=s.lastChild?s.lastChild.eTime:Number.MIN_VALUE;if(i>(s.firstChild?s.firstChild.eTime:Number.MAX_VALUE)){for(;s.firstChild&&s.firstChild.eTime<i;)k(s.firstChild);h=s.firstChild?s.firstChild.sTime:Number.MAX_VALUE}if((s.lastChild?s.lastChild.sTime:Number.MIN_VALUE)>l){for(;s.lastChild&&s.lastChild.sTime>l;)k(s.lastChild);d=s.lastChild?s.lastChild.eTime:Number.MIN_VALUE}h>i&&(this.addTimeSpans(i,Math.min(h,l),r,s,-1),h=s.firstChild?s.firstChild.sTime:Number.MAX_VALUE,d=s.lastChild?s.lastChild.eTime:Number.MIN_VALUE),l>d&&this.addTimeSpans(Math.max(d,i),l,r,s,1)},addTimeSpans:function(e,i,n,s,a){for(var r=n.cal,o=parseInt(r.getFloorTime(new Date(e)).valueOf()),l=null;i>o;){var h=parseInt(r.getNextTime(new Date(o)).valueOf()),d=s.ownerDocument.createElement("div");t(d,{sTime:o,eTime:h});var u=Math.floor(this.size[1]/this.calNum)-1;t(d.style,{position:wi[178],left:(o-n.start)/n.scale+"px",top:"0px",width:(h-o)/n.scale+"px",height:u,fontSize:Math.floor(.8*u)+"px",padding:"0px",lineHeight:u+"px",borderRight:wi[92]+this.gantt.borderColor,borderBottom:wi[92]+this.gantt.borderColor,textAlign:wi[91]}),d.innerHTML=r.showHead(new Date(o)),-1==a?null==l?s.insertBefore(d,s.firstChild):null==l.nextSibling?s.appendChild(d):s.insertBefore(d,l.nextSibling):s.appendChild(d),l=d,o=h}},clear:function(){for(var t=0;t<this.calNum;t++)this.clearItem(t)},clearItem:function(t){k(this.div.childNodes[this.calNum-t-1],!0),delete this.cals[t]},moveTo:function(t,e){this.drawStart||(this.drawStart=e);var i=parseInt((this.drawStart-e)/t);if(Math.abs(i)>1e4){this.drawStart=e;for(var n=this.calNum,s=0;n>s;s++)if(this.cals[s]){var a=parseInt((this.cals[s].start-this.drawStart)/t);if(Math.abs(a)>1e4){this.cals[s].start=this.drawStart;for(var r=this.div.childNodes[s].firstChild;r;r=r.nextSibling)r.style.left=parseInt(r.style.left+i)+"px";a=0}this.div.childNodes[s].style.left=a+"px"}i=0}this.div.style.left=i+"px"}}),Kt.prototype=new Xt,t(Kt.prototype,{initialize:function(e){this.gantt=e;var i=e.config.getConfig("SFGanttCalendarItem/formats"),n={Minute15:new Yt("Minute",15,i.Minute15),Hour:new Yt("Hour",1,i.Hour),Hour2:new Yt("Hour",2,i.Hour2),Hour6:new Yt("Hour",6,i.Hour6),Dat:new Yt("Dat",1,i.Dat),Dat1:new Yt("Dat",1,i.Dat1),Day:new Yt("Day",1,i.Day),Day3:new Yt("Dat",3,i.Day3),Day7:new Yt("Day",7,i.Day7),Week:new Yt("Week",1,i.Week),Month:new Yt(wi[98],1,i.Month),Month1:new Yt(wi[98],1,i.Month1),Quarter:new Yt(wi[98],3,i.Quarter),Quarter1:new Yt(wi[98],3,i.Quarter1),Quarter2:new Yt(wi[98],6,i.Quarter2),Year:new Yt("Year",1,i.Year),Year1:new Yt("Year",1,i.Year1),Year5:new Yt("Year",5,i.Year5),Year10:new Yt("Year",10,i.Year10)};return this.levels=[{scale:3e4,cals:[n.Minute15,n.Hour,n.Dat]},{scale:3e5,cals:[n.Hour2,n.Dat,n.Week]},{scale:6e5,cals:[n.Hour6,n.Dat,n.Week]},{scale:24e5,cals:[n.Day,n.Week,n.Month]},{scale:72e5,cals:[n.Day3,n.Month,n.Quarter]},{scale:144e5,cals:[n.Day7,n.Month,n.Year]},{scale:576e5,cals:[n.Month1,n.Quarter,n.Year]},{scale:1152e5,cals:[n.Month1,n.Year,n.Year]},{scale:3456e5,cals:[n.Quarter1,n.Year,n.Year5]},{scale:10368e5,cals:[n.Quarter2,n.Year1,n.Year10]}],t(e,{getCalList:m(this,this.getCalList)}),this.listeners=[C(e,wi[101],this,this.onScaleChange),C(e,wi[93],this,this.onScaleChange)],this.onScaleChange(),!0},getCalList:function(){return this.calList},onScaleChange:function(){var t,e=this.gantt.getScale(),i=this.levels;if(e){for(t=i.length-1;t>=0;t--)if(e>i[t].scale){t++;break}t=Math.min(Math.max(t,0),i.length-1),this.calList=i[t].cals}},remove:function(){var t=this.gantt;delete t.getCalList,Xt.prototype.remove.apply(this,arguments)}}),Jt.prototype=new Xt,t(Jt.prototype,{initialize:function(t){return t.disableChangeEvent?!1:(this.listeners=[C(this.gantt=t,wi[101],this,this.onGanttInit)],!0)},onGanttInit:function(){var t=this.gantt;this.listeners=this.listeners.concat([C(t.getData(),wi[152]+t.elementType.toLowerCase()+wi[161],this,this.onElementUpdate)])},onElementUpdate:function(t,e,i,n){var s,a;(a=this.changedElements)||(a=this.changedElements=[]),(s=h(a,t,function(t,e){return t.element==e}))?h(s.fields,e)||s.fields.push(e):a.push({element:t,fields:[e]}),this.eut||(this.eut=window.setInterval(m(this,this.onTime),256)),this.changed=!0,this.idleTimes=0},onTime:function(){return this.changed?(this.changed=!1,void this.triggerUpdate()):(this.idleTimes++,void(this.idleTimes>4&&(window.clearInterval(this.eut),delete this.eut)))},triggerUpdate:function(){for(var t,e=this.changedElements;t=e.pop();)this.onElementChange(t.element,t.fields)},onElementChange:function(t,e){var i=this.gantt;L(this.gantt,i.elementType.toLowerCase()+wi[150],[t,e])}}),te.prototype=new Xt,t(te.prototype,{initialize:function(e,i){if(!e.getLayout||e.disableCollapse||!e.getLayout(wi[90])||!e.getLayout(wi[95])||e.spaceWidth<4)return!1;var n=this.width=e.spaceWidth,s=e.container.ownerDocument,a=this.div=s.createElement("div");t(a.style,{position:wi[178],zIndex:200,top:"0px",width:n+"px",height:wi[89],backgroundColor:e.columnBarColor,borderLeft:wi[92]+e.borderColor,borderRight:wi[92]+e.borderColor}),o(a,wi[88]);var r=this.listColImg=s.createElement("img");t(r.style,{position:wi[178],zIndex:200,top:n+"px",left:(n-4)/2+"px",width:"4px",height:"7px"}),o(r,wi[189]),Q(r,e.imgPath+"column_left"+e.imgType),a.appendChild(r);var r=this.mapColImg=s.createElement("img");return t(r.style,{position:wi[178],zIndex:200,top:n+10+"px",left:(n-4)/2+"px",width:"4px",height:"7px"}),o(r,wi[189]),Q(r,e.imgPath+"column_right"+e.imgType),a.appendChild(r),e.setContextMenu&&e.setContextMenu(a,function(t){return t.type=wi[87],!0}),i.appendChild(a),this.gantt=e,this.listeners=[C(a,wi[182],this,this.onMouseDown),C(e,wi[94],this,this.onLayoutChange)],!0},onLayoutChange:function(){var t=this.gantt,e=t.getLayout(wi[90]),i=t.getLayout(wi[95]),n=P(e,t.getContainer()),s=P(i,t.getContainer()),a=Math.max(n[0],s[0]);(!t.isListShow()&&a==n[0]||!t.isChartShow()&&a==s[0])&&(a=P(e.parentNode,t.getContainer())[0]+e.parentNode.offsetWidth),this.div.style.left=a-this.width+"px",Q(this.listColImg,t.imgPath+"column_"+(0==e.offsetWidth?wi[86]:wi[103])+t.imgType),Q(this.mapColImg,t.imgPath+"column_"+(0==i.offsetWidth?wi[103]:wi[86])+t.imgType)},onMouseDown:function(t){return 1==M(t)?(S(t),this.dragObj&&this.onMouseUp(t),t.target==this.listColImg?void this.gantt.collapseList():t.target==this.mapColImg?void this.gantt.collapseMap():void new it(this.div,m(this,this.onMove),{container:this.gantt.getContainer()}).onMouseDown(t)):void 0},onMove:function(t,e,i){i==wi[179]&&(this.startColumn=1*this.gantt.listWidth);var n=this.startColumn+e[0]-t[0];this.div.style.left=n+this.gantt.idCellWidth+"px","end"==i&&this.gantt.setListWidth(n)}}),ee.prototype=new Xt,t(ee.prototype,{initialize:function(t){return t.disableCursor?!1:(this.gantt=t,t.setCursor=m(t,ie),!0)},remove:function(){var t=this.gantt;delete t.setCursor,delete this.gantt}}),t(ee,{setCursor:ie}),ne.prototype=new Xt,t(ne.prototype,{initialize:function(e,i){if(e.disableDragResize)return!1;var n=this.div=e.container.ownerDocument.createElement("img");return Q(n,e.imgPath+wi[97]+e.imgType),t(n.style,{position:wi[178],width:"16px",height:"16px",right:"0px",bottom:"0px",zIndex:200}),o(n,"se-resize"),this.listeners=[nt(n,m(this,this.onMove),{container:e.getContainer()})],i.appendChild(n),this.gantt=e,!0},onMove:function(e,i,n){var s=this.gantt;if(n==wi[179])return void(this.startSize=s.getViewSize());var a=[this.startSize[0]+i[0]-e[0],this.startSize[1]+i[1]-e[1]];s.setViewSize(a)&&t(s.getContainer().style,{width:a[0]+"px",height:a[1]+"px"})}}),se.prototype=new Xt,t(se.prototype,{initialize:function(t){if(t.disableDragZoom||!t.getLayout)return!1;var e=t.getLayout("mapHead");return e?(o(e,wi[88]),this.gantt=t,this.container=e,this.listeners=[nt(e,m(this,this.onMove),{interval:32})],!0):!1},onMove:function(t,e,i){if(i==wi[179]&&(this.startScale=this.gantt.getScale()),e[0]>1){var n=this.startScale*t[0]/e[0];this.gantt.setScale(n)}}}),ae.prototype=new Xt,t(ae.prototype,{initialize:function(e){if(!e.getLayout)return!1;
var i=this.container=e.getLayout(this.mainList?"listId":wi[90]),n=e.container.ownerDocument;if(!i)return!1;this.gantt=e,this.elementStyles=e.config.getConfigObj("SFGantt/"+e.elementType.toLowerCase()+"Style"),$(this,e.config.getConfigObj("SFGanttElementList")),ae.listIndex||(ae.listIndex=0),this.proTag="listRow_"+ae.listIndex++;var s=this.div=n.createElement(wi[85]);t(s,{bgColor:e.borderColor,border:0,cellSpacing:1,cellPadding:0}),t(s.style,{fontSize:"0px",position:wi[104],left:"-2px",top:"-3px",tableLayout:"fixed",zIndex:100}),O(s);var a=s.insertRow(-1),r=this.bgColor;r=r?r:wi[84],t(a,{bgColor:r});var o=0,l=this.fields=_e(e.elementType,this.fieldNames),h=a.insertCell(-1);t(h,{width:1});var d=document.compatMode?"nowrap":"pre";t(h.style,{overflowX:wi[102],fontSize:"0px",whiteSpace:d});var u=n.createElement("div");t(u.style,{position:wi[104],left:"-1px",width:"1px"}),h.appendChild(u);for(var c=0;c<l.length;c++){h=a.insertCell(-1),t(h.style,{overflow:wi[102],fontSize:"0px",whiteSpace:d});var g=l[c].width;o+=g+1,t(h,{width:g})}var a=s.insertRow(-1);t(a,{bgColor:r});var h=a.insertCell(-1);t(h,{height:1*(e.itemHeight-1)}),t(h.style,{overflow:wi[102],whiteSpace:d});for(var c=0;c<this.fields.length;c++)h=a.insertCell(-1),t(h.style,{overflow:wi[102],whiteSpace:d});s.width=o+3,this.container.appendChild(s);var p=this.elementType.toLowerCase(),f=this.listeners=[C(e,wi[97],this,this.onResize),C(e,p+"inview",this,this.drawElement),C(e,p+"outview",this,this.clearElement),C(e,p+wi[150],this,this.updateElement),C(s,wi[83],this,this.onTableClick),C(s,wi[82],this,this.onTableDblClick)];return e.setContextMenu&&e.setContextMenu(s,function(t){return t.type=wi[81],!0}),f.push(C(s,wi[182],this,this.onTableMouseDown)),this.mainList?this.disableAdjustLineHeight||e.inline||f.push(C(s,wi[181],this,this.onTableMouseOver)):(f.push(C(e,wi[80],this,this.onHeadMove)),f.push(C(e,wi[79],this,this.onHeadResize))),(this.disableDragOrder||e.inline)&&(this.mainList=null),e.setCursor&&e.setCursor(s,this.mainList?wi[78]:"fieldedit.cur,default"),this.onResize(),!0},setViewTop:function(){var t=this.gantt.getViewTop();this.div.rows[0].cells[0].firstChild.style.height=t+1+"px"},onResize:function(){var t=this.div.rows,e=this.gantt;t[t.length-1].height=Math.max(e.itemHeight,e.viewSize[1]-e.headHeight-e.footHeight)-1},applyRowStyle:function(e,i){var n=i.ClassName;n=n?n:this.elementStyle;var s=this.elementStyles[n];if(s){var a=i.Selected?s.listSelectedStyle:s.listStyle;if(a)return void t(e.style,a)}var r=this.gantt,a=this.mainList?i.Selected?{backgroundColor:r.listFocusColor}:{backgroundColor:this.gantt.idCellBgColor}:i.Selected?{backgroundColor:r.listFocusColor}:{backgroundColor:wi[84]};t(e.style,a)},drawElement:function(e,i){0==i&&this.setViewTop();var n=this.gantt,s=n.getElementDrawObj(e),a=s.height,r=this.div.insertRow(i+1);(n.getElementHeight(e)<=0&&(!(n.hideSummary&&n.inline&&e.Summary&&e.getFirstChild())||e.getFirstChild().Summary)||n.hideSummary&&n.inline&&!e.Summary&&e.getParent()&&e.getParent().getFirstChild()==e)&&(r.style.display=wi[173]),0==a&&(a=n.itemHeight);var o=!0;n.hideSummary&&n.inline&&!e.Summary&&e.getParent()&&(o=!1),this.applyRowStyle(r,e);var l=r.insertCell(-1),h=document.compatMode?"nowrap":"pre";t(l,{height:1*(a-1),width:1}),l.style.cssText="overflow:hidden;white-space:"+h+";font-size:0px;",s[this.proTag]=r,o&&(r._Element=e);for(var d=this.container.ownerDocument,u=this.fields,c=n.fontSize,g=0;g<u.length;g++){var l=d.createElement("td"),p=[];if(p.push("overflow:hidden"),p.push("white-space:"+h),p.push("font-size:"+c+"px"),e.Summary&&p.push("font-weight:bolder"),l.style.cssText=p.join(";"),o)u[g].showBody(l,e,this);else{l.vAlign="top";var f=document.createElement("div");t(f.style,{width:wi[89],position:wi[104],top:"-1px",backgroundColor:wi[84],height:"1px",fontSize:"0px",overflow:wi[102]}),l.appendChild(f)}r.appendChild(l)}},clearElement:function(t,e){0==e&&this.setViewTop(),this.clearInputCell();var i=this.gantt.getElementDrawObj(t);k(i[this.proTag]),i[this.proTag]=null},clearInputCell:function(){if(this.focusObj&&this.focusObj.inputCell>=0){var t=this.focusObj.element,e=this.fields[this.focusObj.inputCell],i=this.gantt.getElementDrawObj(t),n=i[this.proTag].cells;e.showBody(n[this.focusObj.inputCell+1],t,this),this.focusObj.inputCell=-1}},onHeadMove:function(t){this.div.style.left=t+"px"},onHeadResize:function(t){for(var e=this.div,i=e.rows[0].cells,n=0,s=0;s<t.length;s++)i[s+1].width=t[s],n+=t[s]+1;e.width=n+3},getEventRow:function(t){for(var e,i=t.target,n=i;n&&("TR"==n.nodeName&&(e=n),n!=this.div);)n=n.parentNode;return e&&e._Element?e:void 0},onTableMouseOver:function(t){var e=this.getEventRow(t);if(!e){var i=I(t,this.div)[1];for(e=this.div.rows[0];e&&(i-=e.offsetHeight,!(0>i));e=e.nextSibling);if(!e||!e._Element)return}var n=e._Element,s=this.gantt,a=3,i=N(t,e)[1];if(a>i||i>=s.getElementHeight(n)-a-1){var r=a>i?n.getPreviousView():n;if(r&&r.canSetProperty(wi[134]))return s.setCursor&&s.setCursor(this.div,"heightChange.cur,default"),void(this.dragMode=wi[77])}s.setCursor&&s.setCursor(this.div,n.Selected?wi[76]:wi[78]),this.dragMode=""},onTableMouseDown:function(t){var e=this.getEventRow(t);if(e){var i=e._Element;if(L(this.gantt,this.elementType.toLowerCase()+wi[182],[i,t]),1==M(t)&&this.mainList){if(this.dragMode==wi[77]&&I(t,e)[1]<3){if(i=i.getPreviousView(),!i)return;e=this.gantt.getElementDrawObj(i)[this.proTag]}this.dragElement=i,new it(e,m(this,this.dragMode==wi[77]?this.onItemHeightMove:this.onTableMove)).onMouseDown(t)}}},onItemHeightMove:function(t,e,i){var n=this.dragElement,s=this.gantt;if(i==wi[179])return void(this.startHeight=s.getElementHeight(n));var a=s.getElementDrawObj(n)[this.proTag].cells[0],r=Math.max(this.startHeight+e[1]-t[1],10);"end"!=i?a.height=r-1:(a.height=this.startHeight-1,this.startHeight!=r&&n.setProperty(wi[134],r))},onTableMove:function(t,e,i){if("end"!=i){for(var n=e[1]>t[1],s=this.gantt,a=this.dragElement,r=n?e[1]-s.getElementHeight(a):e[1];a;){var o=n?a.getNextView():a.getPreviousView();if(!o)break;var l=s.getElementHeight(o);if(!(o&&o!=this.gantt.data.getRootElement(this.elementType)&&(n?r-l/2:r+l/2)*(n?1:-1)>0))break;a=o,r=n?r-l:r+l}this.dragDir=n,this.flagElement=a,this.mainList.showElementMoveFlag(a,this.dragElement,this.dragDir)}else this.flagElement&&this.flagElement!=this.dragElement&&this.moveElement(this.dragElement,this.flagElement,this.dragDir),this.mainList.showElementMoveFlag(this.dragElement,this.dragElement)},showElementMoveFlag:function(e,i,n){if(this.flagDiv){if(e==this.flagElement)return;k(this.flagDiv),this.flagDiv=null,this.flagElement=e}if(e&&!i.contains(e)){var s=this.gantt,a=P(s.getElementDrawObj(e)[this.proTag],this.container)[1],r=this.container.ownerDocument;a=n?a+s.getElementHeight(e)-14:a-14;var o=r.createElement(wi[85]);o.cellSpacing=0,t(o.style,{position:wi[178],width:wi[89],zIndex:200,height:"21px",left:"3px",top:a+"px"});var l=o.insertRow(-1),h=l.insertCell(-1);h.width=3;var d=r.createElement("img");t(d.style,{width:"3px",height:"21px"}),Q(d,this.gantt.imgPath+"dragflag_left"+this.gantt.imgType),h.appendChild(d);var h=l.insertCell(-1);Q(h,this.gantt.imgPath+"dragflag_right"+this.gantt.imgType),this.container.appendChild(o),this.flagDiv=o}},moveElement:function(t,e,i){var n,s=null,a=null;if(i){var r=e.getNextView();!r||r.getOutlineLevel()<e.getOutlineLevel()?s=e:a=r}else{var n=e.getPreviousView();!n||n.getOutlineLevel()<=e.getOutlineLevel()?a=e:s=n}var o=this.gantt.data;s?o.moveElement(t.elementType,t,s.getParent(),s):o.moveElement(t.elementType,t,a.getParent(),a.getPreviousSibling())},updateElement:function(t,e){var i=this.gantt;if(t!=i.getData().getRootElement(this.elementType)){var n=i.getElementDrawObj(t),s=n[this.proTag];if(s){if(h(e,wi[75])){var a=t.Selected;!a&&this.focusObj&&this.focusObj.element==t&&this.clearInputCell(),this.applyRowStyle(s,t),this.mainList&&i.setCursor&&i.setCursor(s,a?wi[76]:wi[78])}h(e,wi[136])&&this.applyRowStyle(s,t);for(var r=0;r<this.fields.length;r++)if(this.fields[r].checkUpdate(e)){var o=s.cells[r+1];k(o,!0);var l=o.style;l.fontSize=i.fontSize+"px",this.fields[r].showBody(o,t,this)}if(h(e,wi[151]))for(var r=0;r<this.fields.length;r++)s.cells[r+1].style.fontWeight=t.Summary?"bolder":""}}},onTableDblClick:function(t){var e=this.getEventRow(t);if(e){var i,n,s=e._Element,a=I(t,e)[0],r=this.fields;for(n=0;n<r.length;n++)if(a-=r[n].width,0>a){i=r[n];break}L(this.gantt,this.elementType.toLowerCase()+wi[82],[s,wi[81],i.Name])}},onTableClick:function(t){var e=this.getEventRow(t),i=this.gantt;if(!e)return void(i.clearSelectedElement&&i.clearSelectedElement());var n=e._Element;if(L(i,this.elementType.toLowerCase()+wi[83],[n,t]),!i.readOnly&&!i.disableUpdateElement&&!this.disableInput){var s,a=I(t,e)[0],r=this.fields;for(s=0;s<r.length&&(a-=r[s].width,!(0>a));s++);if(s==r.length)return;var o=r[s];this.clearInputCell(),!o.inputFunc||o.ReadOnly||o.inputData&&!n.canSetProperty(o.inputData)||(this.focusObj={inputCell:s,element:n},o.showInput(i.getElementDrawObj(n)[this.proTag].cells[s+1],n,this))}}}),re.prototype=new Xt,t(re.prototype,{initialize:function(e,i){if(e.disableSelect)return!1;this.gantt=e;var n=e.elementType;return t(e,{getFocusElement:e["getFocus"+n]=m(this,this.getFocusElement),getSelectedElements:e[wi[74]+n+"s"]=m(this,this.getSelectedElements),setSelectedElement:e[wi[73]+n]=m(this,this.setSelectedElement),clearSelectedElement:e[wi[72]+n]=m(this,this.clearSelectedElement)}),this.listeners=[C(e,n.toLowerCase()+wi[182],this,this.onElementClick),C(e,wi[101],this,this.onGanttInit)],!0},onGanttInit:function(){var t=this.gantt,e=t.getData(),i=t.elementType.toLowerCase();this.listeners=this.listeners.concat([C(e,i+wi[160],this,this.onRegister),C(e,i+wi[159],this,this.onUnRegister),C(e,wi[152]+i+wi[150],this,this.onElementChange)])},onRegister:function(t){t.Selected&&this.selectedElements.push(t)},onUnRegister:function(t){t.Selected&&d(this.selectedElements,t)},onElementClick:function(t,e){if(e&&2!=M(e)){var i=this.selectedElements;if(e.shiftKey&&i[0]){for(var n=i[i.length-1],s=this.gantt.data.compareElement(n,t)>0,a=n;a;)if(a=s?a.getNextView():a.getPreviousView(),a&&a.setProperty(wi[75],!0),a==t)return}else e.ctrlKey?t.setProperty(wi[75],!t.Selected):(this.clearSelectedElement(),t.setProperty(wi[75],!0))}else t.Selected||(this.clearSelectedElement(),t.setProperty(wi[75],!0))},onElementChange:function(t,e,i){if(e==wi[75]){var n=this.gantt.elementType.toLowerCase();L(this.gantt,n+(i?"focus":"blur"),[t]),i?this.selectedElements.push(t):d(this.selectedElements,t)}},getFocusElement:function(){return this.selectedElements[this.selectedElements.length-1]},getSelectedElements:function(){return this.selectedElements},setSelectedElement:function(t){(!this.selectedElements||this.selectedElements[0]!=t||this.selectedElements[1])&&(this.clearSelectedElement(),t.setProperty(wi[75],!0))},clearSelectedElement:function(){for(var t,e=this.selectedElements;t=e.pop();)t.setProperty(wi[75],!1)},remove:function(){var t=this.gantt;delete t.getFocusElement,delete t.getSelectedElements,delete t.setSelectedElement,delete t.clearSelectedElement;var e=t.elementType;delete t["getFocus"+e],delete t[wi[74]+e+"s"],delete t[wi[73]+e],delete t[wi[72]+e],this.selectedElements=[],Xt.prototype.remove.apply(this,arguments)}}),oe.prototype=new Xt,t(oe.prototype,{initialize:function(e){if(!e.getLayout)return!1;var i=e.getLayout("listHead"),n=e.container.ownerDocument;if(!i)return!1;var s=this.fields=_e(e.elementType,this.fieldNames),a=n.createElement(wi[85]);t(this,{container:i,gantt:e,div:a,fieldIndex:-1}),t(a,{bgColor:e.borderColor,border:0,cellSpacing:1,cellPadding:0}),t(a.style,{fontSize:"0px",height:e.headHeight+2+"px",left:"-2px",top:"-1px",position:wi[104],tableLayout:"fixed"});var r=this.div.insertRow(-1);t(r,{bgColor:e.headBgColor});var o=r.insertCell(-1);o.width=1,this.widths=[];for(var l=0;l<s.length;l++){o=r.insertCell(-1),o.vAlign="top";var h=1*s[l].width;t(o.style,{overflow:wi[102],fontSize:e.fontSize+"px",whiteSpace:document.compatMode?"nowrap":"pre"}),s[l].showHead(o,this),this.widths.push(h)}return i.appendChild(this.div),this.listeners=[C(e,wi[101],this,this.setWidth),nt(a,m(this,this.onDrag)),C(a,wi[181],this,this.onMouseMove),C(i,wi[71],this,this.onScroll)],!0},onScroll:function(){L(this.gantt,wi[80],[parseInt(this.div.style.left)])},setWidth:function(){for(var t=this.div,e=t.rows[0].cells,i=0,n=this.widths,s=0;s<n.length;s++)e[s+1].width=n[s],i+=1*n[s]+1;t.width=i+3,L(this.gantt,wi[79],[this.widths])},onMouseMove:function(t){for(var e=-1,i=I(t,this.div)[0]-3,n=this.widths,s=0;s<n.length;s++){if(i-=n[s],Math.abs(i)<5){e=s;break}if(0>i)break}this.fieldIndex=e,o(this.div,0>e?wi[70]:wi[69])},onDrag:function(t,e,i){if(i==wi[179])return o(this.div,wi[69]),this.dragNum=this.fieldIndex,void(this.dragWidth=this.widths[this.fieldIndex]);var n=Math.max(this.dragWidth+e[0]-t[0],20);this.widths[this.dragNum]=n,this.setWidth(),"end"==i&&o(this.div,wi[70])}}),le.prototype=new Xt,t(le.prototype,{initialize:function(e){var i,n=e.container.ownerDocument;if(e.disableHelpLink||!e.getLayout||!(i=e.getLayout("head")))return!1;var s=this.div=n.createElement("div");t(s.style,{position:wi[178],backgroundColor:e.headBgColor,width:"16px",right:"0px",top:"0px",textAlign:wi[86],padding:"3px"});var a=n.createElement("a");return t(a.style,{fontSize:"24px",color:wi[68],textDecoration:wi[173]}),a.appendChild(n.createTextNode("")),t(a,{href:wi[67],target:"_blank"}),s.appendChild(a),i.appendChild(s),!0}}),he.prototype=new Xt,t(he.prototype,{initialize:function(t,e){return this.gantt=t,this.spaceWidth=t.spaceWidth,t.getLayout=m(this,this.getLayout),t.collapseMap=t.collapseChart=m(this,this.collapseChart),t.collapseList=m(this,this.collapseList),t.isListShow=m(this,this.isListShow),t.isChartShow=m(this,this.isChartShow),t.setListWidth=m(this,this.setListWidth),this.createLayout(e),this.listeners=[C(t,wi[101],this,this.onColumnResize),C(t,"heightchange",this,this.onHeightChange),C(t,wi[99],this,this.onGanttResize)],!0},getLayout:function(t){return this.panels[t]},createLayout:function(e){var i=this.gantt,n=this.panels,s=e.ownerDocument,a=1*i.listWidth,r=i.getViewSize()[0]-a-i.idCellWidth;if((0>=a||0>=r)&&(this.spaceWidth=10),i.headHeight>0){var l=n.head=s.createElement("div");if(o(h,wi[70]),O(l),t(l.style,{position:wi[178],zIndex:100,left:"0px",top:"0px",width:wi[89],height:i.headHeight+"px",backgroundColor:i.headBgColor,borderBottom:wi[92]+i.borderColor}),a>0){var h=n.listHead=s.createElement("div");t(h.style,{position:wi[178],top:"0px",left:i.idCellWidth+"px",height:i.headHeight+"px",overflow:wi[102],borderLeft:wi[92]+i.borderColor}),l.appendChild(h)}if(r>0){var d=n.mapHead=s.createElement("div");t(d.style,{position:wi[178],top:"0px",height:i.headHeight+"px",top:"0px",left:"0px",width:wi[89],overflowX:wi[102],borderLeft:wi[92]+i.borderColor,borderRight:wi[92]+i.borderColor}),l.appendChild(d)}e.appendChild(l)}var u=n.bodyScroll=s.createElement("div");t(u.style,{position:wi[178],zIndex:100,overflowY:wi[102],overflowX:wi[102],left:"0px",top:i.headHeight+1+"px",width:wi[89],height:i.getContainer().offsetHeight-i.headHeight-i.footHeight+"px"});var c=n.body=s.createElement("div");if(i.idCellWidth>0){var g=n.listId=s.createElement("div");t(g.style,{position:wi[178],width:i.idCellWidth+"px",overflow:wi[102]}),c.appendChild(g)}if(a>0){var p=n.listBody=s.createElement("div");t(p.style,{position:wi[178],left:i.idCellWidth+"px",overflow:wi[102],borderLeft:wi[92]+i.borderColor,backgroundColor:wi[84]}),c.appendChild(p)}if(r>0){var f=n.mapBody=s.createElement("div");O(f),i.setContextMenu&&i.setContextMenu(f,function(t){return t.type="chart",!0}),t(f.style,{position:wi[178],overflow:wi[102]}),c.appendChild(f)}if(u.appendChild(c),e.appendChild(u),i.footHeight>0){var m=n.foot=s.createElement("div");if(t(m.style,{position:wi[178],zIndex:100,left:"0px",bottom:"0px",width:wi[89],height:i.footHeight+"px",backgroundColor:i.bottomBgColor}),a>0){var v=n.listFoot=s.createElement("div");t(v.style,{position:wi[178],left:"0px",height:wi[89],bottom:"0px",fontSize:"0px",overflow:wi[102]}),m.appendChild(v)}if(r>0){var y=n.mapFoot=s.createElement("div");t(y.style,{position:wi[178],height:wi[89],bottom:"0px",fontSize:"0px",overflow:wi[102]}),m.appendChild(y)}e.appendChild(m)}return!0},onColumnResize:function(){var t,e=this.spaceWidth,i=0,n=this.panels,s=this.gantt,a=s.idCellWidth,r=this.listHidden?wi[173]:"";n.listHead&&(n.listHead.style.display=r),n.listBody&&(n.listBody.style.display=r),n.listFoot&&(n.listFoot.style.display=r);var o=this.mapHidden?wi[173]:"";n.mapHead&&(n.mapHead.style.display=o),n.mapBody&&(n.mapBody.style.display=o),n.mapFoot&&(n.mapFoot.style.display=o),n.listBody&&n.mapBody||(e=0),!n.listBody||this.listHidden?t=0:!n.mapBody||this.mapHidden?t=n.bodyScroll.clientWidth-a-e:(t=1*s.listWidth,t=Math.max(t,10));var l=n.bodyScroll.clientWidth-t-a-e;n.mapBody&&10>l-i&&(t+=l-i-10,l=10+i),this.listHidden||(n.listBody&&(n.listBody.style.width=t+"px"),n.listHead&&(n.listHead.style.width=t+"px"),n.listFoot&&(n.listFoot.style.width=t+a+"px")),this.mapHidden||(n.mapHead&&(n.mapHead.style.left=a+t+e+"px"),n.mapHead&&(n.mapHead.style.width=l-i+"px"),n.mapBody&&(n.mapBody.style.left=t+e+a+"px"),n.mapBody&&(n.mapBody.style.width=l-i+"px"),n.mapFoot&&(n.mapFoot.style.left=t+e+a+"px"),n.mapFoot&&(n.mapFoot.style.width=l-i+"px")),L(s,wi[94])},onGanttResize:function(t){var e=this.gantt;this.panels.bodyScroll.style.height=t[1]-e.headHeight-e.footHeight+"px",this.onColumnResize()},collapseList:function(){!this.listHidden&&this.mapHidden&&this.collapseChart(),this.listHidden=!this.listHidden,this.onColumnResize()},collapseChart:function(){!this.mapHidden&&this.listHidden&&this.collapseList(),this.mapHidden=!this.mapHidden,this.onColumnResize()},isListShow:function(){return!this.listHidden},isChartShow:function(){return!this.mapHidden},setListWidth:function(t){var e=this.gantt;t=Math.max(t,0),t=Math.min(t,this.panels.bodyScroll.clientWidth-e.idCellWidth-10),e.listWidth=t,this.onColumnResize()},onHeightChange:function(t){var e=this.panels,i=t+64+"px";e.mapBody?e.mapBody.style.height=i:e.body&&(e.body.style.height=i)},remove:function(){var t=this.gantt;delete t.getLayout,delete t.collapseMap,delete t.collapseList,delete t.isListShow,delete t.isChartShow,delete t.setListWidth;var e=this.panels;for(var i in e)k(e[i]);this.panels={},Xt.prototype.remove.apply(this,arguments)}}),de.prototype=new Xt,t(de.prototype,{initialize:function(e){if(e.disableLinksMap||!e.getMapPanel)return!1;$(this,e.config.getConfigObj("SFGanttLinksMap")),t(this,{gantt:e,taskHeight:12,arrayPadding:10,linkStyles:e.config.getConfigObj("SFGantt/linkStyle")}),this.taskPadding=e.itemHeight-this.taskHeight;var i=this.div=e.container.ownerDocument.createElement("div");return t(i.style,{position:wi[178],fontSize:"0px",top:"-1px",left:"0px",zIndex:200}),e.getMapPanel().appendChild(i),this.linkNoticeFields=this.linkNoticeFields?We(this.linkNoticeFields.split(",")):null,this.listeners=[C(e,wi[101],this,this.onInit),C(e,wi[93],this,this.onScale),C(e,wi[66],this,this.drawLinks),C(e,wi[65],this,this.clearLinks),C(e,wi[64],this,this.updateLinks),C(e,wi[63],this,this.onScale),C(i,wi[83],this,this.onLinkClick),C(i,wi[82],this,this.onLinkDblClick)],this.linkNoticeFields&&e.setTooltip&&e.setTooltip(i,m(this,this.getTooltip)),!0},onInit:function(){var t=this.gantt.getData();this.listeners=this.listeners.concat([C(t,wi[163],this,this.drawLink),C(t,wi[162],this,this.clearLink),C(t,wi[107],this,this.updateLink),C(t,wi[108],this,this.onScale),C(t,wi[110],this,this.onScale)]),this.refresh()},onScale:function(){var t=this.gantt.getViewElements();if(t){for(var e=0;e<t.length;e++)this.clearLinks(t[e],0);this.changed=!0,this.idleTimes=0,this.gantt.forPrint?this.refresh():this.refreshTimeout||(this.refreshTimeout=window.setInterval(m(this,this.onTime),100))}},onTime:function(){return this.changed?void(this.changed=!1):(this.idleTimes++,void(this.idleTimes>4&&(window.clearInterval(this.refreshTimeout),delete this.refreshTimeout,this.refresh())))},refresh:function(){var t=this.gantt.getViewElements();if(t){this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=null;for(var e=0;e<t.length;e++)this.drawLinks(t[e],e)}},drawLinks:function(t,e){for(var i=t.getPredecessorLinks(),n=0;n<i.length;n++)this.drawLink(i[n],!0);for(var i=t.getSuccessorLinks(),n=0;n<i.length;n++)this.drawLink(i[n],!1)},clearLinks:function(t,e){for(var i=t.getPredecessorLinks(),n=0;n<i.length;n++)this.clearLink(i[n]);for(var i=t.getSuccessorLinks(),n=0;n<i.length;n++)this.clearLink(i[n])},updateLinks:function(t,e){for(var i=!1,n=!1,s=0;s<e.length;s++){var a=e[s];if(a==wi[135]){i=!0;break}n||a!=wi[148]&&a!=wi[149]||(n=!0)}i?this.onScale():n&&(this.clearLinks(t,0),this.drawLinks(t))},updateLink:function(t){this.gantt.getElementDrawObj(t)&&(this.clearLink(t),this.drawLink(t))},drawLink:function(e){if(!this.refreshTimeout){var i=this.gantt,n=e.PredecessorTask,s=e.SuccessorTask,a=i.getScale();if(!i.getElementDrawObj(e).linkImg&&a&&!n.isHidden()&&!s.isHidden()){var r=i.getElementDrawObj(e);if(n.Start&&n.Finish&&s.Start&&s.Finish){var o,l=[i.getMapPanelPosition(n.Start),i.getElementViewTop(n)+2],h=[i.getMapPanelPosition(s.Start),i.getElementViewTop(s)+2];0==i.getElementHeight(n)&&0!=(o=i.getElementHeight(n)-i.getElementDrawObj(n).height)&&(l[1]+=o),0==i.getElementHeight(s)&&0!=(o=i.getElementHeight(s)-i.getElementDrawObj(s).height)&&(h[1]+=o);var d,u=(n.Finish-n.Start)/a,c=(s.Finish-s.Start)/a,g=[9,5],p=i.imgPath+"arrow_blue_$D"+i.imgType,f=[],m={},v={borderStyle:wi[176],borderColor:"blue"},y=e.ClassName;y=y?y:this.linkStyle;var w=this.linkStyles[y];switch(w&&(w.arrayImage&&(p=w.arrayImage),w.lineStyle&&(v=w.lineStyle)),parseInt(e.Type)){case 0:d=wi[103];var S=l[0]+u,T=l[1]+Math.ceil((this.taskHeight+this.taskPadding)/2),C=h[0]+c,k=h[1]+Math.ceil((this.taskHeight+this.taskPadding)/2),b=Math.max(S,C)+this.arrayPadding;f.push([S,T]),f.push([b,T]),f.push([b,k]),f.push([C,k]),t(m,{left:C+"px",top:k-Math.floor(g[0]/2)+"px",width:g[1]+"px",height:g[0]+"px"});break;case 2:d=wi[103];var S=l[0],T=l[1]+Math.ceil((this.taskHeight+this.taskPadding)/2),C=h[0]+c+g[1],k=h[1]+Math.ceil((this.taskHeight+this.taskPadding)/2);f.push([S,T]),f.push([S-this.arrayPadding,T]),f.push([S-this.arrayPadding,h[1]]),f.push([h[0]+c+this.arrayPadding,h[1]]),f.push([h[0]+c+this.arrayPadding,k]),f.push([C,k]),t(m,{left:C-g[1]+"px",top:k-Math.floor(g[0]/2)+"px",width:g[1]+"px",height:g[0]+"px"});break;case 3:d=wi[86];var S=l[0],T=l[1]+Math.ceil((this.taskHeight+this.taskPadding)/2),C=h[0],k=h[1]+Math.ceil((this.taskHeight+this.taskPadding)/2),b=Math.min(S,C)-this.arrayPadding;f.push([S,T]),f.push([b,T]),f.push([b,k]),f.push([C,k]),t(m,{left:C-g[1]+"px",top:k-Math.floor(g[0]/2)+"px",width:g[1]+"px",height:g[0]+"px"});break;case 1:default:var S=l[0]+u,T=l[1]+Math.ceil((this.taskHeight+this.taskPadding)/2);if(n.Finish<=s.Start&&h[1]!=l[1]){d=l[1]>h[1]?"up":"down";var C=h[0];n.Finish.valueOf()==n.Start.valueOf()&&(T-=3);var k=l[1]>h[1]?h[1]+this.taskPadding/2+this.taskHeight:h[1]+this.taskPadding/2-g[1];s.Finish.valueOf()-s.Start.valueOf()==0&&(k-=3),s.Finish.valueOf()-s.Start.valueOf()!=0&&n.Finish.valueOf()!=n.Start.valueOf()&&(C=Math.max(C,S+5)),f.push([S,T]),f.push([C,T]),f.push([C,k]),t(m,{left:C-Math.floor(g[0]/2)-1+"px",top:k+"px",width:g[0]+"px",height:g[1]+"px"})}else{d=wi[86];var C=h[0]-g[1],k=h[1]+(this.taskPadding+this.taskHeight)/2;f.push([S,T]),h[1]!=l[1]&&(f.push([S+this.arrayPadding,T]),f.push([S+this.arrayPadding,h[1]]),f.push([h[0]-this.arrayPadding,h[1]]),f.push([h[0]-this.arrayPadding,k])),f.push([C,k]),t(m,{left:C+"px",top:k-Math.floor(g[0]/2)+"px",width:g[1]+"px",height:g[0]+"px"})}}r.linkPaths=this.getLinkPaths(f,v,e);var x=this.div.ownerDocument.createElement("img");Q(x,p.replace("$D",d)),t(x.style,m),t(x.style,{position:wi[178],fontSize:"0px"}),r.linkImg=x,x._link=e,this.div.appendChild(x)}}}},getLinkPaths:function(e,i,n){for(var s=[],a=this.gantt.container.ownerDocument,r=1;r<e.length;r++){var o=a.createElement("div");t(o.style,i),t(o.style,{position:wi[178],fontSize:"0px",borderWidth:"0px"}),e[r-1][0]==e[r][0]?t(o.style,{borderRightWidth:"1px",height:Math.abs(e[r][1]-e[r-1][1])+"px",width:"0px",left:e[r][0]-1+"px",top:Math.min(e[r][1],e[r-1][1])+"px"}):e[r-1][1]==e[r][1]&&t(o.style,{borderTopWidth:"1px",width:Math.abs(e[r][0]-e[r-1][0])+"px",height:"0px",left:Math.min(e[r][0],e[r-1][0])+"px",top:e[r][1]+"px"}),this.div.appendChild(o),o.aaa="bbb",o._link=n,s.push(o)}return s},clearLink:function(t){var e=this.gantt.getElementDrawObj(t);if(e){if(e.linkImg&&(k(e.linkImg),e.linkImg._link=null,e.linkImg=null),e.linkPaths){for(var i;i=e.linkPaths.pop();)i._link=null,k(i);e.linkPaths=null}this.gantt.removeElementDrawObj(t)}},onLinkClick:function(t){var e=t.target._link;e&&L(this.gantt,"linkclick",[e,t])},onLinkDblClick:function(t){var e=t.target._link;e&&(S(t),L(this.gantt,"linkdblclick",[e]))},getTooltip:function(e,i){var n=i.target._link,s=this.gantt.container.ownerDocument;if(n){if(e.bindObject==n)return!1;var a=s.createElement(wi[85]);a.style.fontSize="12px";var r=a.insertRow(-1),o=r.insertCell(-1);t(o,{align:wi[91],colSpan:2,noWrap:!0}),o.appendChild(s.createTextNode(this.tooltipTitle.link));for(var l=0;l<this.linkNoticeFields.length;l++)r=a.insertRow(-1),o=r.insertCell(-1),t(o,{align:wi[103],noWrap:!0}),this.linkNoticeFields[l].showHead(o),o=r.insertCell(-1),t(o,{align:wi[103],noWrap:!0}),this.linkNoticeFields[l].showBody(o,n,this);return e.bindObject=n,e.setContent(a),!0}},remove:function(){this.onScale(),this.refreshTimeout&&window.clearInterval(this.refreshTimeout),Xt.prototype.remove.apply(this,arguments)},depose:function(){this.delayTimeout&&window.clearTimeout(this.delayTimeout),k(this.div),D(this);for(var t in this)this[t]=null}}),ue.prototype=new Xt,t(ue.prototype,{initialize:function(e){if(!e.getMapPanel)return!1;$(this,e.config.getConfigObj("SFGanttProgressLine")),ue.listIndex||(ue.listIndex=0),this.proTag="progressLine_"+ue.listIndex++,t(this,{gantt:e,taskHeight:12,lineStyle:e.config.getConfigObj("SFGanttProgressLine/lineStyle")}),this.taskPadding=e.itemHeight-this.taskHeight;var i=this.div=e.container.ownerDocument.createElement("div");return t(i.style,{position:wi[178],fontSize:"0px",top:"-1px",left:"0px",zIndex:190}),e.getMapPanel().appendChild(i),this.listeners=[C(e,wi[93],this,this.onScale),C(e,wi[66],this,this.drawLine),C(e,wi[65],this,this.clearLine),C(e,wi[64],this,this.updateLine),C(e,wi[63],this,this.onScale)],this.lineNoticeFields&&e.setTooltip&&e.setTooltip(i,m(this,this.getTooltip)),this.onScale(),!0},getGraphics:function(){for(var t=[ht,ut,at,ot],e=0;e<t.length;e++)if(t[e].isSupport())return new t[e];return new st(!0)},onScale:function(){var t=this.gantt.getViewElements();if(t){for(var e=0;e<t.length;e++)this.clearLine(t[e],0);this.refreshTimeout||(this.refreshTimeout=window.setInterval(m(this,this.onTime),100)),this.changed=!0,this.idleTimes=0}},onTime:function(){return this.changed?void(this.changed=!1):(this.idleTimes++,void(this.idleTimes>4&&(window.clearInterval(this.refreshTimeout),delete this.refreshTimeout,this.refresh())))},refresh:function(){var t=this.gantt.getViewElements();if(t){this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=null;for(var e=0;e<t.length;e++)this.drawLine(t[e],e)}},hasVertex:function(t){return t.Start&&t.Finish&&t.Start<=this.time&&(100!=t.PercentComplete||t.Finish>=this.time)},getVertexTime:function(t){var e=t.PercentComplete?t.PercentComplete:0,i=t.Start.valueOf()+(t.Finish-t.Start)*e/100;switch(this.progressType){case"earlier":i=Math.min(i,this.time);break;case"later":i=Math.max(i,this.time)}return i},drawLine:function(e){if(!this.refreshTimeout){var i=this.gantt,n=i.getScale();if(n){var s=i.getElementDrawObj(e);if(!s[this.proTag]&&this.hasVertex(e)){for(var a=e.getPreviousView();a&&!this.hasVertex(a);)a=a.getPreviousView();var r,o;r=a?[i.getMapPanelPosition(this.getVertexTime(a)),i.getElementViewTop(a)+i.getElementDrawObj(a).height/2]:[i.getMapPanelPosition(this.time),0];var o=[i.getMapPanelPosition(this.getVertexTime(e)),i.getElementViewTop(e)+i.getElementDrawObj(e).height/2],l=this.vertexSize,h=this.div.ownerDocument.createElement("img");Q(h,this.vertexImg?this.vertexImg:i.imgPath+"task_head_4_red"+i.imgType),t(h.style,this.vertexStyle),t(h.style,{position:wi[178],fontSize:"0px",width:l[0]+"px",height:l[1]+"px",left:o[0]-Math.floor(l[0]/2)+"px",top:o[1]-Math.floor(l[1]/2)+"px"}),s[this.proTag]=h,this.div.appendChild(h);var d=this.getGraphics();d.setLineColor(this.lineColor),d.setLineWeight(this.lineWeight),s[this.proTag+"_l"]=d.div;var u={x:Math.min(r[0],o[0]),y:Math.min(r[1],o[1])};d.setPosition(u),d.start({x:0,y:0},1,{x:Math.abs(r[0]-o[0]),y:Math.abs(r[1]-o[1])}),d.moveTo({x:r[0]-u.x,y:r[1]-u.y}),d.lineTo({x:o[0]-u.x,y:o[1]-u.y}),d.finish(),d._task=e,this.div.appendChild(d.div)}}}},clearLine:function(t,e){var i=this.gantt.getElementDrawObj(t);i&&i[this.proTag]&&(k(i[this.proTag]),delete i[this.proTag],k(i[this.proTag+"_l"]),delete i[this.proTag+"_l"])},updateLine:function(t,e){for(var i=!1,n=!1,s=0;s<e.length;s++){var a=e[s];if(a==wi[135]){i=!0;break}n||a!=wi[148]&&a!=wi[149]&&a!=wi[142]||(n=!0)}if(i)this.onScale();else if(n){for(var r=t.getNextView();r&&!this.hasVertex(r);)r=r.getNextView();r&&(this.clearLine(r),this.drawLine(r)),this.clearLine(t),this.drawLine(t)}},remove:function(){this.onScale(),this.refreshTimeout&&window.clearInterval(this.refreshTimeout),delete this.refreshTimeout,k(this.div),Xt.prototype.remove.apply(this,arguments)},depose:function(){for(var t in this)this[t]=null}}),ce.prototype=new Xt,t(ce.prototype,{initialize:function(e,i){if(e.disableListScrollNotice||!e.getLayout)return!1;$(this,e.config.getConfigObj("SFGanttListScrollNotice"));var n=e.elementType;this.fields=this[n.toLowerCase()+"Fields"]?_e(n,this[n.toLowerCase()+"Fields"].split(",")):null,this.gantt=e;var s=this.div=i.ownerDocument.createElement("div");return t(s.style,{position:wi[178],zIndex:400,display:wi[173]}),t(s.style,this.divStyle),i.appendChild(s),this.listeners=[C(e,wi[71],this,this.onScroll),C(e,wi[99],this,this.onResize)],this.onResize(),!0},onScroll:function(t,e){e&&e.spanElements[1]&&(this.timeout||(this.timeout=window.setInterval(m(this,this.onTime),64)),this.scrollObj=e,this.changed=!0,this.idleTimes=0)},onTime:function(){if(!this.changed)return this.idleTimes++,void(this.idleTimes>16&&(this.div.style.display=wi[173],window.clearInterval(this.timeout),delete this.timeout));this.changed=!1;var e=this.scrollObj.spanElements[1],i=this.fields.length,n=this.div.ownerDocument;if(!this.div.firstChild){var s=n.createElement(wi[85]);this.div.appendChild(s),s.width=160,s.style.fontSize="12px";for(var a=0;i>a;a++){var r=s.insertRow(-1),o=r.insertCell(-1);o.width=60,this.fields[a].showHead(o,this);var o=r.insertCell(-1);0==a&&(o.width=100);var l=n.createElement("div");t(l.style,{position:wi[104],overflow:wi[102],width:"100px",height:"14px"}),o.appendChild(l)}}for(var a=0;i>a;a++){var l=this.div.firstChild.rows[a].cells[1].firstChild;k(l,!0),this.fields[a].showBody(l,e,this)}this.div.style.display=""},onResize:function(){t(this.div.style,{right:"30px",top:this.gantt.headHeight+10+"px"})}}),ge.prototype=new Xt,t(ge.prototype,{initialize:function(t){var e;return t.getLayout&&(e=t.getLayout("head"))?(this.gantt=t,!0):!1},getLogoTooltip:function(t){if(t&&t.bindObject==this)return!1;var e=this.div.ownerDocument.createElement("div");return e.innerHTML="<a href='#'></a>",t.setContent(e),t.bindObject=this,!0}}),pe.prototype=new Xt,t(pe.prototype,{initialize:function(e){if(e.disableContextMenu)return!1;$(this,e.config.getConfigObj("SFMenu")),this.gantt=e;var i=this.container=e.getContainer(),n=e.container.ownerDocument,s=this.div=n.createElement(wi[85]);return t(s,{cellSpacing:0,border:0,cellPadding:0}),t(s.style,{position:wi[178],zIndex:700}),t(s.style,this.tableStyle),t(e,{addContextMenuItem:m(this,this.addItem),
getContextMenuItemById:m(this,this.getItemById),removeContextMenuItem:m(this,this.removeItem),setContextMenu:m(this,this.setContextMenu)}),this.listeners=[x(i,wi[62],S),C(i,wi[182],this,this.onMouseDown),C(s,wi[181],this,this.onItemMouseOver),C(s,wi[182],this,this.onItemClick),C(n,wi[182],this,this.hidden)],!0},setContextMenu:function(t,e){t._SF_E_||(t._SF_E_=[]),t._SF_E_.contextMenu=e},onMouseDown:function(t){var e=M(t);if(4==e&&T(t),2==e)for(var i=t.target;i;){if(i._SF_E_&&i._SF_E_.contextMenu&&i._SF_E_.contextMenu(this,t)){S(t),this.items&&this.hidden();for(var n=[],s=this.contextMenuItems,a=0;a<s.length;a++){var r=s[a].showHandle(this,t);1==r&&n.push(s[a])}this.items=n;var o=N(t,this.container);return void this.show(o)}i=i.parentNode}},addItem:function(t,e,i,n,s,a){if(s)for(var r=0;r<this.contextMenuItems.length;r++)if(s==this.contextMenuItems[r].id==s)return!1;var o=new $t(t,e,i,n,s,a);return this.contextMenuItems.push(o),o},getItemById:function(t){for(var e=0;e<this.contextMenuItems.length;e++)if(t==this.contextMenuItems[e].id)return this.contextMenuItems[e];return null},removeItem:function(t){if(typeof t==wi[190]&&(t=t.id),t)for(var e=0;e<this.contextMenuItems.length;e++)if(this.contextMenuItems[e].id==t)return this.contextMenuItems.splice(e,1);return null},show:function(e){var i=this.container,n=this.div;this.createItemContent(),i.appendChild(n);var s=e[0]+1,a=e[1]+1;s+n.offsetWidth>i.offsetWidth&&(s=e[0]-n.offsetWidth-1),a+n.offsetHeight>i.offsetHeight&&(a=e[1]-n.offsetHeight-1),t(n.style,{left:s+"px",top:a+"px"})},hidden:function(){this.focusObj=null;var t=this.items;if(t){for(var e=0;e<t.length;e++)t[e].row=null;this.items=null}k(this.div,!0),this.div.parentNode==this.container&&this.container.removeChild(this.div)},createItemContent:function(){this.items.sort(function(t,e){return t.index==e.index?0:t.index>e.index?1:-1});for(var e=this.container.ownerDocument,i=0;i<this.items.length;i++){var n=this.items[i],s=this.div.insertRow(-1),a=s.insertCell(-1);if(t(a,{width:34,height:24,bgColor:"#F6F6F6",align:wi[91]}),n.icon){var r=e.createElement("img");Q(r,n.icon),t(r,{border:0,width:16,height:16}),a.appendChild(r)}a=s.insertCell(-1),t(a,{noWrap:"true"}),t(a.style,{paddingLeft:"10px",paddingRight:"25px",fontSize:"13px",cursor:wi[70]}),a.innerHTML=n.text,n.row=s}},getFocusItem:function(t){if(!this.items)return null;for(var e,i=t.target,n=this.div;i&&i!=n;)"TR"==i.nodeName&&(e=i),i=i.parentNode;if(!e)return null;for(var s=n.rows.length-1;s>=0;s--)if(e==n.rows[s])return this.items[s];return null},onItemMouseOver:function(t){var e=this.getFocusItem(t);if(e){var i=this.focusObj;i&&(i.row.style.backgroundColor="",i.row.cells[0].style.backgroundColor="#F6F6F6"),this.focusObj=e,e.row.style.backgroundColor="#C4E0F2",e.row.cells[0].style.backgroundColor="#C4E0F2"}},onItemClick:function(t){var e=this.getFocusItem(t);e&&(S(t),this.hidden(),e.runHandle&&e.runHandle(this))},remove:function(){this.hidden();var t=this.gantt;delete t.addContextMenuItem,delete t.getContextMenuItemById,delete t.removeContextMenuItem,delete t.setContextMenu,delete this.contextMenuItems,Xt.prototype.remove.apply(this,arguments)}}),fe.prototype=new Xt,t(fe.prototype,{initialize:function(t,e){if(t.addContextMenuItem){var i=t.config.getConfig("SFGantt/menuText");return t.addContextMenuItem(function(t){return"chart"==t.type&&t.gantt.zoomIn?1:0},function(t){t.gantt.zoomIn()},i.ZoomIn,t.imgPath+"icon_zoomin"+t.imgType,"ZoomIn",551),t.addContextMenuItem(function(t){return"chart"==t.type&&t.gantt.zoomOut?1:0},function(t){t.gantt.zoomOut()},i.ZoomOut,t.imgPath+"icon_zoomout"+t.imgType,"ZoomOut",556),t.addContextMenuItem(function(t){return t.type==wi[81]&&t.gantt.focusIntoView&&t.gantt.getFocusElement&&t.gantt.getFocusElement()&&t.gantt.getFocusElement().Start?1:0},function(t){t.gantt.focusIntoView()},i.FocusIntoView,t.imgPath+"icon_taskgoto"+t.imgType,"FocusIntoView",601),t.addContextMenuItem(function(t){return t.type!=wi[81]||!t.gantt.addTask||t.gantt.readOnly||t.gantt.disableAddTask?0:1},function(t){t.gantt.addTask()},i.AddTask,null,"AddTask",651),t.addContextMenuItem(function(t){return t.type==wi[81]&&t.gantt.deleteTask&&!t.gantt.readOnly&&!t.gantt.disableDeleteTask&&t.gantt.getFocusElement&&t.gantt.getFocusElement()&&t.gantt.getFocusElement().elementType==wi[169]?1:0},function(t){t.gantt.deleteTask()},i.DeleteTask,null,"DeleteTask",656),t.addContextMenuItem(function(t){return t.type==wi[81]&&t.gantt.addTasksLinks&&!t.gantt.readOnly&&!t.gantt.disableAddLink&&t.gantt.getFocusElement&&t.gantt.getFocusElement()&&t.gantt.getFocusElement().elementType==wi[169]?1:0},function(t){t.gantt.addTasksLinks()},i.AddTasksLinks,null,"AddTasksLinks",701),t.addContextMenuItem(function(t){return t.type==wi[81]&&t.gantt.removeTasksLinks&&!t.gantt.readOnly&&!t.gantt.disableDeleteLink&&t.gantt.getFocusElement&&t.gantt.getFocusElement()&&t.gantt.getFocusElement().elementType==wi[169]?1:0},function(t){t.gantt.removeTasksLinks()},i.RemoveTasksLinks,null,"RemoveTasksLinks",706),t.addContextMenuItem(function(t){return t.type==wi[81]&&t.gantt.upgradeSelectedTasks&&!t.gantt.readOnly&&!t.gantt.disableUpdateTask&&t.gantt.getFocusElement&&t.gantt.getFocusElement()&&t.gantt.getFocusElement().elementType==wi[169]?1:0},function(t){t.gantt.upgradeSelectedTasks()},i.UpgradeTask,null,"UpgradeTask",751),t.addContextMenuItem(function(t){return t.type==wi[81]&&t.gantt.degradeSelectedTasks&&!t.gantt.readOnly&&!t.gantt.disableUpdateTask&&t.gantt.getFocusElement&&t.gantt.getFocusElement()&&t.gantt.getFocusElement().elementType==wi[169]?1:0},function(t){t.gantt.degradeSelectedTasks()},i.DegradeTask,null,"DegradeTask",756),t.addContextMenuItem(function(t){return t.gantt.showPrintDialog?1:0},function(t){t.gantt.showPrintDialog()},i.Print,t.imgPath+"icon_print"+t.imgType,"Print",791),t.addContextMenuItem(function(t){return t.type==wi[87]&&t.gantt.collapseChart&&!t.gantt.isChartShow()?1:0},function(t){t.gantt.collapseChart()},i.ShowChart,null,"ShowChart",801),t.addContextMenuItem(function(t){return t.type==wi[87]&&t.gantt.collapseChart&&t.gantt.isChartShow()?1:0},function(t){t.gantt.collapseChart()},i.HideChart,null,"HideChart",806),t.addContextMenuItem(function(t){return t.type==wi[87]&&t.gantt.collapseList&&!t.gantt.isListShow()?1:0},function(t){t.gantt.collapseList()},i.ShowList,null,"ShowList",850),t.addContextMenuItem(function(t){return t.type==wi[87]&&t.gantt.collapseList&&t.gantt.isListShow()?1:0},function(t){t.gantt.collapseList()},i.HideList,null,"HideList",856),t.addContextMenuItem(function(t){return"logo"==t.type?1:0},function(t){window.open(wi[67])},i.Help,null,"Help",901),t.addContextMenuItem(function(t){return"logo"==t.type?1:0},function(t){window.open("http://www.baidu.cn")},i.About,null,"About",951),!0}}}),me.prototype=new Xt,t(me.prototype,{initialize:function(t){return this.gantt?!1:(t.openDialog=m(this,this.openDialog),t.closeDialog=m(this,this.closeDialog),this.gantt=t,!0)},openDialog:function(e,i){this.isOpen&&this.closeDialog(),i=i?i:{};var n,s=this.gantt,a=s.getViewSize(),r=this.gantt.getContainer(),o=i.size?i.size:[parseInt(a[0]/2),parseInt(a[1]/2)],h=[o[0]+10,o[1]+35],d=this.div;if(d)n=d.lastChild;else{var d=this.div=document.createElement("div");t(d.style,{position:wi[178],overflow:wi[102],zIndex:990,border:wi[61],backgroundColor:wi[84]});var u=document.createElement("div");t(u.style,{position:wi[104],borderBottom:wi[61],backgroundColor:wi[60],width:wi[89],height:"21px"}),d.appendChild(u);var c=document.createElement("div");t(c.style,{position:wi[104],width:wi[89],height:"16px",fontSize:"14px",fontWeight:"bolder",padding:"4px",paddingLeft:"10px",cursor:wi[153]}),u.appendChild(c);var g=document.createElement("div");t(g.style,{position:wi[178],right:"2px",top:"-8px",fontSize:"25px",backgroundColor:wi[60],cursor:wi[189]}),g.appendChild(document.createTextNode("×")),d.appendChild(g),this.listeners=[C(g,wi[83],this,this.closeDialog)];var n=document.createElement("div");t(n.style,{position:wi[104],fontSize:"13px",margin:"5px"}),d.appendChild(n)}if(t(d.style,{left:(a[0]-h[0])/2+"px",top:(a[1]-h[1])/2+"px",width:h[0]+"px",height:h[1]+"px"}),t(n.style,{width:o[0]+"px",height:o[1]+"px"}),i.title?d.firstChild.firstChild.innerHTML=i.title:k(d.firstChild.firstChild,!0),typeof e==wi[190]?n.appendChild(e):n.innerHTML=e,r.appendChild(d),i.isModal){var p=this.maskDiv;if(!p){var p=this.maskDiv=document.createElement("div");t(p.style,{position:wi[178],zIndex:950,backgroundColor:wi[68]}),l(p,.7)}t(p.style,{left:"0px",top:"0px",width:a[0]+"px",height:a[1]+"px"}),r.appendChild(p)}else this.maskDiv&&r.removeChild(this.maskDiv);this.isOpen=!0,L(this.gantt,"dialogopen",[i])},closeDialog:function(){var t=this.gantt.getContainer();if(this.maskDiv&&t.removeChild(this.maskDiv),this.div){for(;this.div.lastChild.firstChild;)this.div.lastChild.removeChild(this.div.lastChild.firstChild);t.removeChild(this.div)}this.isOpen=!1,L(this.gantt,"dialogclose")},remove:function(){this.closeDialog();var t=this.gantt;delete t.openDialog,delete t.closeDialog,delete this.maskDiv,Xt.prototype.remove.apply(this,arguments)}}),ve.prototype=new Xt,t(ve.prototype,{initialize:function(t){return this.gantt=t,t.createPrintWindow=m(this,this.createPrintWindow),t.addPrintContent=m(this,this.addPrintContent),t.printContentWindow=m(this,this.printContentWindow),t.showPrintDialog=m(this,this.showPrintDialog),!0},showPrintDialog:function(){var t=this.gantt,e=this.div;if(!e){e=this.div=document.createElement("div"),e.style.padding="5px",e.style.fontSize="12px";var i=document.createElement("div");i.style.margin="5px",i.appendChild(document.createTextNode("打印方向: "));var n=this.cb_hor=document.createElement(wi[59]);n.type=wi[58],i.appendChild(n),i.appendChild(document.createTextNode("横向打印")),e.appendChild(i);var i=document.createElement("div");i.style.margin="5px",i.appendChild(document.createTextNode("打印内容: "));var s=this.cb_showList=document.createElement(wi[59]);s.type=wi[58],i.appendChild(s),s.checked=!0,i.appendChild(document.createTextNode("左侧列表"));var a=this.cb_showMap=document.createElement(wi[59]);a.type=wi[58],i.appendChild(a),a.checked=!0,i.appendChild(document.createTextNode("右侧图表")),e.appendChild(i);var i=document.createElement("div");i.style.margin="5px",i.appendChild(document.createTextNode("打印范围: "));var r=this.cb_all=document.createElement(wi[59]);r.type=wi[58],i.appendChild(r),i.appendChild(document.createTextNode("打印整个文档")),e.appendChild(i);var i=document.createElement("div");i.style.margin="5px",i.innerHTML="请打开浏览器<strong>背景打印</strong>选项以优化效果",e.appendChild(i);var i=document.createElement("div");i.style.margin="5px",i.align=wi[91];var o=document.createElement(wi[59]);o.type="button",o.value="打印",i.appendChild(o);var l=document.createElement(wi[59]);l.type="button",l.value="取消",i.appendChild(l),e.appendChild(i),this.listeners=[C(o,wi[83],this,this.onSubmit),C(l,wi[83],t,t.closeDialog)]}t.openDialog(e,{isModal:!0,size:[280,120],title:"打印"})},onSubmit:function(){var t=210,e=297,i=this.cb_hor.checked,n=this.cb_all.checked,s=this.cb_showList.checked,a=this.cb_showMap.checked;if(s||a){t-=38.1,e-=58.1;for(var r,o,l,h,d=(window.chrome,96),u=25.4,c=this.gantt,g=c.createPrintWindow(),p=i?[e/u*d,t/u*d]:[t/u*d,e/u*d],f=20,m=c.getData().getRootElement(c.elementType).getLastDescendant(!0),v=c.getElementViewTop(m)+c.getElementHeight(m),y=n?0:c.getLayout(wi[57]).scrollTop,w=0,S=c.getData().getRootTask().Finish,T=0;!(y>=v||!n&&T>0);T++){w=Math.min(y+p[1]-c.headHeight-f,v),l=n?c.getData().getRootTask().Start:c.getStartTime();for(var C=0;0==C?(r=s?a?c.listWidth:p[0]:0,o=p[0]-r-10-c.idCellWidth):(r=0,o=p[0]-c.idCellWidth),h=new Date(l.valueOf()+o*c.getScale()),this._addPrintContent(g,[p[0],Math.min(p[1],w-y+c.headHeight+f)],i,[r,o],l,y),l=h,!(l>=S)&&a&&n;C++);y=w}}},createPrintWindow:function(){this._win&&(this.deposePrintWindow(this._win),delete this._win);var e=document.createElement("iframe");t(e.style,{position:wi[178],width:"1px",height:"1px",left:"-2px",top:"-2px",visibility:wi[102]}),this.gantt.getContainer().appendChild(e);var i=e.contentWindow;i.location="about:blank";var n=i.document,s='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">\n';return s+="<html>",s+="<head><meta http-equiv='Content-Type' content='text/html; charset=gb2312'>n<title>SFGantt</title></head>",s+='<body style="padding:0px;margin:0px;" bgcolor="#FFFFFF"></body></html>',n.writeln(s),n.close(),i.gantts=[],document.all||(this._win=i),i},deposePrintWindow:function(t){for(var e;e=t.gantts.pop();)e.depose();k(t.frameElement)},_addPrintContent:function(){this.printList||(this.printList=[],this.printTimeout=setInterval(m(this,function(){var t=this.printList.shift();this.addPrintContent.apply(this,t),this.gantt.openDialog("<div style='font-size:15px;margin:10px;'>还剩余 "+this.printList.length+" 张</div>",{isModal:!0,size:[200,32],title:"正在生成打印内容"}),this.printList[0]||(clearInterval(this.printTimeout),delete this.printTimeout,delete this.printList,t[0].frameElement.style.visibility="",this.printContentWindow(t[0]),this.gantt.closeDialog())}),32)),this.printList.push(arguments)},addPrintContent:function(t,e,i,n,s,a){var r=t.document,o=r.body,l=this.gantt,h=r.createElement("div");o.firstChild&&(h.style.pageBreakBefore="always"),h.style.border=wi[61],o.appendChild(h);var d=h;i?(u(h,[e[1],e[0]]),d=r.createElement("div"),u(d,e),g(d,90),d.style.filter||(d.style.top=(e[0]-e[1])/2+"px",d.style.left=-(e[0]-e[1])/2+"px"),h.appendChild(d)):u(h,e);var c=new X;Y(c,l.config,!0),c.setConfig("SFGantt/container",d),c.setConfig("SFGantt/readOnly",!0),c.setConfig("SFGantt/footHeight",0),c.setConfig("SFGantt/listWidth",n[0]),c.setConfig("SFGantt/disableTooltip",!0),c.setConfig("SFGantt/disableChangeEvent",!0),c.setConfig("SFGantt/disableHelpLink",!0),c.setConfig("SFGantt/disableTimeScrollNotice",!0),c.setConfig("SFGantt/disableDragResize",!0),c.setConfig("SFGantt/disableCursor",!0),c.setConfig("SFGantt/disableContextMenu",!0),c.setConfig("SFGantt/disableScroll",!0),c.setConfig("SFGantt/disableSelect",!0),c.setConfig("SFGantt/scrollTop",a),c.setConfig("SFGantt/forPrint",!0);var p=new Ut(c,l.data);p.showMap(s,l.getZoom()),t.gantts.push(p)},printContentWindow:function(t){window.setTimeout(m(this,function(){t.focus(),t.print(),document.all&&this.deposePrintWindow(t)}),0)},remove:function(){delete this.a_pageType,delete this.t_width,delete this.t_height;var t=this.gantt;delete t.createPrintWindow,delete t.addPrintContent,Xt.prototype.remove.apply(this,arguments)}}),ye.prototype=new Xt,t(ye.prototype,{initialize:function(t){if(this.gantt=t,t.disableScroll||!t.getLayout||!t.showScroller)return!1;var e=t.getLayout(wi[57]);return e.style.overflowY=wi[71],e?(this.listeners=[C(e,wi[71],this,this.onScroll)],!0):!1},onScroll:function(t){S(t),this.timeout||(this.timeout=window.setInterval(m(this,this.onTime),128));var e=this.scrollObj?this.scrollObj:this.getScrollObj();e.scrollTop=this.gantt.getLayout(wi[57]).scrollTop,e.changed=!0,e.idleTimes=0},onTime:function(){var t=this.scrollObj,e=this.gantt;if(!t||!t.changed)return void(t&&(t.idleTimes++,t.idleTimes>8&&(window.clearInterval(this.timeout),delete this.timeout)));t.changed=!1,e.getTooltip&&e.getTooltip().hidden();var i=t.scrollTop;this.updateScroll(t,1,i),this.updateScroll(t,3,i+1.5*this.gantt.getLayout(wi[57]).clientHeight),L(this.gantt,wi[71],[i,t])},updateScroll:function(t,e,i){for(var n=this.gantt,s=t.spanElements[e],a=i-t.spanHeights[e],r=a>0;s;)if(r){if(a<n.getElementHeight(s))break;var o=s.getNextView();if(!o)break;n.getElementDrawObj(o),s=o,a-=n.getElementHeight(s)}else{if(a>0)break;var o=s.getPreviousView();if(!o)break;n.getElementDrawObj(o),s=o,a+=n.getElementHeight(o)}t.spanHeights[e]=i-a,t.spanElements[e]=s},getScrollObj:function(){var t=this.gantt,e=t.getViewElements()[0],i=t.getViewTop();return this.scrollObj={lastTime:(new Date).valueOf(),spanElements:[e,e,e,e],spanHeights:[i,i,i,i]}}}),we.prototype=new Xt,t(we.prototype,{initialize:function(e){if(!this.layoutName||!e.getLayout)return!1;var i=e.getLayout(this.layoutName);if(!i)return!1;O(i);var n=i.ownerDocument,s=n.createElement("div");t(s.style,{position:wi[178]}),Q(s,e.imgPath+"scroll_space"+e.imgType);var a=n.createElement("img");t(a.style,{position:wi[178],left:"0px",border:"0px"}),Q(a,e.imgPath+wi[56]+e.imgType),s.appendChild(a);var r=n.createElement("img");t(r.style,{position:wi[178],right:"0px",border:"0px"}),Q(r,e.imgPath+wi[55]+e.imgType),s.appendChild(r);var o=n.createElement("div");t(o.style,{position:wi[178]});var l=n.createElement("img");t(l.style,{position:wi[178],left:"0px",border:"0px"}),Q(l,e.imgPath+wi[54]+e.imgType),o.appendChild(l);var h=n.createElement("img");t(h.style,{position:wi[178],right:"0px",border:"0px"}),Q(h,e.imgPath+wi[53]+e.imgType),o.appendChild(h);var d=n.createElement("div");t(d.style,{position:wi[178],left:"3px",textAlign:wi[91]}),Q(d,e.imgPath+wi[52]+e.imgType);var u=n.createElement("img");return t(u.style,{border:"0px"}),Q(u,e.imgPath+wi[51]+e.imgType),d.appendChild(u),o.appendChild(d),s.appendChild(o),i.appendChild(s),t(this,{gantt:e,container:i,div:s,leftImg:a,rightImg:r,barDiv:o,barLeftImg:l,barRightImg:h,barCenterDiv:d,barCenterImg:u}),this.listeners=[C(s,wi[182],this,this.onMouseDown),C(e,wi[94],this,this.onResize)],this.scrollLeft=0,!0},onResize:function(){if(this.container){var t=this.container,e=t.offsetWidth,i=t.offsetHeight,n=this.size;if(!n||n[1]!=i||n[0]!=e){if(0>=e)return void(this.div.style.display=wi[173]);this.div.style.display="",u(this.div,[e,i]),this.div.style.display=0>=e-2*i?wi[173]:"",0>=e-2*i||(u(this.barDiv,[e-2*i,i]),u(this.barCenterDiv,[Math.max(0,e-2*i-6),i]),n&&n[1]==i||(u(this.leftImg,[i,i]),u(this.rightImg,[i,i]),u(this.barLeftImg,[3,i]),u(this.barRightImg,[3,i]),u(this.barCenterImg,[8,i])),this.size=[e,i],this.init(this.offsetWidth,this.scrollWidth,this.scrollLeft))}}},init:function(e,i,n){if(e&&i){var s=this.size[0]-2*this.size[1];this.offsetWidth=e,this.scrollWidth=i,this.barDiv.style.display=i>e?"":wi[173];var a=Math.max(i?parseInt(s*e/i):0,14);t(this.barDiv.style,{width:a+"px"}),t(this.barCenterDiv.style,{width:a-6+"px"}),this.width=s-a,this.scrollTo(n?n:this.scrollLeft,!1)}},scrollTo:function(e,i){e=this.scrollLeft=Math.max(Math.min(e,this.scrollWidth-this.offsetWidth),0),t(this.barDiv.style,{left:this.size[1]+e/(this.scrollWidth-this.offsetWidth)*this.width+"px"}),0!=i&&L(this,wi[71],[e])},onMouseDown:function(t){S(t),(this.pressObj||this.spaceObj)&&this.onMouseUp(t);var e=this.gantt,i=this.div,n=e.imgPath,s=e.imgType,a=i.ownerDocument;switch(i.setCapture&&i.setCapture(),t.target){case this.leftImg:case this.rightImg:var r=this.rightImg==t.target;Q(t.target,n+"scroll_"+(r?wi[86]:wi[103])+"1"+s);this.pressObj={dir:r?1:-1,timeout:window.setInterval(m(this,this.onButtonPress),32),ul:C(a,wi[180],this,this.onMouseUp)};L(this,wi[50],[this.scrollLeft]),this.onButtonPress();break;case this.div:var o=I(t,this.div),l=o[0]/(this.size[0]-2*this.size[1])*(this.scrollWidth-this.offsetWidth);this.spaceObj={toLeft:l,timeout:window.setInterval(m(this,this.onSpacePress),128),ul:C(a,wi[180],this,this.onMouseUp)};L(this,wi[50],[this.scrollLeft]),this.onSpacePress();break;default:new it(i,m(this,this.onBarMove),{interval:32}).onMouseDown(t)}},onMouseUp:function(t){S(t),t&&t.target&&t.target.ownerDocument.releaseCapture&&t.target.ownerDocument.releaseCapture();var e=this.gantt;e.imgPath,e.imgType;if(this.pressObj){var i=this.pressObj;L(this,wi[49],[this.scrollLeft]),window.clearInterval(i.timeout),E(i.ul),Q(this.leftImg,e.imgPath+wi[56]+e.imgType),Q(this.rightImg,e.imgPath+wi[55]+e.imgType),this.pressObj=null}if(this.spaceObj){var n=this.spaceObj;L(this,wi[49],[this.scrollLeft]),this.scrollTo(n.toLeft),window.clearInterval(n.timeout),E(n.ul),this.spaceObj=null}},onButtonPress:function(){this.pressObj&&this.scrollTo(this.scrollLeft+8*this.pressObj.dir)},onSpacePress:function(){if(this.spaceObj){var t=this.spaceObj,e=(t.toLeft,this.scrollLeft,t.toLeft-this.scrollLeft);return Math.abs(e)<64?void this.onMouseUp():void this.scrollTo(this.scrollLeft+(e>0?64:-64))}},onBarMove:function(t,e,i){var n=this.gantt,s=n.imgPath,a=n.imgType;return i==wi[179]?(Q(this.barLeftImg,s+wi[48]+a),Q(this.barCenterImg,s+wi[47]+a),Q(this.barRightImg,s+wi[46]+a),Q(this.barCenterDiv,s+wi[45]+a),void L(this,wi[50],[this.startDragLeft=this.scrollLeft])):(this.scrollTo(this.startDragLeft+(e[0]-t[0])/this.width*(this.scrollWidth-this.offsetWidth)),void("end"==i&&(Q(this.barLeftImg,s+wi[54]+a),Q(this.barCenterImg,s+wi[51]+a),Q(this.barRightImg,s+wi[53]+a),Q(this.barCenterDiv,s+wi[52]+a),L(this,wi[49],[this.scrollLeft]))))},remove:function(t){delete this.leftImg,delete this.rightImg,delete this.barDiv,delete this.barLeftImg,delete this.barRightImg,delete this.barCenterDiv,delete this.barCenterImg,Xt.prototype.remove.apply(this,arguments)}}),Se.prototype=new Xt,t(Se.prototype,{remove:function(t){delete this.leftImg,delete this.rightImg,delete this.barDiv,delete this.barLeftImg,delete this.barRightImg,delete this.barCenterDiv,delete this.barCenterImg,Xt.prototype.remove.apply(this,arguments)},onBarMove:function(t,e,i){var n=this.gantt,s=n.imgPath,a=n.imgType;return i==wi[179]?(Q(this.barLeftImg,s+wi[48]+a),Q(this.barCenterImg,s+wi[47]+a),Q(this.barRightImg,s+wi[46]+a),Q(this.barCenterDiv,s+wi[45]+a),void L(this,wi[50],[this.startDragLeft=this.scrollLeft])):(this.scrollTo(this.startDragLeft+(e[0]-t[0])/this.width*(this.scrollWidth-this.offsetWidth)),void("end"==i&&(Q(this.barLeftImg,s+wi[54]+a),Q(this.barCenterImg,s+wi[51]+a),Q(this.barRightImg,s+wi[53]+a),Q(this.barCenterDiv,s+wi[52]+a),L(this,wi[49],[this.scrollLeft]))))},onSpacePress:function(){if(this.spaceObj){var t=this.spaceObj,e=(t.toLeft,this.scrollLeft,t.toLeft-this.scrollLeft);return Math.abs(e)<64?void this.onMouseUp():void this.scrollTo(this.scrollLeft+(e>0?64:-64))}},onButtonPress:function(){this.pressObj&&this.scrollTo(this.scrollLeft+8*this.pressObj.dir)},onMouseUp:function(t){S(t),t&&t.target&&t.target.ownerDocument.releaseCapture&&t.target.ownerDocument.releaseCapture();var e=this.gantt;e.imgPath,e.imgType;if(this.pressObj){var i=this.pressObj;L(this,wi[49],[this.scrollLeft]),window.clearInterval(i.timeout),E(i.ul),Q(this.leftImg,e.imgPath+wi[56]+e.imgType),Q(this.rightImg,e.imgPath+wi[55]+e.imgType),this.pressObj=null}if(this.spaceObj){var n=this.spaceObj;L(this,wi[49],[this.scrollLeft]),this.scrollTo(n.toLeft),window.clearInterval(n.timeout),E(n.ul),this.spaceObj=null}},onMouseDown:function(t){S(t),(this.pressObj||this.spaceObj)&&this.onMouseUp(t);var e=this.gantt,i=this.div,n=e.imgPath,s=e.imgType,a=i.ownerDocument;switch(i.setCapture&&i.setCapture(),t.target){case this.leftImg:case this.rightImg:var r=this.rightImg==t.target;Q(t.target,n+"scroll_"+(r?wi[86]:wi[103])+"1"+s);this.pressObj={dir:r?1:-1,timeout:window.setInterval(m(this,this.onButtonPress),32),ul:C(a,wi[180],this,this.onMouseUp)};L(this,wi[50],[this.scrollLeft]),this.onButtonPress();break;case this.div:var o=I(t,this.div),l=o[0]/(this.size[0]-2*this.size[1])*(this.scrollWidth-this.offsetWidth);this.spaceObj={toLeft:l,timeout:window.setInterval(m(this,this.onSpacePress),128),ul:C(a,wi[180],this,this.onMouseUp)};L(this,wi[50],[this.scrollLeft]),this.onSpacePress();break;default:new it(i,m(this,this.onBarMove),{interval:32}).onMouseDown(t)}},scrollTo:function(e,i){e=this.scrollLeft=Math.max(Math.min(e,this.scrollWidth-this.offsetWidth),0),t(this.barDiv.style,{left:this.size[1]+e/(this.scrollWidth-this.offsetWidth)*this.width+"px"}),0!=i&&L(this,wi[71],[e])},init:function(e,i,n){if(e&&i){var s=this.size[0]-2*this.size[1];this.offsetWidth=e,this.scrollWidth=i,this.barDiv.style.display=i>e?"":wi[173];var a=Math.max(i?parseInt(s*e/i):0,14);t(this.barDiv.style,{width:a+"px"}),t(this.barCenterDiv.style,{width:a-6+"px"}),this.width=s-a,this.scrollTo(n?n:this.scrollLeft,!1)}},initialize:function(t){if(!t.getLayout)return!1;var e=this.targetDiv=t.getLayout("listHead");return e&&we.prototype.initialize.apply(this,arguments)?(this.startLeft=parseInt(e.firstChild.style.left),this.listeners.push(C(this,wi[71],this,this.onScroll)),this.listeners.push(C(t,wi[79],this,this.onResize)),!0):!1},onResize:function(){this.container&&(we.prototype.onResize.apply(this,arguments),this.init(this.targetDiv.offsetWidth,this.targetDiv.scrollWidth+this.startLeft))},onScroll:function(t){for(var e=this.targetDiv.firstChild;e;e=e.nextSibling)e.style&&(e.style.left=-t+this.startLeft+"px");L(this.targetDiv,wi[71])}}),Te.prototype=new we,t(Te.prototype,{initialize:function(t){return we.prototype.initialize.apply(this,arguments)?(this.listeners.push(C(this,wi[50],this,this.onScrollStart)),this.listeners.push(C(this,wi[71],this,this.onScroll)),this.listeners.push(C(this,wi[49],this,this.onScrollEnd)),!0):!1},onResize:function(){if(this.container){we.prototype.onResize.apply(this,arguments);var t=this.gantt.getLayout(wi[95]).offsetWidth;this.init(t,9*t,4*t)}},onScrollStart:function(t){this.scrollObj={start:t,startTime:this.gantt.startTime}},onScroll:function(t){this.gantt.move(t-this.scrollObj.start),this.scrollObj.start=t},onScrollEnd:function(t){this.onResize()}}),Ce.prototype=new Xt,t(Ce.prototype,{initialize:function(e,i){return e.getSelectedElements?(this.gantt=e,t(e,{addTask:m(this,this.addTask),deleteTask:m(this,this.deleteTask),upgradeSelectedTasks:m(this,this.upgradeSelectedTasks),degradeSelectedTasks:m(this,this.degradeSelectedTasks),upgradeTask:m(this,this.upgradeTask),degradeTask:m(this,this.degradeTask),addTasksLinks:m(this,this.addTasksLinks),removeTasksLinks:m(this,this.removeTasksLinks),focusIntoView:m(this,this.focusIntoView)}),!0):!1},addTask:function(){var t,e=this.gantt,i=e.data,n=e.getSelectedElements(),s=null,a=n[0]?n[n.length-1]:null;a?a.getPreviousSibling()?(s=a.getPreviousSibling().getLastDescendant(!0),t=s.getParent()):t=a.getParent():i.getRootTask().getFirstChild()?(s=i.getRootTask().getLastChild().getLastDescendant(!0),t=s.getParent()):t=i.getRootTask();var r=i.addTask(t,s);r&&e.setSelectedElement(r)},checkReadOnly:function(){for(var t=this.gantt.getSelectedElements(),e=t.length,i=0;e>i;i++)if(t[i].ReadOnly){var n=this.gantt.config.getConfig("SFGantt/noticeReadonly");return n&&alert(n),!1}return!0},deleteTask:function(){if(!this.checkReadOnly())return!1;var t=this.gantt.getSelectedElements(),e=t.length;if(t[0]&&0!=e){var i=this.gantt.config.getConfig("SFGantt/noticeDelete");if(!i||window.confirm(i))for(var n=t.length-1;n>=0;n--){var s=t[n];s&&this.gantt.data.deleteTask(s)}}},getTopSelectedTasks:function(){for(var t=[],e=this.gantt.getSelectedElements(),i=0;i<e.length;i++){for(var n,n=t.length-1;n>=0;n--){if(e[i].contains(t[n])){t[n]=e[i];break}if(t[n].contains(e[i]))break}0>n&&t.push(e[i])}return t},upgradeSelectedTasks:function(){if(!this.checkReadOnly())return!1;for(var t=this.getTopSelectedTasks(),e=0;e<t.length;e++)this.upgradeTask(t[e])},degradeSelectedTasks:function(){if(!this.checkReadOnly())return!1;for(var t=this.getTopSelectedTasks(),e=0;e<t.length;e++)this.degradeTask(t[e])},upgradeTask:function(t){var e=this.gantt.data,i=t.getParent();if(!i||i==e.getRootTask())return!1;var n=t.getNextSibling();if(!e.moveTask(t,i.getParent(),i))return!1;for(;n;){var s=n.getNextSibling();if(!e.moveTask(n,t,t.getLastChild()))return!1;n=s}return!0},degradeTask:function(t){var e=t.getPreviousSibling();return e?this.gantt.data.moveTask(t,e,e.getLastChild()):!1},addTasksLinks:function(){var t=this.gantt.getSelectedElements();if(t.length<2)return!1;for(var e=1;e<t.length;e++)t[e].addPredecessorLink(t[e-1],1);return!0},removeTasksLinks:function(){var t=this.gantt,e=t.data,i=t.getSelectedElements();if(i.length<2)return!1;for(var n=0;n<i.length;n++)for(var s=0;s<i.length;s++)if(n!=s)for(var a=i[n].getPredecessorLinks(),r=a.length-1;r>=0;r--)if(a[r].PredecessorTask==i[s]){e.deleteLink(a[r]);break}return!0},focusIntoView:function(){var t=this.gantt,e=t.getFocusElement();e&&e.Start&&t.moveTo&&(t.getViewIndex(e)<0&&t.scrollToElement(e,50),t.moveTo(e.Start),t.move(-10))},remove:function(){var t=this.gantt;delete t.addTask,delete t.deleteTask,delete t.upgradeSelectedTasks,delete t.degradeSelectedTasks,delete t.upgradeTask,delete t.degradeTask,delete t.addTasksLinks,delete t.removeTasksLinks,delete t.focusIntoView,Xt.prototype.remove.apply(this,arguments)}}),ke.prototype=new Xt,t(ke.prototype,{initialize:function(e){this.listeners=[C(e,wi[100],this,this.onBeforeResize)];var i=e.maxSize,n=e.minSize;return i=i?i:[1e3,1e3],n=n?n:[200,200],t(this,{maxSize:i,minSize:n,gantt:e}),e.setMaxSize=m(this,function(t){this.maxSize=t}),e.setMinSize=m(this,function(t){this.minSize=t}),!0},onBeforeResize:function(t,e){var i=this.maxSize;i&&(i[0]<e[0]||i[1]<e[1])&&(t.returnValue=!1);var i=this.minSize;i&&(i[0]>e[0]||i[1]>e[1])&&(t.returnValue=!1)},remove:function(){var t=this.gantt;delete t.setMaxSize,delete t.setMinSize,Xt.prototype.remove.apply(this,arguments)}}),be.prototype=new Xt,t(be.prototype,{initialize:function(e){if(!e.getMapPanel)return!1;$(this,e.config.getConfigObj("SFGanttTasksMap")),be.listIndex||(be.listIndex=0),this.proTag="taskMap_"+be.listIndex++,t(this,{gantt:e,taskHeight:12,taskStyles:e.config.getConfigObj("SFGantt/taskStyle")}),this.taskStyles||(this.taskStyles={}),this.taskPadding=e.itemHeight-this.taskHeight;var i=e.container.ownerDocument,n=this.div=i.createElement("div");t(this.div.style,{position:wi[104],fontSize:"0px",left:"0px",top:"-1px",zIndex:100});var s=i.createElement("div");return t(s.style,{position:wi[104],padding:"0px",margin:"0px",border:"0px"}),n.appendChild(s),e.getMapPanel().appendChild(n),this.listeners=[C(e,wi[101],this,this.onInitialize),C(e,wi[93],this,this.onScale),C(e,wi[66],this,this.drawTask),C(e,wi[65],this,this.clearTask),C(e,wi[64],this,this.updateTask),C(n,wi[82],this,this.onDblClick),C(n,wi[83],this,this.onClick),C(n,wi[182],this,this.onMouseDown)],e.setTooltip&&e.setTooltip(n,m(this,this.getTooltip)),!0},addItem:function(t){return t?t.initialize(this)?(this.items.push(t),!0):!1:void 0},setViewTop:function(){var t=this.gantt.getViewTop();this.div.firstChild.style.height=t+"px"},getTaskStyle:function(t){var e=t.ClassName,i=this.taskStyles;return e=e&&i[e]?e:this.taskStyle,i[e]},drawTask:function(t,e){var i=this.gantt,n=i.getScale();if(n){0==e&&this.setViewTop();var s=i.getElementDrawObj(t),a=s[this.proTag]={},r=t.Start,o=t.Finish,l=i.getElementHeight(t),h=this.div.ownerDocument.createElement("div"),d=this.div.childNodes;if(h.style.cssText="position:relative;top:"+(l-i.getElementDrawObj(t).height)+wi[44]+i.getMapPanelPosition(r)+wi[43]+l+"px",a.taskDiv=h,s.height>0){h._element=t;var u=this.items;if(o&&r&&o>=r)for(var c=u.length-1;c>=0;c--)u[c].show(t,a,n)}e+1==d.length?this.div.appendChild(h):this.div.insertBefore(h,d[e+1])}},updateTask:function(t,e){if(this.gantt.getElementDrawObj(t)){var i=this.gantt.getElementDrawObj(t),n=i[this.proTag];if(n){var s=t.Start,a=t.Finish;n.taskDiv.style.left=this.gantt.getMapPanelPosition(s)+"px";var r=this.items,o=a&&s&&a>=s&&i.height>0;h(e,wi[75])&&(n.taskDiv.style.backgroundColor=t.Selected?wi[42]:"");for(var l=r.length-1;l>=0;l--)o?r[l].onUpdate(t,n,e):r[l].remove(t,n)}}},clearTask:function(t,e){0==e&&this.setViewTop();var i=this.gantt.getElementDrawObj(t);if(i){var n=i[this.proTag];if(n){for(var s=this.items,a=s.length-1;a>=0;a--)s[a].remove(t,n);n&&(n.taskDiv._element=null),k(n.taskDiv),i[this.proTag]=null}}},getEventElement:function(t){t.target||(t.target=t.srcElement);for(var e=t.target;e;e=e.parentNode){if(e==this.div)return null;if(e._element)return e._element}},onDblClick:function(t){var e=this.getEventElement(t);e&&L(this.gantt,"taskdblclick",[e,"chart"])},onClick:function(t){var e=this.getEventElement(t);e&&L(this.gantt,"taskclick",[e,t])},onMouseDown:function(t){if(1==M(t)){var e=this.getEventElement(t);if(e){L(this.gantt,"taskmousedown",[e,t]),this.dragTask=e;for(var i=this.gantt.getElementDrawObj(e)[this.proTag],n=this.items,s=n.length-1;s>=0;s--)n[s].onMouseDown(e,i,t)}}},onInitialize:function(){this.addItem(new hi),this.addItem(new di),this.addItem(new ui),
this.addItem(new ci),this.addItem(new gi),this.addItem(new pi),this.addItem(new fi),this.addItem(new mi),this.addItem(new vi),this.addItem(new yi);var t=this.gantt;if(t.getScale())for(var e=t.getViewElements(),i=0;i<e.length;i++)this.drawTask(e[i],i)},onScale:function(){var t=this.gantt,e=t.getScale();if(e)for(var i=t.getViewElements(),n=this.items,s=0;s<i.length;s++){var a=i[s],r=this.gantt.getElementDrawObj(a)[this.proTag];if(r){var o=a.Start;r.taskDiv.style.left=t.getMapPanelPosition(o)+"px";for(var l=n.length-1;l>=0;l--)n[l].onScale(a,r,e)}}},getTooltip:function(t,e){var i=this.getEventElement(e);if(i){for(var n=this.items,s=this.gantt.getElementDrawObj(i)[this.proTag],a=n.length-1;a>=0;a--)if(n[a].getTooltip(i,s,t,e))return!0;return!1}},getTaskTooltipContent:function(e,i,n){var s=this.div.ownerDocument,a=s.createElement(wi[85]);a.style.fontSize="12px",t(a,{});var r=a.insertRow(-1),o=r.insertCell(-1);t(o,{align:wi[91],colSpan:2,noWrap:!0}),o.appendChild(s.createTextNode(i)),n=Be(n);for(var l=0;l<n.length;l++){var h=n[l];r=a.insertRow(-1),o=r.insertCell(-1),t(o,{align:wi[103],noWrap:!0}),h.showHead(o),o=r.insertCell(-1),t(o,{align:wi[103],noWrap:!0}),h.showBody(o,e,this)}return a},getLinkTooltipContent:function(e){var i=this.div.ownerDocument,n=i.createElement(wi[85]);n.style.fontSize="12px",t(n,{});var s=n.insertRow(-1),a=s.insertCell(-1);t(a,{align:wi[91],colSpan:2,noWrap:!0});var r=this.tooltipTitle.link;a.appendChild(i.createTextNode(r));for(var o=_e(wi[167],this.linkAddNoticeFields.split(",")),l=0;l<o.length;l++){var h=o[l];s=n.insertRow(-1),a=s.insertCell(-1),t(a,{align:wi[103],noWrap:!0}),h.showHead(a),a=s.insertCell(-1),t(a,{align:wi[103],noWrap:!0}),h.showBody(a,e,this)}return n}}),xe.prototype=new Xt,t(xe.prototype,{initialize:function(e,i){return this.gantt=e,t(e,{getStartTime:m(this,this.getStartTime),getScale:m(this,this.getScale),setStartTime:m(this,this.setStartTime),setScale:m(this,this.setScale),move:m(this,this.move),show:m(this,this.show)}),e.moveTo=e.setStartTime,this.listeners=[C(e,wi[101],this,this.onGanttInit)],!0},onGanttInit:function(){var t=this.gantt;if(this.startTime=t.startTime,!this.startTime){var e=t.data.getRootTask();e&&(this.startTime=e.Start),this.startTime||(this.startTime=new Date)}this.scale||(this.scale=1728e5)},move:function(t){this.setStartTime(new Date(t*this.scale+this.startTime.valueOf()))},getStartTime:function(){return this.startTime},setStartTime:function(t){var e=this.gantt,i=this.startTime;if(!i||i!=t&&i.valueOf()!=t.valueOf()){var n={returnValue:!0};return L(e,"beforestarttimechange",[n,t]),n.returnValue?(this.startTime=t,L(e,wi[41],[t]),L(e,wi[153],[t]),!0):!1}},getScale:function(){return this.scale},setScale:function(t){if(this.scale!=t){var e={returnValue:!0};return L(this.gantt,"beforescalechange",[e,t]),e.returnValue?(this.scale=t,L(this.gantt,wi[93],[t]),!0):!1}},show:function(t,e){var i=this.gantt;t&&i.setStartTime(t),e&&i.setScale(e)},remove:function(){var t=this.gantt;delete t.moveTo,delete t.getStartTime,delete t.getScale,delete t.setStartTime,delete t.setScale,delete t.move,delete t.show,Xt.prototype.remove.apply(this,arguments)}}),Ee.prototype=new Xt,t(Ee.prototype,{initialize:function(e){if(!e.getLayout||!e.getStartTime||!e.getLayout(wi[95]))return!1;var i=this.div=e.container.ownerDocument.createElement("div");return t(i.style,{position:wi[104],left:"0px",top:"0px"}),e.getLayout(wi[95]).appendChild(i),i?(this.gantt=e,e.getMapPanel=m(this,this.getMapPanel),e.getMapPanelPosition=m(this,this.getMapPanelPosition),e.getTimeByMapPanelPosition=m(this,this.getTimeByMapPanelPosition),this.listeners=[C(e,wi[101],this,this.onGanttInit),C(e,wi[41],this,this.onTimeChange),C(e,wi[93],this,this.onTimeChange)],e.disableMapDrag||(this.listeners=this.listeners.concat(nt(i,m(this,this.onMove),{container:e.getContainer()}))),!0):!1},onGanttInit:function(){this.drawStart=this.gantt.getStartTime(),this.onTimeChange()},onTimeChange:function(t){this.div.style.left=-Math.round(this.gantt.getStartTime()-this.drawStart)/this.gantt.getScale()+"px"},getMapPanelPosition:function(t){return t?Math.round(t-this.drawStart)/this.gantt.getScale():0},getTimeByMapPanelPosition:function(t){return t=t?t:0,new Date(t*this.gantt.getScale()+this.drawStart.valueOf())},getMapPanel:function(){return this.div},onMove:function(t,e,i){var n=this.gantt,s=n.getLayout(wi[57]);i==wi[179]&&(this.startPosition=s.scrollTop,this.startTime=n.getStartTime());var a=s.scrollTop=this.startPosition-e[1]+t[1];L(n,wi[71],[a]),n.setStartTime(new Date(this.startTime.valueOf()+(t[0]-e[0])*n.getScale()))},remove:function(){var t=this.gantt;delete t.getMapPanel,delete t.getMapPanelPosition,delete getTimeByMapPanelPosition,Xt.prototype.remove.apply(this,arguments)}}),De.prototype=new Xt,t(De.prototype,{initialize:function(e){if(!e.getLayout||!e.getStartTime||!e.getLayout(wi[95]))return!1;var i=this.div=e.container.ownerDocument.createElement("div");return t(i.style,{position:wi[178],left:"0px",top:"0px",width:wi[89],height:wi[89],zIndex:10}),e.getContainer().appendChild(i),i?(this.gantt=e,e.getTimePanel=m(this,this.getTimePanel),e.getTimePanelPosition=m(this,this.getTimePanelPosition),this.listeners=[C(e,wi[101],this,this.onGanttInit),C(e,wi[94],this,this.onTimeChange),C(e,wi[41],this,this.onTimeChange),C(e,wi[93],this,this.onTimeChange)],!0):!1},onGanttInit:function(){this.drawStart=this.gantt.getStartTime(),this.onTimeChange()},onTimeChange:function(t){if(this.drawStart){var e=this.gantt;this.div.style.left=-Math.round((e.getStartTime()-this.drawStart)/e.getScale()-P(e.getLayout(wi[95]),e.getContainer())[0])+"px"}},getTimePanelPosition:function(t){return t?Math.round(t-this.drawStart)/this.gantt.getScale():0},getTimePanel:function(){return this.div},remove:function(){var t=this.gantt;delete t.getTimePanel,delete t.getTimePanelPosition,Xt.prototype.remove.apply(this,arguments)}}),Fe.prototype=new Xt,t(Fe.prototype,{initialize:function(e){if(!e.getTimePanel)return!1;var i=e.getTimePanel();if(!i)return!1;if(e.addTimeLine=m(e,Le),!this.time)return!1;this.gantt=e,$(this,e.config.getConfigObj("SFGanttTimeLine"));var n=this.div=e.container.ownerDocument.createElement("div");return t(n.style,this.lineStyle),t(n.style,this.style),t(n.style,{position:wi[178],fontSize:"0px",left:"-1px",top:"0px",height:wi[89],zIndex:200}),i.appendChild(n),this.listeners=[C(e,wi[93],this,this.onMove)],this.dragable&&(o(n,wi[88]),this.listeners.push(nt(n,m(this,this.onDrag),{container:i}))),this.onMove(),!0},onMove:function(){var t=this.gantt,e=t.getScale(),i=t.getStartTime();e&&i&&(this.div.style.left=t.getTimePanelPosition(this.time)+"px")},moveTo:function(t){this.time=t,this.onMove()},onDrag:function(t,e,i){i==wi[179]&&(this.dragStart=this.time.valueOf());var n=this.gantt,s=new Date(this.dragStart+(e[0]-t[0])*this.gantt.getScale());if(this.moveTo(s),n.getTooltip){var r=n.getTooltip(),o=P(n.getTimePanel(),n.getContainer());r.setContent(this.div.ownerDocument.createTextNode(a(s,this.tooltipFormat))),r.show([e[0]+o[0],e[1]+o[1]])}}}),t(Fe,{addTimeLine:Le}),Pe.prototype=new Xt,t(Pe.prototype,{initialize:function(e,i){return e.disableTimeScrollNotice||!e.getLayout?!1:($(this,e.config.getConfigObj("SFGanttTimeScrollNotice")),this.gantt=e,this.div=i.ownerDocument.createElement("div"),t(this.div.style,{position:wi[178],zIndex:400,display:wi[173],left:"100px"}),t(this.div.style,this.divStyle),i.appendChild(this.div),this.listeners=[C(e,wi[153],this,this.onMove),C(e,wi[94],this,this.onResize)],!0)},onMove:function(t){this.timeout||(this.timeout=window.setInterval(m(this,this.onTime),64)),this.lastTime=t,this.idleTimes=0,this.changed=!0},onTime:function(){return this.changed?(this.changed=!1,this.div.style.display="",void(this.div.innerHTML=a(this.lastTime,this.dateFormat))):(this.idleTimes++,void(this.idleTimes>4&&(window.clearInterval(this.timeout),this.div.style.display=wi[173],delete this.timeout)))},onResize:function(){var t=this.gantt.getLayout(wi[95]);this.div.style.left=P(t,this.gantt.getContainer())[0]+1+"px",this.div.style.bottom=this.gantt.footHeight+5+"px"}}),Ie.prototype=new Xt,t(Ie.prototype,{initialize:function(e){if(e.disableTimeSegmentation||!e.getTimePanel||!e.getCalList)return!1;var i=e.getTimePanel();if(!i)return!1;$(this,e.config.getConfigObj("SFGanttTimeSegmentation")),this.gantt=e;var n=this.div=e.container.ownerDocument.createElement("div");return t(n.style,{position:wi[178],fontSize:"0px",left:"0px",top:"0px",height:wi[89],width:wi[89],zIndex:20}),i.appendChild(n),this.listeners=[C(e,wi[101],this,this.reDraw),C(e,wi[94],this,this.reDraw),C(e,wi[93],this,this.reDraw),C(e,wi[153],this,this.reDraw)],this.reDraw(),!0},reDraw:function(){var t=this.gantt,e=t.getCalList();e&&e[1]&&this.showSegmentations(t.getScale(),t.getStartTime().valueOf(),e[1])},showSegmentations:function(e,i,n){if((this.cal!=n||!this.drawStart||Math.abs(i-this.drawStart)/e>1e4)&&(this.clear(),t(this,{cal:n,drawStart:i,scale:e}),this.div.style.left=this.gantt.getTimePanelPosition(i)+"px"),this.scale!=e){for(var s=this.div.firstChild;s;s=s.nextSibling)s.style.left=(s.sTime-this.drawStart)/e+1+"px";this.div.style.left=this.gantt.getTimePanelPosition(this.drawStart)+"px",this.scale=e}var a=i+this.div.offsetWidth*e,r=this.div,o=r.firstChild?r.firstChild.sTime:Number.MAX_VALUE,l=r.lastChild?r.lastChild.eTime:Number.MIN_VALUE;if(i>(r.firstChild?r.firstChild.eTime:Number.MAX_VALUE)){for(;r.firstChild&&r.firstChild.eTime<i;)k(r.firstChild);o=r.firstChild?r.firstChild.sTime:Number.MAX_VALUE}if((r.lastChild?r.lastChild.sTime:Number.MIN_VALUE)>a){for(;r.lastChild&&r.lastChild.sTime>a;)k(r.lastChild);l=r.lastChild?r.lastChild.eTime:Number.MIN_VALUE}o>i&&(this.addSegmentation(i,Math.min(o,a),n,r,e,-1),o=r.firstChild?r.firstChild.sTime:Number.MAX_VALUE,l=r.lastChild?r.lastChild.eTime:Number.MIN_VALUE),a>l&&this.addSegmentation(Math.max(l,i),a,n,r,e,1)},addSegmentation:function(e,i,n,s,a,r){for(var o=parseInt(n.getFloorTime(new Date(e)).valueOf()),l=null;i>o;){var h=parseInt(n.getNextTime(new Date(o)).valueOf()),d=this.div.ownerDocument.createElement("div");t(d,{sTime:o,eTime:h}),t(d.style,{position:wi[178],left:(o-this.drawStart)/a+1+"px",top:"0px",width:"0px",height:wi[89],borderLeft:wi[40]}),t(d.style,this.lineStyle),-1==r?null==l?s.insertBefore(d,s.firstChild):null==l.nextSibling?s.appendChild(d):s.insertBefore(d,l.nextSibling):s.appendChild(d),l=d,o=h}},clear:function(){k(this.div,!0)}}),Ne.prototype=new Xt,t(Ne.prototype,{initialize:function(e){if(e.disableTooltip)return!1;$(this,e.config.getConfigObj("SFTooltip"));var i=e.container.ownerDocument.createElement("div");t(i.style,{position:wi[178],zIndex:650}),t(i.style,this.divStyle);var n=e.container;return t(this,{gantt:e,div:i,container:n}),this.setEnable(!0),t(e,{getTooltip:m(this,this.getTooltip),setTooltip:m(this,this.setTooltip)}),!0},onMouseOver:function(t){for(var e=t.target;e;){if(e._SF_E_&&e._SF_E_.tooltip&&e._SF_E_.tooltip(this,t))return S(t),void this.show(N(t,this.container),e);e=e.parentNode}},setEnable:function(t){t&&!this.listeners?this.listeners=[C(this.container,"mouseover",this,this.onMouseOver)]:!t&&this.listeners&&(E(this.listeners[0]),delete this.listeners)},setContent:function(t){k(this.div,!0),this.div.appendChild(t)},getContent:function(){return this.div},show:function(e,i){i=i?i:this.div,this.container.appendChild(this.div);var n=e[0]+5,s=e[1]+5;this.position||(n+this.div.offsetWidth>this.container.offsetWidth&&(n=e[0]-this.div.offsetWidth-2),s+this.div.offsetHeight>this.container.offsetHeight&&(s=e[1]-this.div.offsetHeight-2)),t(this.div.style,{left:n+"px",top:s+"px"}),this.container._ganttTip=this,this.hl=C(i,"mouseout",this,function(t){this.listeners&&this.hidden()})},hidden:function(){this.div.parentNode==this.container&&this.container.removeChild(this.div),this.container._ganttTip=null,this.bindObject=null,E(this.hl)},setTooltip:function(t,e){t._SF_E_||(t._SF_E_=[]),t._SF_E_.tooltip=e},getTooltip:function(){return this},remove:function(){this.setEnable(!1),this.hidden();var t=this.gantt;delete t.getTooltip,delete t.setTooltip,delete this.container,Xt.prototype.remove.apply(this,arguments)}}),Me.prototype=new Xt,t(Me.prototype,{initialize:function(t){return this.gantt=t,this.itemHeight=t.itemHeight,this.inline=t.inline,this.hideSummary=t.hideSummary,t.getElementDrawObj=m(this,this.getElementDrawObj),t.removeElementDrawObj=m(this,this.removeElementDrawObj),t.getElementHeight=m(this,this.getElementHeight),this.listeners=[C(t,t.elementType.toLowerCase()+wi[150],this,this.onElementChange)],!0},getElementDrawObj:function(t){var e=this.getTagName();if(!t[e]){var i=this.getElementHeight(t),n=this.hideSummary&&t.Summary?0:this.inline?this.itemHeight:i;t[e]={height:n,_height:i}}return t[e]},removeElementDrawObj:function(t){var e=this.getTagName();delete t[e]},getTagName:function(){return this.tagName||(Ut._tagIndex||(Ut._tagIndex=0),this.tagName="drawObj_"+Ut._tagIndex++),this.tagName},getElementHeight:function(t){var e,i;return t.Summary&&this.hideSummary?0:this.inline?!t.Summary&&t.Start&&t.Finish&&(i=t.getPreviousSibling())&&!i.Summary&&i.Start&&i.Finish&&i.Finish<t.Start?0:this.itemHeight:(e=t.LineHeight)?e:this.itemHeight},onElementChange:function(t,e){var i=this.gantt;if(i.inline){if(!h(e,wi[148])&&!h(e,wi[149]))return;var n=null;if(i.getElementDrawObj(t)._height!=i.getElementHeight(t))n=t;else{var s=t.getNextSibling();s&&i.getElementDrawObj(s)._height!=i.getElementHeight(s)&&(n=s)}for(var a=n;a&&i.getElementDrawObj(a)._height!=i.getElementHeight(a);a=a.getNextSibling())L(i,wi[63],[a,i.getElementHeight(a),i.getElementDrawObj(a)._height])}h(e,wi[134])&&L(i,wi[63],[t,t.LineHeight,i.getElementDrawObj(t)._height])},remove:function(){var t=this.gantt;delete t.getElementHeight,delete t.removeElementDrawObj,delete t.getElementDrawObj,delete this.gantt}}),Oe.prototype=new Xt,t(Oe.prototype,{initialize:function(e){return e.getLayout&&e.getLayout(wi[57])?(t(this,{gantt:e,heightSpan:[0,0],viewElements:[]}),e.getViewTop=m(this,this.getViewTop),e.getViewElements=m(this,this.getViewElements),e.getViewIndex=m(this,this.getViewIndex),e.getElementViewTop=m(this,this.getElementViewTop),e.setScrollTop=m(this,this.setScrollTop),e.scrollToElement=m(this,this.scrollToElement),this.listeners=[C(e,wi[101],this,this.onGanttInit),C(e,wi[71],this,this.onScroll),C(e,wi[99],this,this.showViewElements),C(e,wi[63],this,this.onHeightChange)],!0):!1},onGanttInit:function(){var t=this.gantt,e=t.getData(),i=this.elementType.toLowerCase();this.listeners=this.listeners.concat([C(e,wi[152]+i+wi[153],this,this.onElementMove),C(e,wi[152]+i+"add",this,this.onElementAdd),C(e,wi[152]+i+wi[157],this,this.onElementDelete),C(e,wi[152]+i+wi[150],this,this.onElementChange)]),this.setScrollTop(t.scrollTop?t.scrollTop:0)},setScrollTop:function(t){this.onScroll(t);var e=this.gantt,i=e.getLayout(wi[57]);e.forPrint?(i.firstChild.style.position=wi[104],i.firstChild.style.top=-t+"px"):i.scrollTop=t},getScrollTop:function(){return this.scrollTop?this.scrollTop:0},onScroll:function(t){if(t)this.scrollTop=t;else{var e=this.gantt,i=e.getLayout(wi[57]);this.scrollTop=e.forPrint?-parseInt(i.firstChild.style.top):i.scrollTop}this.showViewElements()},inViewElement:function(t,e){var i=this.gantt;0>e?(this.viewElements.push(t),e=this.viewElements.length-1):this.viewElements.splice(e,0,t),this.viewElements[1]&&0==e?this.heightSpan[0]-=i.getElementHeight(t):this.heightSpan[1]+=i.getElementHeight(t),L(i,wi[96],[this.heightSpan]),L(i,this.elementType.toLowerCase()+"inview",[t,e])},outViewElement:function(t){if(0>t&&(t=this.viewElements.length-1),!(0>t)){var e=this.viewElements.splice(t,1)[0],i=this.gantt,n=i.getElementDrawObj(e);0==t&&this.viewElements.length>0&&!e.isHidden()?this.heightSpan[0]+=n.height:this.heightSpan[1]-=n.height,L(i,wi[96],[this.heightSpan]),L(i,this.elementType.toLowerCase()+"outview",[e,t])}},getViewIndex:function(t){for(var e=this.viewElements.length-1;e>=0;e--)if(t==this.viewElements[e])return e;return-1},getViewTop:function(){return this.heightSpan[0]},resetHeightSpan:function(){var t=this.viewElements[0],e=0,i=!1,n=this.gantt;if(t){for(var s=n.getData().getRootElement(this.elementType).getFirstChild();s;s=s.getNextView()){if(s==t){i=!0;break}e+=n.getElementDrawObj(s).height}if(i){var a=this.heightSpan[0]-e;this.heightSpan[0]=e,this.heightSpan[1]-=a}}else this.heightSpan=[0,0];L(n,wi[96],[this.heightSpan])},delayShowViewElements:function(){this.dst||(this.dst=window.setInterval(m(this,this.onShowTime),32)),this.showChanged=!0,this.showIdleTimes=0},onShowTime:function(){return this.showChanged?void(this.showChanged=!1):(this.showIdleTimes++,void(this.showIdleTimes>4&&(window.clearInterval(this.dst),delete this.dst,this.showViewElements(!0))))},showViewElements:function(t){var e=this.gantt,i=e.getLayout(wi[57]),n=e.viewEnlargeHeight,s=e.viewBufferHeight+n,a=this.getScrollTop()-n,r=a+i.clientHeight+2*n;if(t&&this.viewElements.length>1)for(var o=this.heightSpan[0],l=0,h=0;h<this.viewElements.length-1;h++){var d=this.viewElements[h],u=this.viewElements[h+1];if(d.getNextView()!=u){for(var c=d.getNextView();c&&c!=u&&(o+=e.getElementHeight(c),this.inViewElement(c,h+ ++l,!0),!(o>r));c=c.getNextView());h+=l,l=0}else o+=e.getElementHeight(d);if(o>r){this.removeViewElements(h+l),this.heightSpan[1]=o,L(e,wi[96],[this.heightSpan]);break}}for(;this.viewElements[0]&&this.heightSpan[0]+e.getElementHeight(this.viewElements[0])<a-s;)this.outViewElement(0);for(;this.viewElements[0]&&this.heightSpan[1]-e.getElementHeight(this.viewElements[this.viewElements.length-1])>r+s;)this.outViewElement(-1);if(!this.viewElements[0]){for(var o=0,c=e.data.getRootElement(this.elementType).getNext();a>o&&c&&!(o+e.getElementHeight(c)>=a);)o+=e.getElementHeight(c),c=c.getNextView();if(!c)return void(o>0&&this.setScrollTop(o));this.heightSpan=[o,o],L(e,wi[96],[this.heightSpan]),this.inViewElement(c,-1)}for(;this.heightSpan[1]<r;){var c=this.viewElements[this.viewElements.length-1].getNextView();if(!c)break;this.inViewElement(c,-1)}for(;this.heightSpan[0]>a;){var c=this.viewElements[0].getPreviousView();if(!c)break;this.inViewElement(c,0)}},getElementViewTop:function(t){for(var e=this.viewElements[0],i=this.gantt,n=i.data.compareElement(e,t)>0,s=0,a=t;a;a=n?a.getPreviousView():a.getNextView())if(a!=t||!n){if(a==e&&!n)break;if(s+=i.getElementHeight(a)*(n?1:-1),a==e)break}return this.getViewTop()+s},removeViewElements:function(t){for(var e=this.viewElements.length-1;e>t;e--)this.outViewElement(-1,!0)},getViewElements:function(){return this.viewElements},onElementChange:function(t,e,i,n){switch(e){case wi[135]:if(t.isHidden())return;var s=this.viewElements[0]&&this.gantt.data.compareElement(t,this.viewElements[0])>0,a=t.Collapse;if(a)for(var r=0;r<this.viewElements.length;r++)t!=this.viewElements[r]&&t.contains(this.viewElements[r])&&(this.outViewElement(r,!0),r--);s&&this.resetHeightSpan(),this.showViewElements(!a);break;case wi[134]:}},onHeightChange:function(t,e,i){if(!t.isHidden()){if(this.viewElements[0]&&this.gantt.data.compareElement(t,this.viewElements[0])>=0){var n=e-(i?i:this.gantt.itemHeight);this.heightSpan[0]+=n,this.heightSpan[1]+=n,L(this.gantt,wi[96],[this.heightSpan])}var s=this.getViewIndex(t);this.outViewElement(s,!0),this.gantt.removeElementDrawObj(t),this.delayShowViewElements()}},onElementAdd:function(t){if(!t.isHidden()){var e=!1;if(this.viewElements[0]&&this.gantt.data.compareElement(t,this.viewElements[0])>0){var i=this.gantt.getElementHeight(t);this.heightSpan[0]+=i,this.heightSpan[1]+=i,L(this.gantt,wi[96],[this.heightSpan]),e=!0}(e||0==this.viewElements.length||h(this.viewElements,t.getNextView())||h(this.viewElements,t.getPreviousView()))&&this.delayShowViewElements()}},onElementMove:function(t,e,i){for(var n=this.gantt.data,s=!e.Collapse&&!e.isHidden()&&this.viewElements[0]&&n.compareElement(i?i.getLastDescendant(!0):e,this.viewElements[0])>0,a=!t.isHidden()&&this.viewElements[0]&&n.compareElement(t,this.viewElements[0])>0,r=0;r<=this.viewElements.length;r++)if(t.contains(this.viewElements[r])){var o=this.viewElements[r];this.outViewElement(r,!0),this.gantt.removeElementDrawObj(o),r--}s!=a&&this.resetHeightSpan(),this.delayShowViewElements()},onElementDelete:function(t,e,i){if(!e.Collapse&&!e.isHidden()){for(var n=i?i.getLastDescendant(!0):e,s=this.viewElements,a=s[0]&&this.gantt.data.compareElement(n,s[0])>0,r=s.length-1;r>=0;r--)if(s[r].isHidden()){s[r];this.outViewElement(r,!0)}a&&this.resetHeightSpan(),this.Selected&&this.removeSelectedElement(t),this.delayShowViewElements()}},scrollToElement:function(t,e){e=e?e:0,this.gantt.setScrollTop(Math.max(0,this.gantt.getElementViewTop(t)-e))},remove:function(){var t=this.gantt;delete t.getViewTop,delete t.getViewElements,delete t.getViewIndex,delete t.getElementViewTop,delete t.setScrollTop,delete t.scrollToElement,delete this.viewElements,Xt.prototype.remove.apply(this,arguments)}}),ze.prototype=new Xt,t(ze.prototype,{initialize:function(e){if(e.disableWorkingMask||!e.getTimePanel||!e.getCalList)return!1;var i=e.getTimePanel();if(!i)return!1;$(this,e.config.getConfigObj("SFGanttWorkingMask")),this.gantt=e;var n=this.div=e.container.ownerDocument.createElement("div");return t(n.style,{position:wi[178],fontSize:"0px",left:"0px",top:"0px",height:wi[89],width:wi[89],zIndex:10}),i.appendChild(n),this.listeners=[C(e,wi[101],this,this.onGanttInit),C(e,wi[94],this,this.reDraw),C(e,wi[93],this,this.reDraw),C(e,wi[153],this,this.reDraw)],this.reDraw(),!0},onGanttInit:function(){this.calendar=this.gantt.getData().getCalendar(),this.reDraw()},reDraw:function(){var t=this.gantt,e=(t.getScale(),t.getStartTime(),t.getCalList());e&&e[0]&&this.calendar&&this.showSegmentations(t.getScale(),t.getStartTime().valueOf(),e[0])},showSegmentations:function(e,i,n){if((this.cal!=n||!this.drawStart||Math.abs(i-this.drawStart)/e>1e4)&&(this.clear(),t(this,{scale:e,drawStart:i,cal:n}),this.div.style.left=this.gantt.getTimePanelPosition(i)+"px"),this.scale!=e){for(var s=this.div.firstChild;s;s=s.nextSibling)t(s.style,{left:(s.sTime-this.drawStart)/e+1+"px",width:(s.eTime-s.sTime)/e+"px"});this.div.style.left=this.gantt.getTimePanelPosition(this.drawStart)+"px",this.scale=e}var a=i+this.div.offsetWidth*e,r=this.div,o=r.firstChild?r.firstChild.sTime:Number.MAX_VALUE,l=r.lastChild?r.lastChild.eTime:Number.MIN_VALUE;if(i>(r.firstChild?r.firstChild.eTime:Number.MAX_VALUE)){for(;r.firstChild&&r.firstChild.eTime<i;)k(r.firstChild);o=r.firstChild?r.firstChild.sTime:Number.MAX_VALUE}if((r.lastChild?r.lastChild.sTime:Number.MIN_VALUE)>a){for(;r.lastChild&&r.lastChild.sTime>a;)k(r.lastChild);l=r.lastChild?r.lastChild.eTime:Number.MIN_VALUE}o>i&&(this.addMask(i,Math.min(o,a),n,r,e,-1),o=r.firstChild?r.firstChild.sTime:Number.MAX_VALUE,l=r.lastChild?r.lastChild.eTime:Number.MIN_VALUE),a>l&&this.addMask(Math.max(l,i),a,n,r,e,1)},addMask:function(e,i,n,s,a,r){for(var o=parseInt(n.getFloorTime(new Date(e)).valueOf()),l=this.div.ownerDocument,h=null;i>o;){var d=parseInt(n.getNextTime(new Date(o)).valueOf()),u=this.calendar.getWorkTime(new Date(o));if(u[0]>=d.valueOf()){var c=l.createElement("div");t(c,{sTime:o,eTime:d}),t(c.style,{position:wi[178],left:(o-this.drawStart)/a+1+"px",top:"0px",width:(d-o)/a+"px",height:wi[89]}),Q(c,this.gantt.imgPath+"map_mask"+this.gantt.imgType),-1==r?null==h?s.insertBefore(c,s.firstChild):null==h.nextSibling?s.appendChild(c):s.insertBefore(c,h.nextSibling):s.appendChild(c),h=c}o=d}},clear:function(){k(this.div,!0)}}),He.prototype=new Xt,t(He.prototype,{initialize:function(e,i){return this.gantt=e,this.levels=[3e4,3e5,6e5,24e5,72e5,144e5,576e5,1152e5,3456e5,10368e5],t(e,{getZoomScale:m(this,this.getZoomScale),zoomIn:m(this,this.zoomIn),zoomOut:m(this,this.zoomOut),zoomTo:m(this,this.zoomTo),getZoom:m(this,this.getZoom),show:m(this,this.show)}),e.showMap=e.show,this.listeners=[C(e,wi[101],this,this.onScaleChange),C(e,wi[93],this,this.onScaleChange)],!0},getZoomScale:function(t,e){return this.levels[this.getZoomIndex(t,e)]},getZoomIndex:function(t,e){e=e?e:0;for(var i=this.levels,n=i.length,s=0;n>s;s++){var a=i[s];if(a>=t)return s>0&&(1==e||0==e&&t/i[s-1]<a/t)?s-1:s}return n-1},onScaleChange:function(){this.zoomIndex=this.getZoomIndex(this.gantt.getScale())},zoomIn:function(){this.zoomTo(this.zoomIndex-1)},zoomOut:function(){this.zoomTo(this.zoomIndex+1)},zoomTo:function(t){if(this.levels[t]){var e=this.zoomIndex;this.zoomIndex=t,this.gantt.setScale(this.levels[t]),L(this,"zoom",[t,e])}},getZoom:function(){return this.zoomIndex},show:function(t,e){var i=this.levels[e];i=i?i:e;var n=this.gantt;t&&n.setStartTime(t),i&&n.setScale(i)},remove:function(){var t=this.gantt;delete t.getZoomScale,delete t.showMap,delete t.zoomIn,delete t.zoomOut,delete t.zoomTo,delete t.getZoom,delete t.show,Xt.prototype.remove.apply(this,arguments)}}),t(Re.prototype,{setWidth:function(t){this.width=parseInt(t)},setHeadText:function(t){this.headText=t},setHeadAlign:function(t){this.setHeadStyle({textAlign:t})},setHeadColor:function(t){this.setHeadStyle({color:t})},setHeadBgColor:function(t){this.setHeadStyle({backgroundColor:t})},setHeadStyle:function(e){t(this.headStyle,e)},setBodyAlign:function(t){this.setBodyStyle({textAlign:t})},setBodyColor:function(t){this.setBodyStyle({color:t})},setBodyBgColor:function(t){this.setBodyStyle({backgroundColor:t})},setBodyStyle:function(e){t(this.bodyStyle,e)},setInputHandle:function(t){this.inputFunc=t},setInputStyle:function(e){t(this.inputStyle,e)},setReadOnly:function(t){this.ReadOnly=t},showHead:function(e,i){return k(e,!0),t(e.style,this.headStyle),this.headFunc(e,i)},showBody:function(e,i,n){return k(e,!0),t(e.style,this.bodyStyle),this.bodyFunc(e,i,n)},showInput:function(e,i,n){return k(e,!0),t(e.style,this.bodyStyle),t(e.style,this.inputStyle),this.inputFunc(e,i,n)},checkUpdate:function(t){if(!this.bodyData)return!1;for(var e=this.bodyData.split(","),i=0;i<e.length;i++)for(var n=0;n<t.length;n++)if(t[n]==e[i])return!0;return!1},headFunc:function(t){t.innerHTML=this.headText},bodyFunc:function(t,e,i){var n=e[this.bodyData];n=typeof n!=wi[184]?n:"",t.appendChild(t.ownerDocument.createTextNode(n))},createInput:function(e){var i=e.ownerDocument.createElement(wi[59]);return t(i.style,{width:wi[89],height:wi[89],border:"solid 2px #000000",overflow:wi[102]}),x(i,wi[83],T),x(i,wi[180],T),x(i,wi[182],function(t){E(i.cml),i.cml=x(i,wi[62],T),T(t)}),x(i,wi[29],T),i.cml=x(i,wi[62],S),i},inputFunc:function(t,e,i){var n=this.inputData,s=this,a=e[this.inputData],r=this.createInput(t,s,i);r.value=typeof a!=wi[184]?a:"",x(r,wi[28],function(a){if(27==a.keyCode){var o=e[n];r.value=typeof o!=wi[184]?o:""}13==a.keyCode&&(e.setProperty(n,r.value),k(t,!0),s.showBody(t,e,i))}),x(r,wi[150],function(){e.setProperty(n,r.value)}),t.appendChild(r),r.focus()}}),t(Re,{getField:Ae,getFields:_e,setField:je,getTaskFields:Be,getResourceFields:Ve,getLinkFields:We,getTaskField:Ge,getResourceField:Ue,getLinkField:Xe,setTaskField:Ye,setResourceField:$e,setLinkField:Ze,addTaskField:Qe,init:qe}),Ke.prototype=new Re,t(Ke.prototype,{bodyFunc:function(t,e,i){if(!this.ReadOnly)return void this.inputFunc(t,e,i);var n=e[this.bodyData],s=i.gantt.config.getConfig(wi[27]);t.appendChild(t.ownerDocument.createTextNode(n?s[1]:s[0]))},inputFunc:function(t,e,i){var n=this.inputData,s=e[this.bodyData],a=t.ownerDocument.createElement(wi[59]);a.type=wi[58],t.appendChild(a),a.checked=!!s,x(a,wi[83],function(t){var i=M(t);i&&1!=i||(e.setProperty(n,a.checked),T(t))})}}),Je.prototype=new Re,t(Je.prototype,{bodyFunc:function(e,i,n){var s=i[this.bodyData],a=e.ownerDocument;s=typeof s!=wi[184]?s:"0";var r=a.createElement("div");t(r.style,{position:wi[104],width:"90%",height:wi[89],backgroundColor:wi[84],border:wi[61],textAlign:wi[91]}),e.appendChild(r);var l=a.createElement("div");if(t(l.style,{position:wi[178],left:"0px",top:"0px",width:s+"%",height:wi[89],backgroundColor:wi[60],zIndex:2}),r.appendChild(l),!this.ReadOnly){var h=a.createElement("div");t(h.style,{position:wi[178],left:s+"%",top:"0px",width:"2px",height:wi[89],backgroundColor:"blue",zIndex:3}),o(h,wi[88]),nt(h,m(this,this.onBarMove(i,r)),{container:r}),r.appendChild(h)}var d=a.createElement("span");t(d.style,{position:wi[104],zIndex:4}),d.appendChild(a.createTextNode(s+"%")),r.appendChild(d)},onBarMove:function(t,e){return function(i,n,s){var a=Math.min(Math.max(n[0],0),e.offsetWidth-2),r=Math.round(100*a/(e.offsetWidth-2));"end"!=s?(e.firstChild.style.width=a+"px",e.firstChild.nextSibling.style.left=a+"px",e.lastChild.nodeValue=r+"%"):t.setProperty(this.bodyData,r)}}}),ti.prototype=new Re,t(ti.prototype,{bodyFunc:function(t,e,i){var n=e[this.bodyData];if(n){var s="("+Ae(n.elementType,"UID").headText+" "+n.UID+") "+n.Name;t.appendChild(t.ownerDocument.createTextNode(s))}}}),ei.prototype=new Re,t(ei.prototype,{bodyFunc:function(t,e,i){if(!this.ReadOnly)return void this.inputFunc(t,e,i);var n=e[this.bodyData],s=i.gantt.config.getConfig(wi[27]);t.appendChild(t.ownerDocument.createTextNode(n?s[1]:s[0]))},inputFunc:function(t,e,i){var n=(this.inputData,e[this.bodyData]),s=t.ownerDocument.createElement(wi[59]);s.type=wi[58],t.appendChild(s),s.checked=!!n,x(s,wi[180],T),x(s,wi[182],T),x(s,wi[83],function(t){T(t),e.setProperty(wi[75],s.checked)})}}),ii.prototype=new Re,t(ii.prototype,{inputFunc:function(e,i,n){var s=this.inputData,a=i[s],r=P(e,n.container),o=e.ownerDocument.createElement("textarea");t(o.style,{position:wi[178],left:r[0]+"px",top:r[1]+"px",width:this.width-2+"px",height:"100px",border:wi[61],overflow:wi[102],zIndex:100}),x(o,wi[83],T),x(o,wi[180],T),x(o,wi[182],function(t){E(o.cml),o.cml=x(o,wi[62],T),T(t)}),x(o,wi[29],T),o.cml=x(o,wi[62],S),o.value=typeof a!=wi[184]?a:"",this.ReadOnly?o.disabled=!0:(x(o,wi[28],function(t){if(27==t.keyCode){var e=i[s];o.value=typeof e!=wi[184]?e:""}}),x(o,wi[150],function(){i.setProperty(s,o.value)})),x(o,"blur",function(){k(o)}),n.container.appendChild(o),o.focus()}}),ni.prototype=new Re,t(ni.prototype,{bodyFunc:function(t,e,i){var n=e[this.bodyData]?a(e[this.bodyData],i.gantt.config.getConfig("SFGanttField/dateShowFormat")):"";t.appendChild(t.ownerDocument.createTextNode(n))},inputFunc:function(t,e,i){if(this.disableSummaryEdit&&e.Summary)return k(t,!0),void this.showBody(t,e,i);var s=this.inputData,r=this,o=e[r.inputData];o=typeof o!=wi[184]?o:new Date;var l=Re.createInput(t,r,i),h=i.gantt.config.getConfig(wi[26]);l.value=a(o,h.dateInputFormat),x(l,wi[28],function(o){if(27==o.keyCode){var d=e[r.inputData];l.value=a(d,h.dateInputFormat)}if(13==o.keyCode)if(l.value){var d=n(l.value);d&&!isNaN(d)?(e.setProperty(s,d),k(t,!0),r.showBody(t,e,i)):(h.noticeWrongFormat&&alert(h.noticeWrongFormat),l.focus())}else e.setProperty(s,null)}),x(l,wi[150],function(){if(l.value){var t=n(l.value);t&&!isNaN(t)?e.setProperty(s,t):(h.noticeWrongFormat&&alert(h.noticeWrongFormat),l.focus())}else e.setProperty(s,null)}),t.appendChild(l),l.focus()}}),si.prototype=new Re,t(si.prototype,{bodyFunc:function(t,e,i){var n=this.bodyData.split(","),s=e[n[0]],a=e[n[1]],o=0;if(s&&a){for(var l=i.gantt.data.getCalendar(),h=s,d=-1;a>h;){var u=l.getWorkTime(h),c=[parseInt(u[0]/1e3/60/60/24),parseInt(u[1]/1e3/60/60/24)];o+=c[1]-c[0]+1,d==c[0]&&o--,d=c[1],h=u[1]}t.appendChild(t.ownerDocument.createTextNode(r(i.gantt.config.getConfig("SFGanttField/durationFormat"),o)))}}}),ai.prototype=new Re,t(ai.prototype,{_getOptions:function(t,e){var i=this.getOptions(t,e);if(i&&!i.length){var n,s=i;i=[];for(n in s)typeof s[n]==wi[187]&&i.push([n,s[n]])}return i},getOptions:function(){return this.options},bodyFunc:function(t,e,i){for(var n=this.inputData,s=this._getOptions(e,i),a=t.ownerDocument,r=e[n],o=0;o<s.length;o++){if(typeof s[o]==wi[190]&&s[o].length>1&&s[o][0]==r)return void t.appendChild(a.createTextNode(s[o][1]));if(typeof s[o]!=wi[190]&&o==r)return void t.appendChild(a.createTextNode(s[o]))}t.appendChild(a.createTextNode(typeof r!=wi[184]?r:""))},inputFunc:function(t,e,i){var n=this.inputData,s=this._getOptions(e,i),a=e[n],r=t.ownerDocument.createElement("select");x(r,wi[83],T),
x(r,wi[180],T),x(r,wi[182],function(t){E(r.cml),r.cml=x(r,wi[62],T),T(t)}),x(r,wi[29],T),r.cml=x(r,wi[62],S);for(var o=0;o<s.length;o++){var l=s[o];typeof l!=wi[190]&&(l=[o,l]),r.options.add(new Option(l[1],l[0]))}r.value=typeof a!=wi[184]?a:"",x(r,wi[150],function(){e.setProperty(n,r.value)}),t.appendChild(r),r.focus()}}),ri.prototype=new Re,t(ri.prototype,{bodyFunc:function(t,e,i){var n=t.ownerDocument;if(i)for(var s=e;s;s=s.getParent())s==e&&e.Summary||t.appendChild(n.createTextNode(" "));if(e.Summary&&i&&(!i.gantt.hideSummary||!i.gantt.inline)){var a=this.getCollapseImg(i.gantt,e.Collapse);t.appendChild(a),x(a,wi[83],function(t){T(t),e.setProperty(wi[135],!e.Collapse)})}t.appendChild(n.createTextNode(e.Name?e.Name:""))},getCollapseImg:function(e,i){var n=e.container.ownerDocument.createElement("img");return Q(n,e.imgPath+"collapse_"+(i?"close":"open")+e.imgType),t(n.style,{width:"9px",height:"9px",margin:"1px",cursor:wi[189]}),n}}),oi.prototype=new Re,t(oi.prototype,{headFunc:function(e,i){var n=e.ownerDocument.createElement("img");t(n,{width:16,height:16}),Q(n,i.gantt.imgPath+"icon_taskstatus"+i.gantt.imgType),e.appendChild(n)},bodyFunc:function(t,e,i){t.vAlign="middle";for(var n,s=0;s<this.icons.length;s++)(n=this.icons[s].showHandle.apply(this,[e,i.gantt]))&&t.appendChild(n)},createImage:function(e){var i=e.container.ownerDocument.createElement("img");return t(i,{width:16,height:16,border:0}),i},addIcon:function(t,e){if(e){for(var i=e.split(","),n=i.length-1;n>=0;n--)h(this.bodyDatas,i[n])||this.bodyDatas.push(i[n]);this.bodyData=this.bodyDatas.join(",")}this.icons.push({showHandle:t})}}),t(li.prototype,{initialize:function(){return!1},show:function(){},onScale:function(){},onUpdate:function(){},onMouseDown:function(){},getTooltip:function(){},remove:function(){},depose:function(){}}),hi.prototype=new li,t(hi.prototype,{initialize:function(e){return t(this,{control:e,name:"MilestoneHead"}),!0},show:function(t,e){var i=t.Start.valueOf(),n=t.Finish.valueOf();if(i==n){var s=this.control,a=s.gantt,r=e[this.name]=e.taskDiv.ownerDocument.createElement("img");r.style.cssText=wi[25]+(s.taskHeight-1)+wi[44]+-Math.floor((s.taskHeight-1)/2)+wi[24]+Math.ceil(s.taskPadding/2)+wi[23];var o=a.imgPath+"task_head_3"+a.imgType,l=s.getTaskStyle(t);l.milestoneImage&&(o=l.milestoneImage),Q(r,o),e.taskDiv.appendChild(r)}},getTooltip:function(t,e,i,n){if(n.target!=e[this.name]||!this.control.taskNoticeFields)return!1;var s=this.control;if(i.bindObject==t&&i.bindType==wi[169])return!1;var a=s.getTaskTooltipContent(t,s.tooltipTitle.milestone,s.taskNoticeFields.split(","));return i.bindObject=t,i.bindType=wi[169],i.setContent(a),!0},onUpdate:function(t,e,i){var n=(this.control.gantt,t.Start.valueOf()),s=t.Finish.valueOf();if(n!=s)return void this.remove(t,e);if(h(i,wi[136]))return this.remove(t,e),void this.show(t,e);var a=e[this.name];a||this.show(t,e)},remove:function(t,e){k(e[this.name]),delete e[this.name]}}),di.prototype=new li,t(di.prototype,{initialize:function(e){return t(this,{control:e,name:"SummaryHead"}),!0},show:function(t,e,i){var n=t.Start.valueOf(),s=t.Finish.valueOf(),a=e.taskDiv.ownerDocument;if(n!=s&&t.Summary){var r=this.control,o=r.gantt,l=e[this.name]=[],h=o.imgPath+"task_head_2"+o.imgType;i=i?i:o.getScale();var d=r.getTaskStyle(t);d.summaryImage&&(h=d.summaryImage);for(var u=0;2>u;u++){var c=-Math.floor((r.taskHeight-1)/2);u>0&&(c+=(s-n)/i);var g=a.createElement("img");l.push(g),g.style.cssText=wi[25]+(r.taskHeight-1)+wi[44]+c+wi[24]+Math.ceil(r.taskPadding/2)+wi[23],Q(g,h),e.taskDiv.appendChild(g)}}},onUpdate:function(t,e,i){var n=this.control.gantt,s=t.Start.valueOf(),a=t.Finish.valueOf(),r=this.control;if(s==a||!t.Summary)return void this.remove(t,e);var o=e[this.name];o?(h(i,wi[148])||h(i,wi[149]))&&(e[this.name][1].style.left=-Math.floor((r.taskHeight-1)/2)+(a-s)/n.getScale()+"px"):this.show(t,e)},onScale:function(t,e,i){var n=e[this.name];n&&(n[1].style.left=-Math.floor((this.control.taskHeight-1)/2)+(t.Finish-t.Start)/i+"px")},remove:function(t,e){var i=e[this.name];i&&(k(i[0]),k(i[1])),delete e[this.name]}}),ui.prototype=new li,t(ui.prototype,{initialize:function(e){return t(this,{control:e,name:"BarSummary"}),!0},show:function(e,i,n){var s=e.Start.valueOf(),a=e.Finish.valueOf();if(!(s>=a)&&e.Summary){var r=this.control,o=r.gantt,l=i.taskDiv.ownerDocument.createElement("div");n=n?n:o.getScale(),i[this.name]=l,l.style.cssText=wi[22]+(a-s)/n+wi[24]+Math.ceil(r.taskPadding/2)+wi[43]+Math.floor(r.taskHeight/2-1)+"px;";var h=r.getTaskStyle(e);h.summaryBarStyle&&t(l.style,h.summaryBarStyle),i.taskDiv.appendChild(l)}},getTooltip:function(t,e,i,n){if(n.target!=e[this.name]||!this.control.taskNoticeFields)return!1;var s=this.control;if(i&&i.bindObject==t&&i.bindType==wi[169])return!1;var a=s.getTaskTooltipContent(t,s.tooltipTitle.summary,s.taskNoticeFields.split(","));return i.bindObject=t,i.bindType=wi[169],i.setContent(a),!0},onUpdate:function(t,e,i){var n=this.control.gantt,s=t.Start.valueOf(),a=t.Finish.valueOf();if(s>=a||!t.Summary)return void this.remove(t,e);var r=e[this.name];if(r){var o=r.style;(h(i,wi[148])||h(i,wi[149]))&&(o.width=(a-s)/n.getScale()+"px")}else this.show(t,e,n.getScale())},onScale:function(t,e,i){var n=e[this.name];n&&(n.style.width=(t.Finish-t.Start)/i+"px")},remove:function(t,e){k(e[this.name]),delete e[this.name]}}),ci.prototype=new li,t(ci.prototype,{initialize:function(e){return t(this,{control:e,name:"BarNormal"}),!0},show:function(e,i,n){var s=e.Start.valueOf(),a=e.Finish.valueOf();if(!(s>=a||e.Summary)){var r=this.control,o=r.gantt,l=i.taskDiv.ownerDocument.createElement("div");n=n?n:o.getScale(),i[this.name]=l;var h=r.taskHeight;o.isTracking&&(h/=2),l.style.cssText=wi[22]+(a-s)/n+wi[24]+Math.ceil(r.taskPadding/2)+wi[43]+h+"px;cursor:move;";var d=r.getTaskStyle(e);d.barStyle&&t(l.style,d.barStyle),i.taskDiv.appendChild(l)}},onUpdate:function(t,e,i){var n=this.control.gantt,s=t.Start.valueOf(),a=t.Finish.valueOf();if(s>=a||t.Summary)return void this.remove(t,e);var r=e[this.name];if(r){if(h(i,wi[136]))return this.remove(t,e),void this.show(t,e);var o=r.style;(h(i,wi[148])||h(i,wi[149]))&&(r.style.left="0px",o.width=(a-s)/n.getScale()+"px")}else this.show(t,e)},getTooltip:function(t,e,i,n){if(n.target!=e[this.name]||!this.control.taskNoticeFields)return!1;var s=this.control;if(i&&i.bindObject==t&&i.bindType==wi[169])return!1;var a=s.getTaskTooltipContent(t,s.tooltipTitle.task,s.taskNoticeFields.split(","));return i.bindObject=t,i.bindType=wi[169],i.setContent(a),!0},onScale:function(t,e,i){var n=e[this.name];n&&(n.style.width=(t.Finish-t.Start)/i+"px")},onMouseDown:function(t,e,i){i.target==e[this.name]&&(L(e[this.name],wi[83],[]),new it(this.control.div,m(this,this.onMove),{interval:32}).onMouseDown(i))},onMove:function(t,e,i){var n=this.control,s=n.gantt,a=n.dragTask,r=s.getElementDrawObj(a)[n.proTag],o=[e[0]-t[0],e[1]-t[1]];if(!n.dragType){if(Math.sqrt(Math.pow(o[0],2)+Math.pow(o[1],2))<5)return;if(0==o[0]||o[1]/o[0]>2&&!n.gantt.readOnly&&n.gantt.data.canAddLink(a)&&!n.gantt.disableAddLink&&!n.disableDragAddLink){n.dragType=wi[167],n.startHeight=r.taskDiv.offsetTop;var l={Type:1,PredecessorTask:a};if(n.dragLink=l,s.getTooltip){var h=s.getTooltip();s.getTooltip().setEnable(!1),h.setContent(n.getLinkTooltipContent(l)),h.show([0,0])}r[this.name].style.borderStyle=wi[172]}else{if(!(0==o[1]||o[0]/o[1]>2)||s.readOnly||!a.canSetProperty(wi[148])||n.gantt.disableUpdateTask||n.disableDragMoveTask)return;if(n.dragType=wi[148],s.getTooltip){var h=s.getTooltip();h.setContent(n.getTaskTooltipContent(a,n.tooltipTitle.task,[wi[148],wi[149]])),s.getTooltip().setEnable(!1);var d=P(r.taskDiv,s.container);d[1]+=s.getElementDrawObj(a).height,h.show(d)}L(s,"taskbardragstart",[a])}}if(n.dragType==wi[148]){var u=o[0]*s.getScale(),c=new Date(a.Start.valueOf()+u),g=new Date(a.Finish.valueOf()+u);if("end"!=i){var p=e[0]+s.getMapPanel().offsetLeft;0>=p||p>s.getLayout(wi[95]).offsetWidth?(this.dmDir=0>=p?-1:1,this.lastOffset=o[0],this.dmt||(this.dmt=window.setInterval(m(this,this.onTime),32))):this.dmt&&(window.clearInterval(this.dmt),delete this.dmt),r[this.name].style.left=s.getMapPanelPosition(c)-s.getTimePanelPosition(a.Start)+"px",s.getTooltip&&(s.getTooltip().setContent(n.getTaskTooltipContent({Start:c,Finish:g},n.tooltipTitle.task,[wi[148],wi[149]])),s.getTooltip().setEnable(!1))}else this.dmt&&(window.clearInterval(this.dmt),delete this.dmt),a.setProperty(wi[149],g),a.setProperty(wi[148],c),L(s,"taskbardragend",[a]),s.getTooltip&&s.getTooltip().setEnable(!0),delete n.dragType}else if(n.dragFlagLine&&k(n.dragFlagLine),"end"!=i){var u=P(r.taskDiv,n.div),f=[];f.push([t[0],t[1]]),f.push([e[0],e[1]]);for(var v=Number.MAX_VALUE,y=Number.MAX_VALUE,w=0,S=0,T=0;T<f.length;T++)v=Math.min(v,f[T][0]),y=Math.min(y,f[T][1]),w=Math.max(w,f[T][0]),S=Math.max(S,f[T][1]);var C=this.getGraphics();n.div.appendChild(C.div),C.setLineColor(wi[68]),C.setLineWeight(1),C.setPosition({x:v,y:y}),C.start({x:0,y:0},1,{x:w-v,y:S-y}),C.moveTo({x:f[0][0]-v,y:f[0][1]-y});for(var T=1;T<f.length;T++)C.lineTo({x:f[T][0]-v,y:f[T][1]-y});C.finish(),n.dragFlagLine=C.div;var b=e[1]-n.startHeight,x=a;for(0>b&&(x=x.getPreviousViewTask());x;){var E=b+(0>b?1:-1)*s.getElementHeight(x);if(0>=b*E)break;x=b>0?x.getNextViewTask():x.getPreviousViewTask(),b=E}for(var D=s.getTimeByMapPanelPosition(e[0]);x&&!(x.Start<=D&&D<=x.Finish);)x=b>0?x.getNextViewTask():x.getPreviousViewTask(),s.getElementHeight(x)>0&&(x=null);if(x==a&&(x=null),x){var F=s.getElementDrawObj(x)[n.proTag].taskDiv,I=P(F,n.div);(e[0]<I[0]-10||e[0]>I[0]+F.offsetWidth+10)&&(x=null)}var N,M=n.dragLink.SuccessorTask;M!=x&&(x&&(N=s.getElementDrawObj(x)[n.proTag],N&&N[this.name]&&(N[this.name].style.borderStyle=wi[172])),M&&(N=s.getElementDrawObj(M)[n.proTag],N&&N[this.name]&&(N[this.name].style.borderStyle=wi[176])),n.dragLink.SuccessorTask=x,s.getTooltip&&(s.getTooltip().setContent(n.getLinkTooltipContent(n.dragLink)),s.getTooltip().setEnable(!1)))}else{var M=n.dragLink.SuccessorTask;if(n.dragLink&&M&&M.addPredecessorLink(a,1),M){var N=s.getElementDrawObj(M)[n.proTag];N&&N[this.name]&&(N[this.name].style.borderStyle=wi[176])}r[this.name].style.borderStyle=wi[176],s.getTooltip&&s.getTooltip().setEnable(!0),delete n.dragType,delete n.dragTask}},onTime:function(){var t=this.control,e=t.gantt,i=t.dragTask,n=e.getElementDrawObj(i)[t.proTag];e.setStartTime(new Date(e.getStartTime().valueOf()+6*e.getScale()*this.dmDir)),this.lastOffset+=6*this.dmDir;var s=new Date(i.Start.valueOf()+this.lastOffset*e.getScale());n[this.name].style.left=e.getMapPanelPosition(s)-e.getTimePanelPosition(i.Start)+"px"},getGraphics:function(){for(var t=[ht,ut,at,ot],e=0;e<t.length;e++)if(t[e].isSupport())return new t[e];return new st(!0)},remove:function(t,e){k(e[this.name]),delete e[this.name]}}),gi.prototype=new li,t(gi.prototype,{initialize:function(e){var i,n=this.fields={},s=!1,a=["Center","Top","Bottom"];e.gantt.inline||(a=a.concat("Left","Right"),(i=e.taskBarField)&&(n.Right=Ge(i),s||(s=!0)));for(var r=0;r<a.length;r++)(i=e["taskBar"+a[r]+"Field"])&&(n[a[r]]=Ge(i),s||(s=!0));return s?(t(this,{control:e,name:"Text"}),!0):!1},getStyle:function(t,e,i){var n=t.Start.valueOf(),s=t.Finish.valueOf(),a=this.control.gantt,r=0,o=Math.max((s-n)/e,1),l=Math.ceil((a.itemHeight-a.fontSize)/2),h=wi[103],d=wi[102];switch(i){case"Left":o=1e3,r=-1010,h=wi[86];break;case"Right":o=0,r=(s-n)/e+10,d="visible";break;case"Top":l-=Math.max(a.fontSize,a.itemHeight/4)+2,h=wi[91];break;case"Bottom":l+=Math.max(a.fontSize,a.itemHeight/4)+2,h=wi[91];break;case"Center":h=wi[91];break;default:return}return{left:r+"px",top:l+"px",width:o?o+"px":"auto",textAlign:h,overflow:d}},show:function(e,i,n){var s=this.control,a=s.gantt,r=(a.getElementDrawObj(e).height,this.fields);n=n?n:a.getScale();for(var o in r){var l=this.getStyle(e,n,o);l&&(div=i.taskDiv.ownerDocument.createElement("div"),div.noWrap=!0,i[this.name+o]=div,r[o].showBody(div,e,s),div.style.cssText="position:absolute;white-space:nowrap;z-index:200;cursor:default;font-weight:bolder;font-size:"+a.fontSize+"px;",t(div.style,l),i.taskDiv.appendChild(div))}},onUpdate:function(e,i,n){var s=this.control,a=s.gantt,r=r?r:a.getScale(),o=this.fields;for(var l in o){var d=this.getStyle(e,r,l);if(d){var u=i[this.name+l];if(!u)return void this.show(e,i);(h(n,wi[148])||h(n,wi[149]))&&t(u.style,d),o[l].checkUpdate(n)&&o[l].showBody(u,e,s)}}},onScale:function(e,i,n){var s=this.fields;for(var a in s){var r=this.getStyle(e,n,a);if(r){var o=i[this.name+a];o&&t(o.style,r)}}},remove:function(t,e){var i=this.fields;for(var n in i)k(e[this.name+n]),delete e[this.name+n]}}),pi.prototype=new li,t(pi.prototype,{initialize:function(e){return e.gantt.readOnly||e.gantt.disableUpdateTask||e.disableDragResizeTask?!1:(t(this,{control:e,name:"Resize"}),!0)},show:function(t,e,i){var n=t.Start.valueOf(),s=t.Finish.valueOf(),a=this.control,r=a.gantt,o=r.getElementDrawObj(t).height;if(i=i?i:r.getScale(),!(n>=s||t.Summary||r.readOnly)&&t.canSetProperty(wi[149])){var l=e.taskDiv.ownerDocument.createElement("div");e[this.name]=l,l.style.cssText=wi[25]+(a.taskHeight-1)+wi[44]+((s-n)/i-Math.floor((a.taskHeight-1)/2))+wi[24]+Math.ceil(a.taskPadding/2)+wi[43]+(o/2+2)+"px;z-index:150;font-size:0px;cursor:w-resize;",e.taskDiv.appendChild(l)}},onUpdate:function(t,e,i){var n=t.Start.valueOf(),s=t.Finish.valueOf(),a=this.control,r=a.gantt;r.getElementHeight(t);if(n>=s||t.Summary||r.readOnly||!t.canSetProperty(wi[149])||r.disableUpdateTask||a.disableDragResizeTask)return void this.remove(t,e);var o=e[this.name];if(o){var l=o.style;(h(i,wi[148])||h(i,wi[149]))&&(l.left=(s-n)/r.getScale()-Math.floor((a.taskHeight-1)/2)+"px")}else this.show(t,e)},onScale:function(t,e,i){var n=e[this.name];n&&(n.style.left=(t.Finish-t.Start)/i+"px")},onMouseDown:function(t,e,i){if(i.target==e[this.name]){var n=this.control;new it(n.div,m(this,this.onResizeMove)).onMouseDown(i)}},onResizeMove:function(t,e,i){var n=this.control,s=n.gantt,a=n.dragTask,r=s.getElementDrawObj(a)[n.proTag].BarNormal,o=s.getScale();if(i==wi[179]&&s.getTooltip){var l=s.getTooltip();l.setContent(n.getTaskTooltipContent(a,n.tooltipTitle.task,[wi[148],wi[149]]));var h=P(r,s.container);h[1]+=s.getElementDrawObj(a).height,l.show(h)}var d=a.Finish.valueOf()+[e[0]-t[0]]*o;d=Math.max(a.Start.valueOf(),d),"end"!=i?(r.style.width=(d-a.Start.valueOf())/o+"px",s.getTooltip&&s.getTooltip().setContent(n.getTaskTooltipContent({Start:a.Start,Finish:new Date(d)},n.tooltipTitle.task,[wi[148],wi[149]]))):a.setProperty(wi[149],new Date(d))||(r.style.width=(a.Finish.valueOf()-a.Start.valueOf())/o+"px")},remove:function(t,e){k(e[this.name]),delete e[this.name]}}),fi.prototype=new li,t(fi.prototype,{initialize:function(e){return e.gantt.readOnly||e.gantt.disableUpdateTask||e.disableDragChangePercent?!1:(t(this,{control:e,name:"PercentChange"}),!0)},show:function(t,e){var i=t.Start.valueOf(),n=t.Finish.valueOf(),s=t.PercentComplete,a=this.control,r=a.gantt,o=a.taskHeight;if(!(i>=n||t.Summary||r.readOnly)&&t.canSetProperty(wi[142])){s=s?s:0;var h=(n-i)/r.getScale()*s/100,d=e.taskDiv.ownerDocument.createElement("div");e[this.name]=d,d.style.cssText=wi[25]+Math.floor((a.taskHeight-1)/2)+"px;background-color:#FFFFFF;left:"+h+wi[24]+Math.ceil(a.taskPadding/2)+wi[43]+(o+2)+"px;z-index:250;font-size:0px;cursor:col-resize;",e.taskDiv.appendChild(d),l(d,.01)}},onUpdate:function(t,e,i){var n=t.Start.valueOf(),s=t.Finish.valueOf(),a=t.PercentComplete,r=this.control,o=r.gantt;if(n>=s||t.Summary||o.readOnly||!t.canSetProperty(wi[142])||o.disableUpdateTask||r.disableDragChangePercent)return void this.remove(t,e);var l=e[this.name];if(l){var d=l.style,a=a?a:0;(h(i,wi[142])||h(i,wi[148])||h(i,wi[149]))&&(d.left=(s-n)/o.getScale()*a/100+"px")}else this.show(t,e)},onScale:function(t,e,i){var n=e[this.name],s=t.PercentComplete;s=s?s:0,n&&(n.style.left=(t.Finish-t.Start)/this.control.gantt.getScale()*s/100+"px")},onMouseDown:function(t,e,i){if(i.target==e[this.name]){var n=this.control;new it(n.div,m(this,this.onPercentMove)).onMouseDown(i)}},onPercentMove:function(t,e,i){var n=this.control,s=n.gantt,a=n.dragTask,r=s.getElementDrawObj(n.dragTask)[n.proTag],o=r.Percent;if(o){var l=a.PercentComplete,h=a.Start,d=a.Finish,u=(d-h)/s.getScale();if(l||(l=0),i==wi[179]&&s.getTooltip){var c=s.getTooltip();c.setContent(n.getTaskTooltipContent(a,n.tooltipTitle.progress,["name",wi[142]]));var g=P(r.BarNormal,s.container);g[1]+=s.getElementDrawObj(a).height,c.show(g)}if("end"!=i)l=Math.round(l+100*(e[0]-t[0])/u),l=Math.min(Math.max(0,l),100),o.style.width=(d-h)/s.getScale()*l/100+"px",s.getTooltip&&s.getTooltip().setContent(n.getTaskTooltipContent({PercentComplete:l,Name:a.Name},n.tooltipTitle.progress,["name",wi[142]]));else{var p=parseInt(l+100*(e[0]-t[0])/u);p=Math.min(Math.max(0,p),100),a.setProperty(wi[142],p)||(l=a.getProperty(wi[142]),l||(l=0),o.style.width=(d-h)/s.getScale()*l/100+"px")}}},remove:function(t,e){k(e[this.name]),delete e[this.name]}}),mi.prototype=new li,t(mi.prototype,{initialize:function(e){return t(this,{control:e,name:wi[21]}),!0},show:function(e,i){var n=e.Start.valueOf(),s=e.Finish.valueOf();if(!(n>=s||e.Summary)){var a=this.control,r=a.gantt,o=i.taskDiv.ownerDocument.createElement("div"),l=a.taskHeight,h=e.PercentComplete;r.isTracking&&(l=Math.floor(l/2)),h=h?h:0;var d=(s-n)/r.getScale()*h/100;o.style.cssText="position:absolute;font-size:0px;z-index:200;left:0px;width:"+d+wi[24]+Math.ceil(a.taskPadding/2+l/4+1)+wi[43]+l/2+"px;";var u=a.getTaskStyle(e);u.percentBarStyle&&t(o.style,u.percentBarStyle),i.taskDiv.appendChild(o),i[this.name]=o}},getTooltip:function(t,e,i,n){if(n.target!=e[this.name]||!this.control.taskProgressNoticeFields)return!1;var s=this.control;if(i&&i.bindObject==t&&i.bindType==wi[21])return!1;var a=s.getTaskTooltipContent(t,s.tooltipTitle.progress,s.taskProgressNoticeFields.split(","));return i.bindObject=t,i.bindType=wi[21],i.setContent(a),!0},onUpdate:function(t,e,i){var n=t.Start.valueOf(),s=t.Finish.valueOf();if(n>=s||t.Summary)return void this.remove(t,e);var a=e[this.name];if(a){var r=a.style;if(h(i,wi[142])||h(i,wi[148])||h(i,wi[149])){var o=t.PercentComplete;o=o?o:0,r.width=(s-n)/this.control.gantt.getScale()*o/100+"px"}}else this.show(t,e)},onScale:function(t,e,i){var n=e[this.name],s=t.PercentComplete;s=s?s:0,n&&(n.style.width=(t.Finish-t.Start)/this.control.gantt.getScale()*s/100+"px")},remove:function(t,e){k(e[this.name]),delete e[this.name]}}),vi.prototype=new li,t(vi.prototype,{initialize:function(e){return e.gantt.isTracking?(t(this,{control:e,name:"BarTrack"}),!0):!1},show:function(e,i,n){if(e.BaselineStart&&e.BaselineFinish){var s=e.BaselineStart.valueOf(),a=e.BaselineFinish.valueOf();if(!(s>=a||e.Summary)){var r=this.control,o=r.gantt,l=i.taskDiv.ownerDocument.createElement("div");n=n?n:o.getScale(),i[this.name]=l;var h=r.taskHeight;l.style.cssText="position:absolute;font-size:0px;z-index:100;left:"+(s-e.Start.valueOf())/n+"px;width:"+(a-s)/n+wi[24]+(Math.ceil(r.taskPadding/2)+h/2)+wi[43]+h/2+"px;";var d=r.getTaskStyle(e);d.trackBarStyle&&t(l.style,d.trackBarStyle),i.taskDiv.appendChild(l)}}},onUpdate:function(t,e,i){if(t.BaselineStart&&t.BaselineFinish){var n=this.control.gantt,s=t.BaselineStart,a=t.BaselineFinish;if(!s||!a||s.valueOf()>=a.valueOf()||t.Summary)return void this.remove(t,e);var r=e[this.name];if(r){if(h(i,wi[136]))return this.remove(t,e),void this.show(t,e);var o=r.style;(h(i,wi[132])||h(i,wi[131]))&&(o.width=(a-s)/n.getScale()+"px"),(h(i,wi[148])||h(i,wi[132]))&&(o.left=(s-t.Start.valueOf())/n.getScale()+"px")}else this.show(t,e)}},getTooltip:function(t,e,i,n){if(n.target!=e[this.name]||!this.control.taskNoticeFields)return!1;var s=this.control;if(i&&i.bindObject==t&&i.bindType==wi[169])return!1;var a=s.getTaskTooltipContent(t,s.tooltipTitle.task,s.taskTrackingNoticeFields.split(","));return i.bindObject=t,i.bindType=wi[169],i.setContent(a),!0},onScale:function(t,e,i){var n=e[this.name];n&&(n.style.width=(t.BaselineFinish-t.BaselineStart)/i+"px",n.style.left=(t.BaselineStart-t.Start.valueOf())/i+"px")},remove:function(t,e){k(e[this.name]),delete e[this.name]}}),yi.prototype=new li,t(yi.prototype,{initialize:function(e){return e.gantt.isTracking?(t(this,{control:e,name:"MilestoneTrackHead"}),!0):!1},show:function(t,e){if(t.BaselineStart&&t.BaselineFinish){var i=t.BaselineStart.valueOf(),n=t.BaselineFinish.valueOf();if(i==n){var s=this.control,a=s.gantt,r=e[this.name]=e.taskDiv.ownerDocument.createElement("img");r.style.cssText=wi[25]+(s.taskHeight-1)+wi[44]+-Math.floor((s.taskHeight-1)/2)+wi[24]+Math.ceil(s.taskPadding/2)+wi[23];var o=a.imgPath+"task_head_3_hollow"+a.imgType,l=s.getTaskStyle(t);l.milestoneTrackImage&&(o=l.milestoneTrackImage),Q(r,o),e.taskDiv.appendChild(r)}}},getTooltip:function(t,e,i,n){if(n.target!=e[this.name]||!this.control.taskNoticeFields)return!1;var s=this.control;if(i.bindObject==t&&i.bindType==wi[169])return!1;var a=s.getTaskTooltipContent(t,s.tooltipTitle.milestone,s.taskTrackingNoticeFields.split(","));return i.bindObject=t,i.bindType=wi[169],i.setContent(a),!0},onUpdate:function(t,e,i){if(t.BaselineStart&&t.BaselineFinish){var n=(this.control.gantt,t.BaselineStart),s=t.BaselineFinish;if(!n||!s||n.valueOf()!=s.valueOf())return void this.remove(t,e);if(h(i,wi[136]))return this.remove(t,e),void this.show(t,e);var a=e[this.name];a||this.show(t,e)}},remove:function(t,e){k(e[this.name]),delete e[this.name]}});var Si=function(t){return!0};return Si("Thu Dec 2 22:00:51 UTC+0800 2010")?(t(window,{SFGlobal:e,SFEvent:f,SFAjax:R,SFConfig:X,SFImgLoader:Z,SFWorkingCalendar:K,SFDragObject:it,SFGraphics:st,SFGraphicsCanvas:at,SFGraphicsDiv:ot,SFGraphicsSvg:ht,SFGraphicsVml:ut,SFData:gt,SFDataElement:pt,SFDataTreeElement:ft,SFDataTask:mt,SFDataLink:vt,SFDataAssignment:yt,SFDataResource:wt,SFDataRender:St,SFDataAdapter:zt,SFDataXmlBase:Ht,SFDataXml:Rt,SFDataProject:At,SFDataComponent:_t,SFDataCalculateTimeComponent:jt,SFDataOutlineComponent:Bt,SFDataIDComponent:Vt,SFDataReadOnlyComponent:Wt,SFDataLogging:Gt,SFGantt:Ut,SFGanttControl:Xt,SFGanttCalendarItem:Yt,SFMenuItem:$t,SFGanttAutoResizeControl:Zt,SFGanttBodyHeightControl:Qt,SFGanttCalDiv:qt,SFGanttCalendarControl:Kt,SFGanttChangeEventControl:Jt,SFGanttCollapseControl:te,SFGanttCursorControl:ee,SFGanttDragResizeControl:ne,SFGanttDragZoomControl:se,SFGanttElementList:ae,SFGanttElementSelectControl:re,SFGanttFieldList:oe,SFGanttHelpLinkControl:le,SFGanttLayoutControl:he,SFGanttLinksMap:de,SFGanttProgressLine:ue,SFGanttListScrollNotice:ce,SFGanttLogoControl:ge,SFGanttContextMenuControl:pe,SFGanttDefaultMenuControl:fe,SFGanttDialogControl:me,SFGanttPrintControl:ve,SFGanttScrollControl:ye,SFGanttScrollerControl:we,SFGanttDivScroller:Se,SFGanttTimeScroller:Te,SFGanttSelectTaskOperateControl:Ce,SFGanttSizeLimitControl:ke,SFGanttTasksMap:be,SFGanttTimeControl:xe,SFGanttMapPanel:Ee,SFGanttTimePanel:De,SFGanttTimeLine:Fe,SFGanttTimeScrollNotice:Pe,SFGanttTimeSegmentation:Ie,SFGanttTooltipControl:Ne,SFGanttDrawControl:Me,SFGanttViewItemsControl:Oe,SFGanttWorkingMask:ze,SFGanttZoomControl:He,SFGanttField:Re,SFGanttFieldBool:Ke,SFGanttFieldPercent:Je,SFGanttFieldElement:ti,SFGanttFieldSelected:ei,SFGanttFieldLongText:ii,SFGanttFieldDateTime:ni,SFGanttFieldDuration:si,SFGanttFieldSelecter:ai,SFGanttFieldTreeName:ri,SFGanttFieldIcon:oi,SFGanttMapItem:li,SFGanttMapMilestoneHead:hi,SFGanttMapSummaryHead:di,SFGanttMapBarSummary:ui,SFGanttMapBarNormal:ci,SFGanttMapText:gi,SFGanttMapResize:pi,SFGanttMapPercentChange:fi,SFGanttMapPercent:mi,SFGanttMapBarTrack:vi,SFGanttMapMilestoneTrackHead:yi}),window._SFGantt_config={SFGlobal:{weekStrs:["日","一","二","三","四","五","六"]},SFData:{autoCalculateTime:!0,ignoreReadOnly:!1,initComponents:"SFDataCalculateTimeComponent,SFDataReadOnlyComponent",taskReadonlyIgnoreProperty:wi[20],resourceReadonlyIgnoreProperty:wi[20],linkReadonlyIgnoreProperty:wi[19],assignmentReadonlyIgnoreProperty:wi[19]},SFDataProject:{saveChange:!1},SFDataXml:{saveChange:!0},SFGantt:{imgPath:"img/",listWidth:200,imgType:".gif",headHeight:36,footHeight:17,spaceWidth:8,idCellWidth:36,idCellBgColor:wi[18],listFocusColor:wi[42],itemHeight:24,fontSize:12,bodyBgColor:wi[84],headBgColor:wi[18],borderColor:"#CDCDCD",columnBarColor:wi[18],bottomBgColor:wi[18],viewEnlargeHeight:25,viewBufferHeight:1e3,taskFieldNames:"StatusIcon,Name,Start,Finish",taskIdFieldNames:"Empty",resourceFieldNames:"StatusIcon,Name",resourceIdFieldNames:"Empty",isTracking:!1,menuText:{ZoomIn:"图表放大",ZoomOut:"图表缩小",FocusIntoView:"转到任务",AddTask:"新建任务",DeleteTask:"删除任务",AddTasksLinks:"链接任务",RemoveTasksLinks:"取消链接",UpgradeTask:"升级",DegradeTask:"降级",Print:"打印",ShowChart:"显示图表",HideChart:"隐藏图表",ShowList:"显示列表",HideList:"隐藏列表",Help:"使用帮助",About:"关于甘特"},showScroller:!0,disableMapDrag:!0,noticeDelete:"确认要删除任务吗？注意：概要任务的子任务也会被删除！",noticeReadonly:"选中了一个或多个只读的任务，操作不能完成！",taskStyle:{TaskNormal:{barStyle:{border:wi[17],backgroundImage:wi[16]},summaryBarStyle:{backgroundColor:wi[68],border:wi[61]},percentBarStyle:{backgroundColor:wi[68]},trackBarStyle:{border:wi[61],backgroundImage:wi[15]},milestoneImage:wi[14],summaryImage:wi[13],milestoneTrackImage:wi[12],listStyle:{backgroundColor:wi[84]},listSelectedStyle:{backgroundColor:wi[42]}},TaskImportant:{barStyle:{border:wi[11],backgroundImage:wi[10]},summaryBarStyle:{backgroundColor:wi[68],border:wi[61]},percentBarStyle:{backgroundColor:wi[68]},milestoneImage:wi[14],summaryImage:wi[13],listStyle:{backgroundColor:"red"},listSelectedStyle:{backgroundColor:"red"}}},resourceStyle:{ResourceNormal:{barStyle:{border:wi[17],backgroundImage:wi[16]},summaryBarStyle:{backgroundColor:wi[68],border:wi[61]},percentBarStyle:{backgroundColor:wi[68]},trackBarStyle:{border:wi[61],backgroundImage:wi[15]},milestoneImage:wi[14],summaryImage:wi[13],milestoneTrackImage:wi[12],listStyle:{backgroundColor:wi[84]},listSelectedStyle:{backgroundColor:wi[42]}},ResourceImportant:{barStyle:{border:wi[11],backgroundImage:wi[10]},summaryBarStyle:{backgroundColor:wi[68],border:wi[61]},percentBarStyle:{backgroundColor:wi[68]},milestoneImage:wi[14],summaryImage:wi[13],listStyle:{backgroundColor:"red"},listSelectedStyle:{backgroundColor:"red"}}},linkStyle:{BlueNormal:{lineStyle:{borderStyle:wi[176],borderColor:"blue"},arrayImage:wi[9]},BlueDashed:{lineStyle:{borderStyle:wi[172],borderColor:"blue"},arrayImage:wi[9]},RedNormal:{lineStyle:{borderStyle:wi[176],borderColor:"red"},arrayImage:wi[8]},RedDashed:{lineStyle:{borderStyle:wi[172],borderColor:"red"},arrayImage:wi[8]},BlackNormal:{lineStyle:{borderStyle:wi[176],borderColor:"black"},arrayImage:wi[7]},BlackDashed:{lineStyle:{borderStyle:wi[172],borderColor:"black"},arrayImage:wi[7]}}},SFGanttTasksMap:{tooltipTitle:{summary:"摘要",milestone:"里程碑",task:"任务",progress:"进度",tracking:"比较基准",link:"链接"},taskStyle:wi[30],taskBarField:"name",taskNoticeFields:wi[6],taskProgressNoticeFields:wi[5],taskTrackingNoticeFields:wi[4],linkAddNoticeFields:wi[3]},SFGanttResourceMap:{tooltipTitle:{summary:wi[151],milestone:"Milestone",task:wi[169],progress:"Progress",tracking:"Baseline",link:wi[167]},taskStyle:wi[30],taskBarField:"name",taskNoticeFields:wi[6],taskProgressNoticeFields:wi[5],taskTrackingNoticeFields:wi[4],linkAddNoticeFields:wi[3]},SFGanttElementList:{elementStyle:wi[30]},SFGanttLinksMap:{tooltipTitle:{link:"任务链接"},linkNoticeFields:wi[3],linkStyle:"BlueNormal"},SFGanttCalDiv:{calNum:2},SFMenu:{tableStyle:{border:"solid 1px #A4A4A4",backgroundColor:wi[84]}},SFTooltip:{divStyle:{fontSize:"12px",backgroundColor:wi[2],border:wi[61]}},SFGanttTimeSegmentation:{lineStyle:{borderLeft:wi[40]}},SFGanttTimeScrollNotice:{divStyle:{fontSize:"13px",backgroundColor:wi[2],padding:"3px",border:wi[1]},dateFormat:wi[0]},SFGanttTimeLine:{lineStyle:{width:"1px",borderStyle:wi[176],borderColor:"red",borderLeftWidth:"1px",borderRightWidth:"1px",backgroundColor:wi[84]},tooltipFormat:wi[0]},SFGanttListScrollNotice:{divStyle:{backgroundColor:wi[2],padding:"0px",border:wi[1],fontSize:"12px"},taskFields:"UID,name",resourceFields:"UID,name"},SFGanttField:{fieldTexts:{UID:"标识号",ID:"索引",TaskName:"任务名称",ResourceName:"资源名称",OutlineNumber:"大纲",StatusIcon:"状态",Duration:"工期",Start:"开始时间",Finish:"完成时间",Notes:"备注",ClassName:"样式",Critical:"关键",Selected:"选中",Resource:"资源名称",PercentComplete:"完成百分比",ActualStart:"实际开始时间",ActualFinish:"完成至此时间",ActualDuration:"实际工期",BaselineStart:"比较基准开始时间",BaselineFinish:"比较基准结束时间",ConstraintType:"约束类型",ConstraintDate:"约束时间",LinkType:"链接类型",FromTask:"从",ToTask:"到"},linkTypes:["完成-完成(FF)","完成-开始(FS)","开始-完成(SF)","开始-开始(SS)"],constraintTypes:["越早越好","越晚越好","必须开始于","必须完成于","不得早于...开始","不得晚于...开始","不得早于...完成","不得晚于...完成"],boolTypes:["否","是"],dateShowFormat:wi[0],dateInputFormat:"yyyy-MM-dd HH:mm:ss",noticeWrongFormat:"格式不正确",durationFormat:"%0个工作日",tooltipConstraint:"此任务有限制条件: '%0'，日期:1",tooltipPercentComplete:"此任务在 %0 完成",noticeEmptyTaskField:"任务域%0不存在!",noticeEmptyLinkField:"链接域%0不存在!"},SFGanttCalendarItem:{formats:{Minute15:"mm",Hour:"M-d HH",Hour2:"HH",Hour6:"HH",Dat:"M月d日（ddd）",Dat1:"d",Day:"ddd",Day3:"d",Day7:"d",Week:"yyyy年M月d日",Month:"yy年M月",Month1:"M",Quarter:"yyyy年第q季度",Quarter1:"\\Qq",Quarter2:"\\Hhhh",Year:"yyyy年",Year1:"yyyy",Year5:"yyyy",Year10:"yyyy"}}},kt(),void qe()):!1}SFNS();