!function(){function t(t,a,r,h,o,n,u,l){var i,f={round:"round",sharp:"sharp",soft:"soft",square:"square"};if(o&&!h||!o&&!r)return u?"":l.path();switch(n=f[n]||"square",h=Math.round(h),r=Math.round(r),t=Math.round(t),a=Math.round(a),n){case"round":if(o)v=~~(r/2),v>h?(v=h,i=["M",t-~~(r/2),a,"l",0,0,"a",~~(r/2),v,0,0,1,r,0,"l",0,0,"z"]):i=["M",t-v,a,"l",0,v-h,"a",v,v,0,1,1,r,0,"l",0,h-v,"z"];else{var v=~~(h/2);v>r?(v=r,i=["M",t+.5,a+.5-~~(h/2),"l",0,0,"a",v,~~(h/2),0,0,1,0,h,"l",0,0,"z"]):i=["M",t+.5,a+.5-v,"l",r-v,0,"a",v,v,0,1,1,0,h,"l",v-r,0,"z"]}break;case"sharp":if(o)c=~~(r/2),i=["M",t+c,a,"l",-r,0,0,-s(h-c,0),c,-e(c,h),c,e(c,h),c,"z"];else{var c=~~(h/2);i=["M",t,a+c,"l",0,-h,s(r-c,0),0,e(c,r),c,-e(c,r),c+(h>2*c),"z"]}break;case"square":i=o?["M",t+~~(r/2),a,"l",1-r,0,0,-h,r-1,0,"z"]:["M",t,a+~~(h/2),"l",0,-h,r,0,0,h,"z"];break;case"soft":o?(v=e(Math.round(r/5),h),i=["M",t-~~(r/2),a,"l",0,v-h,"a",v,v,0,0,1,v,-v,"l",r-2*v,0,"a",v,v,0,0,1,v,v,"l",0,h-v,"z"]):(v=e(r,Math.round(h/5)),i=["M",t+.5,a+.5-~~(h/2),"l",r-v,0,"a",v,v,0,0,1,v,v,"l",0,h-2*v,"a",v,v,0,0,1,-v,v,"l",v-r,0,"z"])}return u?i.join(","):l.path(i)}function a(a,r,e,s,h,o,n){n=n||{};var u=this,l=n.type||"square",i=parseFloat(n.gutter||"20%"),f=a.set(),v=a.set(),c=a.set(),p=a.set(),M=Math.max.apply(Math,o),x=[],d=0,m=n.colors||u.colors,b=o.length;if(Raphael.is(o[0],"array")){M=[],d=b,b=0;for(var g=o.length;g--;)v.push(a.set()),M.push(Math.max.apply(Math,o[g])),b=Math.max(b,o[g].length);if(n.stacked)for(var g=b;g--;){for(var k=0,y=o.length;y--;)k+=+o[y][g]||0;x.push(k)}for(var g=o.length;g--;)if(o[g].length<b)for(var y=b;y--;)o[g].push(0);M=Math.max.apply(Math,n.stacked?x:M)}M=n.to||M;var w=s/(b*(100+i)+i)*100,z=w*i/100,B=null==n.vgutter?20:n.vgutter,R=[],q=r+z,C=(h-2*B)/M;n.stretch||(z=Math.round(z),w=Math.floor(w)),!n.stacked&&(w/=d||1);for(var g=0;b>g;g++){R=[];for(var y=0;(d||1)>y;y++){var F=Math.round((d?o[y][g]:o[g])*C),E=e+h-B-F,j=t(Math.round(q+w/2),E+F,w,F,!0,l,null,a).attr({stroke:"none",fill:m[d?y:g]});d?v[y].push(j):v.push(j),j.y=E,j.x=Math.round(q+w/2),j.w=w,j.h=F,j.value=d?o[y][g]:o[g],n.stacked?R.push(j):q+=w}if(n.stacked){var A;p.push(A=a.rect(R[0].x-R[0].w/2,e,w,h).attr(u.shim)),A.bars=a.set();for(var D=0,G=R.length;G--;)R[G].toFront();for(var G=0,H=R.length;H>G;G++){var I,j=R[G],F=(D+j.value)*C,J=t(j.x,e+h-B-.5*!!D,w,F,!0,l,1,a);A.bars.push(j),D&&j.attr({path:J}),j.h=F,j.y=e+h-B-.5*!!D-F,c.push(I=a.rect(j.x-j.w/2,j.y,w,j.value*C).attr(u.shim)),I.bar=j,I.value=j.value,D+=j.value}q+=w}q+=z}if(p.toFront(),q=r+z,!n.stacked)for(var g=0;b>g;g++){for(var y=0;(d||1)>y;y++){var I;c.push(I=a.rect(Math.round(q),e+B,w,h-B).attr(u.shim)),I.bar=d?v[y][g]:v[g],I.value=I.bar.value,q+=w}q+=z}var K=u.snapEnds(0,b,1),L=(K.from,K.to,u.snapEnds(0,M,1)),N=L.from,O=L.to,P=a.set();if(n.axis){var Q=(n.axis+"").split(/[,\s]+/);+Q[0]&&P.push(a.path(["M",r,e+i+.5,"h",s])),+Q[1]&&P.push(u.axis(r+s,e+h-i,h-2*i,N,O,n.axisystep||Math.floor((h-i)/20),3,a)),+Q[2]&&P.push(a.path(["M",r,e+h-i+.5,"h",s])),+Q[3]&&P.push(u.axis(r,e+h-i,h-2*i,N,O,n.axisystep||Math.floor((h-i)/20),1,a))}return f.label=function(t,r){t=t||[],this.labels=a.set();var s;if(n.stacked)for(var l=0;b>l;l++)for(var i=0,f=0;(d||1)>f;f++){i+=d?o[f][l]:o[l];var p=d?v[f][l]:v[l];if(f==d-1){var x=u.labelise(t[l],i,M);s=a.text(p.x,e+h-B/2,x).insertBefore(c[l*(d||1)+f]);var m=s.getBBox();m.x-7<s?s.remove():(this.labels.push(s),s=m.x+m.width)}}else for(var l=0;b>l;l++)for(var f=0;(d||1)>f;f++){var x=u.labelise(d?t[f]&&t[f][l]:t[l],d?o[f][l]:o[l],M),p=d?v[f][l]:v[l];s=a.text(p.x,r?e+h-B/2:p.y-10,x).insertBefore(c[l*(d||1)+f]);var m=s.getBBox();m.x-7<s?s.remove():(this.labels.push(s),s=m.x+m.width)}return this},f.hover=function(t,a){return p.hide(),c.show(),c.mouseover(t).mouseout(a),this},f.hoverColumn=function(t,a){return c.hide(),p.show(),a=a||function(){},p.mouseover(t).mouseout(a),this},f.click=function(t){return p.hide(),c.show(),c.click(t),this},f.each=function(t){if(!Raphael.is(t,"function"))return this;for(var a=c.length;a--;)t.call(c[a]);return this},f.eachColumn=function(t){if(!Raphael.is(t,"function"))return this;for(var a=p.length;a--;)t.call(p[a]);return this},f.clickColumn=function(t){return c.hide(),p.show(),p.click(t),this},f.push(v,c,p),f.bars=v,f.covers=c,f.axis=P,f}function r(a,r,e,s,h,o,n){n=n||{};var u=this,l=n.type||"square",i=parseFloat(n.gutter||"20%"),f=a.set(),v=a.set(),c=a.set(),p=a.set(),M=Math.max.apply(Math,o),x=[],d=0,m=n.colors||u.colors,b=o.length;if(Raphael.is(o[0],"array")){M=[],d=b,b=0;for(var g=o.length;g--;)v.push(a.set()),M.push(Math.max.apply(Math,o[g])),b=Math.max(b,o[g].length);if(n.stacked)for(var g=b;g--;){for(var k=0,y=o.length;y--;)k+=+o[y][g]||0;x.push(k)}for(var g=o.length;g--;)if(o[g].length<b)for(var y=b;y--;)o[g].push(0);M=Math.max.apply(Math,n.stacked?x:M)}M=n.to||M;var w=Math.floor(h/(b*(100+i)+i)*100),z=Math.floor(w*i/100),B=[],R=e+z,q=(s-1)/M;!n.stacked&&(w/=d||1);for(var g=0;b>g;g++){B=[];for(var y=0;(d||1)>y;y++){var C=d?o[y][g]:o[g],F=t(r,R+w/2,Math.round(C*q),w-1,!1,l,null,a).attr({stroke:"none",fill:m[d?y:g]});d?v[y].push(F):v.push(F),F.x=r+Math.round(C*q),F.y=R+w/2,F.w=Math.round(C*q),F.h=w,F.value=+C,n.stacked?B.push(F):R+=w}if(n.stacked){var E=a.rect(r,B[0].y-B[0].h/2,s,w).attr(u.shim);p.push(E),E.bars=a.set();for(var j=0,A=B.length;A--;)B[A].toFront();for(var A=0,D=B.length;D>A;A++){var G,F=B[A],C=Math.round((j+F.value)*q),H=t(r,F.y,C,w-1,!1,l,1,a);E.bars.push(F),j&&F.attr({path:H}),F.w=C,F.x=r+C,c.push(G=a.rect(r+j*q,F.y-F.h/2,F.value*q,w).attr(u.shim)),G.bar=F,j+=F.value}R+=w}R+=z}if(p.toFront(),R=e+z,!n.stacked)for(var g=0;b>g;g++){for(var y=0;(d||1)>y;y++){var G=a.rect(r,R,s,w).attr(u.shim);c.push(G),G.bar=d?v[y][g]:v[g],G.value=G.bar.value,R+=w}R+=z}var I=u.snapEnds(0,M,1),J=I.from,K=I.to,L=u.snapEnds(0,b,1),N=(L.from,L.to,a.set());if(n.axis){var O=(n.axis+"").split(/[,\s]+/);+O[0]&&N.push(u.axis(r,e,s,J,K,n.axisxstep||Math.floor(s/20),2,a)),+O[1]&&N.push(a.path(["M",r+s+.5,e,"v",h])),+O[2]&&N.push(u.axis(r,e+h,s,J,K,n.axisxstep||Math.floor(s/20),0,a)),+O[3]&&N.push(a.path(["M",r+.5,e,"v",h]))}return f.label=function(t,e){t=t||[],this.labels=a.set();for(var s=0;b>s;s++)for(var h=0;d>h;h++){var n,l=d?v[h][s]:v[s],i=u.labelise(d?t[h]&&t[h][s]:t[s],d?o[h][s]:o[s],M),f=e?l.x-w/2+3:r+5,p=e?"end":"start";this.labels.push(n=a.text(f,l.y,i).attr({"text-anchor":p}).insertBefore(c[s*(d||1)+h])),n.getBBox().x<r+5?n.attr({x:r+5,"text-anchor":"start"}):l.label=n}return this},f.hover=function(t,a){return p.hide(),c.show(),a=a||function(){},c.mouseover(t).mouseout(a),this},f.hoverColumn=function(t,a){return c.hide(),p.show(),a=a||function(){},p.mouseover(t).mouseout(a),this},f.each=function(t){if(!Raphael.is(t,"function"))return this;for(var a=c.length;a--;)t.call(c[a]);return this},f.eachColumn=function(t){if(!Raphael.is(t,"function"))return this;for(var a=p.length;a--;)t.call(p[a]);return this},f.click=function(t){return p.hide(),c.show(),c.click(t),this},f.clickColumn=function(t){return c.hide(),p.show(),p.click(t),this},f.push(v,c,p),f.bars=v,f.covers=c,f}var e=Math.min,s=Math.max,h=function(){};h.prototype=Raphael.g,r.prototype=a.prototype=new h,Raphael.fn.hbarchart=function(t,a,e,s,h,o){return new r(this,t,a,e,s,h,o)},Raphael.fn.barchart=function(t,r,e,s,h,o){return new a(this,t,r,e,s,h,o)}}();