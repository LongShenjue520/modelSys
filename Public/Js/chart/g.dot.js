!function(){function a(a,l,e,r,h,n,s,i,o){function p(t){+t[0]&&(t[0]=x.axis(l+M,e+M,r-2*M,u,c,o.axisxstep||Math.floor((r-2*M)/20),2,o.axisxlabels||null,o.axisxtype||"t",null,a)),+t[1]&&(t[1]=x.axis(l+r-M,e+h-M,h-2*M,v,m,o.axisystep||Math.floor((h-2*M)/20),3,o.axisylabels||null,o.axisytype||"t",null,a)),+t[2]&&(t[2]=x.axis(l+M,e+h-M+P,r-2*M,u,c,o.axisxstep||Math.floor((r-2*M)/20),0,o.axisxlabels||null,o.axisxtype||"t",null,a)),+t[3]&&(t[3]=x.axis(l+M-P,e+h-M,h-2*M,v,m,o.axisystep||Math.floor((h-2*M)/20),1,o.axisylabels||null,o.axisytype||"t",null,a))}var x=this;o=o||{};for(var f=x.snapEnds(Math.min.apply(Math,n),Math.max.apply(Math,n),n.length-1),u=f.from,c=f.to,M=o.gutter||10,y=x.snapEnds(Math.min.apply(Math,s),Math.max.apply(Math,s),s.length-1),v=y.from,m=y.to,g=Math.max(n.length,s.length,i.length),d=a[o.symbol]||"circle",b=a.set(),k=a.set(),w=o.max||100,F=Math.max.apply(Math,i),q=[],B=2*Math.sqrt(F/Math.PI)/w,E=0;g>E;E++)q[E]=Math.min(2*Math.sqrt(i[E]/Math.PI)/B,w);M=Math.max.apply(Math,q.concat(M));var I=a.set(),P=Math.max.apply(Math,q);if(o.axis){var R=(o.axis+"").split(/[,\s]+/);p.call(x,R);for(var X=[],Y=[],E=0,j=R.length;j>E;E++){var z=R[E].all?R[E].all.getBBox()[["height","width"][E%2]]:0;X[E]=z+M,Y[E]=z}M=Math.max.apply(Math,X.concat(M));for(var E=0,j=R.length;j>E;E++)R[E].all&&(R[E].remove(),R[E]=1);p.call(x,R);for(var E=0,j=R.length;j>E;E++)R[E].all&&I.push(R[E].all);b.axis=I}for(var A=(r-2*M)/(c-u||1),C=(h-2*M)/(m-v||1),E=0,j=s.length;j>E;E++){var D=a.raphael.is(d,"array")?d[E]:d,G=l+M+(n[E]-u)*A,H=e+h-M-(s[E]-v)*C;D&&q[E]&&k.push(a[D](G,H,q[E]).attr({fill:o.heat?t(q[E],P):x.colors[0],"fill-opacity":o.opacity?q[E]/w:1,stroke:"none"}))}for(var J=a.set(),E=0,j=s.length;j>E;E++){var G=l+M+(n[E]-u)*A,H=e+h-M-(s[E]-v)*C;J.push(a.circle(G,H,P).attr(x.shim)),o.href&&o.href[E]&&J[E].attr({href:o.href[E]}),J[E].r=+q[E].toFixed(3),J[E].x=+G.toFixed(3),J[E].y=+H.toFixed(3),J[E].X=n[E],J[E].Y=s[E],J[E].value=i[E]||0,J[E].dot=k[E]}return b.covers=J,b.series=k,b.push(k,I,J),b.hover=function(a,t){return J.mouseover(a).mouseout(t),this},b.click=function(a){return J.click(a),this},b.each=function(t){if(!a.raphael.is(t,"function"))return this;for(var l=J.length;l--;)t.call(J[l]);return this},b.href=function(a){for(var t,l=J.length;l--;)t=J[l],t.X==a.x&&t.Y==a.y&&t.value==a.value&&t.attr({href:a.href})},b}var t=function(a,t,l,e){return"hsb("+[Math.min(.4*(1-a/t),1),l||.75,e||.75]+")"},l=function(){};l.prototype=Raphael.g,a.prototype=new l,Raphael.fn.dotchart=function(t,l,e,r,h,n,s,i){return new a(this,t,l,e,r,h,n,s,i)}}();