!function(){function t(t,a){for(var r=t.length/a,s=0,o=r,n=0,e=[];s<t.length;)o--,0>o?(n+=t[s]*(1+o),e.push(n/r),n=t[s++]*-o,o+=r):n+=t[s++];return e}function a(t,a,r,s,o,n){var e=(r-t)/2,h=(o-r)/2,l=Math.atan((r-t)/Math.abs(s-a)),i=Math.atan((o-r)/Math.abs(s-n));l=s>a?Math.PI-l:l,i=s>n?Math.PI-i:i;var u=Math.PI/2-(l+i)%(2*Math.PI)/2,p=e*Math.sin(u+l),c=e*Math.cos(u+l),f=h*Math.sin(u+i),y=h*Math.cos(u+i);return{x1:r-p,y1:s+c,x2:r+f,y2:s+y}}function r(r,s,o,n,e,h,l,i){function u(t){for(var a=[],i=0,u=h.length;u>i;i++)a=a.concat(h[i]);a.sort(function(t,a){return t-a});var p=[],c=[];for(i=0,u=a.length;u>i;i++)a[i]!=a[i-1]&&p.push(a[i])&&c.push(s+f+(a[i]-I)*z);a=p,u=a.length;var y=t||r.set();for(i=0;u>i;i++){var m,v=c[i]-(c[i]-(c[i-1]||s))/2,M=((c[i+1]||s+n)-c[i])/2+(c[i]-(c[i-1]||s))/2;t?m={}:y.push(m=r.rect(v-1,o,Math.max(M+1,1),e).attr({stroke:"none",fill:"#000",opacity:0})),m.values=[],m.symbols=r.set(),m.y=[],m.x=c[i],m.axis=a[i];for(var k=0,b=l.length;b>k;k++){p=h[k]||h[0];for(var d=0,w=p.length;w>d;d++)p[d]==a[i]&&(m.values.push(l[k][d]),m.y.push(o+e-f-(l[k][d]-A)*q),m.symbols.push(g.symbols[k][d]))}t&&t.call(m)}!t&&(x=y)}function p(t){for(var a,n=t||r.set(),i=0,u=l.length;u>i;i++)for(var p=0,c=l[i].length;c>p;p++){var y=s+f+((h[i]||h[0])[p]-I)*z,m=s+f+((h[i]||h[0])[p?p-1:1]-I)*z,v=o+e-f-(l[i][p]-A)*q;t?a={}:n.push(a=r.circle(y,v,Math.abs(m-y)/2).attr({stroke:"none",fill:"#000",opacity:0})),a.x=y,a.y=v,a.value=l[i][p],a.line=g.lines[i],a.shade=g.shades[i],a.symbol=g.symbols[i][p],a.symbols=g.symbols[i],a.axis=(h[i]||h[0])[p],t&&t.call(a)}!t&&(M=n)}var c=this;i=i||{},r.raphael.is(h[0],"array")||(h=[h]),r.raphael.is(l[0],"array")||(l=[l]);for(var f=i.gutter||10,y=Math.max(h[0].length,l[0].length),m=i.symbol||"",v=i.colors||c.colors,x=null,M=null,g=r.set(),k=[],b=0,d=l.length;d>b;b++)y=Math.max(y,l[b].length);var w=r.set();for(b=0,d=l.length;d>b;b++)i.shade&&w.push(r.path().attr({stroke:"none",fill:v[b],opacity:i.nostroke?1:.3})),l[b].length>n-2*f&&(l[b]=t(l[b],n-2*f),y=n-2*f),h[b]&&h[b].length>n-2*f&&(h[b]=t(h[b],n-2*f));var C=Array.prototype.concat.apply([],h),R=Array.prototype.concat.apply([],l),j=c.snapEnds(Math.min.apply(Math,C),Math.max.apply(Math,C),h[0].length-1),I=j.from,P=j.to,L=c.snapEnds(Math.min.apply(Math,R),Math.max.apply(Math,R),l[0].length-1),A=L.from,E=L.to,z=(n-2*f)/(P-I||1),q=(e-2*f)/(E-A||1),B=r.set();if(i.axis){A=0,E=L.to,q=(e-2*f)/(E-A||1);var D=(i.axis+"").split(/[,\s]+/);+D[0]&&B.push(c.axis(s+f,o+f,n-2*f,I,P,i.axisxstep||Math.floor((n-2*f)/20),2,i.axisxlables,r)),+D[1]&&B.push(c.axis(s+n-f,o+e-f,e-2*f,L.from,L.to,i.axisystep||Math.floor((e-2*f)/20),3,r)),+D[2]&&B.push(c.axis(s+f,o+e-f,n-2*f,I,P,i.axisxstep||Math.floor((n-2*f)/20),0,i.axisxlables,r)),+D[3]&&B.push(c.axis(s+f,o+e-f,e-2*f,A,E,i.axisystep||Math.floor((e-2*f)/20),1,r))}var F,G=r.set(),H=r.set();for(b=0,d=l.length;d>b;b++){i.nostroke||G.push(F=r.path().attr({stroke:v[b],"stroke-width":i.width||2,"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":i.dash||""}));var J=Raphael.is(m,"array")?m[b]:m,K=r.set();k=[];for(var N=0,O=l[b].length;O>N;N++){var Q=s+f+((h[b]||h[0])[N]-I)*z,S=o+e-f-(l[b][N]-A)*q;if((Raphael.is(J,"array")?J[N]:J)&&K.push(r[Raphael.is(J,"array")?J[N]:J](Q,S,3*(i.width||2)).attr({fill:v[b],stroke:"none"})),i.smooth){if(N&&N!=O-1){var T=s+f+((h[b]||h[0])[N-1]-I)*z,U=o+e-f-(l[b][N-1]-A)*q,V=s+f+((h[b]||h[0])[N+1]-I)*z,W=o+e-f-(l[b][N+1]-A)*q,X=a(T,U,Q,S,V,W);k=k.concat([X.x1,X.y1,Q,S,X.x2,X.y2])}N||(k=["M",Q,S,"C",Q,S])}else k=k.concat([N?"L":"M",Q,S])}i.smooth&&(k=k.concat([Q,S,Q,S])),H.push(K),i.shade&&w[b].attr({path:k.concat(["L",Q,o+e-f,"L",s+f+((h[b]||h[0])[0]-I)*z,o+e-f,"z"]).join(",")}),!i.nostroke&&F.attr({path:k.join(",")})}return g.push(G,w,H,B,x,M),g.lines=G,g.shades=w,g.symbols=H,g.axis=B,g.hoverColumn=function(t,a){return!x&&u(),x.mouseover(t).mouseout(a),this},g.clickColumn=function(t){return!x&&u(),x.click(t),this},g.hrefColumn=function(t){var a=r.raphael.is(arguments[0],"array")?arguments[0]:arguments;if(!(arguments.length-1)&&"object"==typeof t)for(var s in t)for(var o=0,n=x.length;n>o;o++)x[o].axis==s&&x[o].attr("href",t[s]);for(!x&&u(),o=0,n=a.length;n>o;o++)x[o]&&x[o].attr("href",a[o]);return this},g.hover=function(t,a){return!M&&p(),M.mouseover(t).mouseout(a),this},g.click=function(t){return!M&&p(),M.click(t),this},g.each=function(t){return p(t),this},g.eachColumn=function(t){return u(t),this},g}var s=function(){};s.prototype=Raphael.g,r.prototype=new s,Raphael.fn.linechart=function(t,a,s,o,n,e,h){return new r(this,t,a,s,o,n,e,h)}}();