!function(e){e.fn.jqm=function(n){var s={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:i,ajaxText:"",target:i,modal:i,toTop:i,onShow:i,onHide:i,onLoad:i};return this.each(function(){return this._jqm?o[this._jqm].c=e.extend({},o[this._jqm].c,n):(t++,this._jqm=t,o[t]={c:e.extend(s,e.jqm.params,n),a:i,w:e(this).addClass("jqmID"+t),s:t},void(s.trigger&&e(this).jqmAddTrigger(s.trigger)))})},e.fn.jqmAddClose=function(e){return h(this,e,"jqmHide")},e.fn.jqmAddTrigger=function(e){return h(this,e,"jqmShow")},e.fn.jqmShow=function(t){return this.each(function(){e.jqm.open(this._jqm,t)})},e.fn.jqmHide=function(t){return this.each(function(){e.jqm.close(this._jqm,t)})},e.jqm={hash:{},open:function(t,a){var d=o[t],h=d.c,m="."+h.closeClass,l=parseInt(d.w.css("z-index"));l=l>0?l:3e3;var u=e("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":l-1,opacity:h.overlay/100});if(d.a)return i;if(d.t=a,d.a=!0,d.w.css("z-index",l),h.modal?(n[0]||setTimeout(function(){c("bind")},1),n.push(t)):h.overlay>0?h.closeoverlay&&d.w.jqmAddClose(u):u=i,d.o=u?u.addClass(h.overlayClass).prependTo("body"):i,s&&(e("html,body").css({height:"100%",width:"100%"}),u)){u=u.css({position:"absolute"})[0];for(var f in{Top:1,Left:1})u.style.setExpression(f.toLowerCase(),"(_=(document.documentElement.scroll"+f+" || document.body.scroll"+f+"))+'px'")}if(h.ajax){var j=h.target||d.w,q=h.ajax;j="string"==typeof j?e(j,d.w):e(j),q="@"==q.substr(0,1)?e(a).attr(q.substring(1)):q,j.html(h.ajaxText).load(q,function(){h.onLoad&&h.onLoad.call(this,d),m&&d.w.jqmAddClose(e(m,d.w)),r(d)})}else m&&d.w.jqmAddClose(e(m,d.w));return h.toTop&&d.o&&d.w.before('<span id="jqmP'+d.w[0]._jqm+'"></span>').insertAfter(d.o),h.onShow?h.onShow(d):d.w.show(),r(d),i},close:function(t){var s=o[t];return s.a?(s.a=i,n[0]&&(n.pop(),n[0]||c("unbind")),s.c.toTop&&s.o&&e("#jqmP"+s.w[0]._jqm).after(s.w).remove(),s.c.onHide?s.c.onHide(s):(s.w.hide(),s.o&&s.o.remove()),i):i},params:{}};var t=0,o=e.jqm.hash,n=[],s=e.browser.msie&&"6.0"==e.browser.version,i=!1,r=function(t){var o=e('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0});s&&(t.o?t.o.html('<p style="width:100%;height:100%"/>').prepend(o):e("iframe.jqm",t.w)[0]||t.w.prepend(o)),a(t)},a=function(t){try{e(":input:visible",t.w)[0].focus()}catch(o){}},c=function(t){e(document)[t]("keypress",d)[t]("keydown",d)[t]("mousedown",d)},d=function(t){var s=o[n[n.length-1]],i=!e(t.target).parents(".jqmID"+s.s)[0];return i&&a(s),!i},h=function(t,n,s){return t.each(function(){var t=this._jqm;e(n).each(function(){this[s]||(this[s]=[],e(this).click(function(){for(var e in{jqmShow:1,jqmHide:1})for(var t in this[e])o[this[e][t]]&&o[this[e][t]].w[e](this);return i})),this[s].push(t)})})}}(jQuery);