!function(t,o){t.ui=t.ui||{};var i=/left|center|right/,e=/top|center|bottom/,n="center",l=t.fn.position,f=t.fn.offset;t.fn.position=function(o){if(!o||!o.of)return l.apply(this,arguments);o=t.extend({},o);var f,s,r,a=t(o.of),h=a[0],p=(o.collision||"flip").split(" "),c=o.offset?o.offset.split(" "):[0,0];return 9===h.nodeType?(f=a.width(),s=a.height(),r={top:0,left:0}):h.setTimeout?(f=a.width(),s=a.height(),r={top:a.scrollTop(),left:a.scrollLeft()}):h.preventDefault?(o.at="left top",f=s=0,r={top:o.of.pageY,left:o.of.pageX}):(f=a.outerWidth(),s=a.outerHeight(),r=a.offset()),t.each(["my","at"],function(){var t=(o[this]||"").split(" ");1===t.length&&(t=i.test(t[0])?t.concat([n]):e.test(t[0])?[n].concat(t):[n,n]),t[0]=i.test(t[0])?t[0]:n,t[1]=e.test(t[1])?t[1]:n,o[this]=t}),1===p.length&&(p[1]=p[0]),c[0]=parseInt(c[0],10)||0,1===c.length&&(c[1]=c[0]),c[1]=parseInt(c[1],10)||0,"right"===o.at[0]?r.left+=f:o.at[0]===n&&(r.left+=f/2),"bottom"===o.at[1]?r.top+=s:o.at[1]===n&&(r.top+=s/2),r.left+=c[0],r.top+=c[1],this.each(function(){var i,e=t(this),l=e.outerWidth(),a=e.outerHeight(),h=parseInt(t.curCSS(this,"marginLeft",!0))||0,u=parseInt(t.curCSS(this,"marginTop",!0))||0,g=l+h+(parseInt(t.curCSS(this,"marginRight",!0))||0),m=a+u+(parseInt(t.curCSS(this,"marginBottom",!0))||0),d=t.extend({},r);"right"===o.my[0]?d.left-=l:o.my[0]===n&&(d.left-=l/2),"bottom"===o.my[1]?d.top-=a:o.my[1]===n&&(d.top-=a/2),d.left=Math.round(d.left),d.top=Math.round(d.top),i={left:d.left-h,top:d.top-u},t.each(["left","top"],function(e,n){t.ui.position[p[e]]&&t.ui.position[p[e]][n](d,{targetWidth:f,targetHeight:s,elemWidth:l,elemHeight:a,collisionPosition:i,collisionWidth:g,collisionHeight:m,offset:c,my:o.my,at:o.at})}),t.fn.bgiframe&&e.bgiframe(),e.offset(t.extend(d,{using:o.using}))})},t.ui.position={fit:{left:function(o,i){var e=t(window),n=i.collisionPosition.left+i.collisionWidth-e.width()-e.scrollLeft();o.left=n>0?o.left-n:Math.max(o.left-i.collisionPosition.left,o.left)},top:function(o,i){var e=t(window),n=i.collisionPosition.top+i.collisionHeight-e.height()-e.scrollTop();o.top=n>0?o.top-n:Math.max(o.top-i.collisionPosition.top,o.top)}},flip:{left:function(o,i){if(i.at[0]!==n){var e=t(window),l=i.collisionPosition.left+i.collisionWidth-e.width()-e.scrollLeft(),f="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,s="left"===i.at[0]?i.targetWidth:-i.targetWidth,r=-2*i.offset[0];o.left+=i.collisionPosition.left<0?f+s+r:l>0?f+s+r:0}},top:function(o,i){if(i.at[1]!==n){var e=t(window),l=i.collisionPosition.top+i.collisionHeight-e.height()-e.scrollTop(),f="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,s="top"===i.at[1]?i.targetHeight:-i.targetHeight,r=-2*i.offset[1];o.top+=i.collisionPosition.top<0?f+s+r:l>0?f+s+r:0}}}},t.offset.setOffset||(t.offset.setOffset=function(o,i){/static/.test(t.curCSS(o,"position"))&&(o.style.position="relative");var e=t(o),n=e.offset(),l=parseInt(t.curCSS(o,"top",!0),10)||0,f=parseInt(t.curCSS(o,"left",!0),10)||0,s={top:i.top-n.top+l,left:i.left-n.left+f};"using"in i?i.using.call(o,s):e.css(s)},t.fn.offset=function(o){var i=this[0];return i&&i.ownerDocument?o?this.each(function(){t.offset.setOffset(this,o)}):f.call(this):null})}(jQuery);