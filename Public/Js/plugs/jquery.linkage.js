!function(t){t.linkage=function(e){function a(t,e){for(var a in e)if(e[a]==t)return a}function i(e,a,i){t(s.ids[a]).html("");var n;"undefined"==typeof e[0]?(n=t("<option></option>"),n.text("没有数据"),n.val("0"),"undefined"!=typeof i&&i==v[s.val]&&n.attr("selected",!0),t(s.ids[a]).append(n)):(t.each(e,function(e,d){n=t("<option></option>"),n.text(d[s.tex]),n.val(d[s.val]),typeof i!=l&&i==d[s.val]&&n.attr("selected",!0),t(s.ids[a]).append(n)}),t(s.ids[a]).append(n).unbind("change"),t(s.ids[a]).on("change",function(){d(t(this))}))}function n(e,a){e=parseInt(e,10);var i=f[e];if(typeof i!=l){var n=new Array;return a==o?n=i:(a=parseInt(a,10),t.each(i,function(t,i){a==i[s.pid[e-1]]&&n.push(i)})),n}}function d(e){if(s.ids[0].indexOf("#")>-1)var d=parseInt("#"+a(t(e).attr("id"),s.ids),10);else var d=parseInt(a("."+t(e).prop("class"),s.ids),10);for(var o=t(e).val(),f=d;f<s.ids.length;f++)if(f+1<s.ids.length){var r=n(f+1,o);o=typeof r[0]==l?99999999:r[0][s.val],i(r,f+1)}}var l="undefined",o="",s=settings=jQuery.extend({ids:"",data:"",tag:"",tex:"",val:"",pid:"",defaultVal:""},e);if(""==s.tag||""==s.ids||""==s.pid||""==s.tex||""==s.val)return void console.log("配置失败，请参照说明配置。");s.tag=s.tag.split(","),s.ids=s.ids.split(","),s.pid=s.pid.split(","),typeof s.defaultVal!=l&&(s.defaultVal=s.defaultVal.split(","));var f=new Array;if("object"!=typeof settings.data)return void console.log("当前数据源类型为："+typeof s.data+"。系统不接受此类数据，当前仅接受JSON");for(var r=0;r<s.ids.length;r++)f.push(s.data[s.tag[r]]);for(var p="",r=0;r<s.ids.length;r++)if(s.defaultVal!=o)pids=s.defaultVal,i(n(r,pids[r-1]),r,s.defaultVal[r]);else{var u=n(r,p);typeof u[0]!=l&&(p=u[0][s.val]),i(u,r,p)}}}(jQuery);