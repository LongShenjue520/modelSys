var PHPHTMLMixedParser=Editor.Parser=function(){function e(e){function r(){var e=i.next();if("<"==e.content)s=!0;else if("xml-tagname"==e.style&&s===!0)s=e.content.toLowerCase();else if("xml-attname"==e.style)o=e.content;else if("xml-processing"==e.type){for(var r=0;r<n.length;r++)if(n[r]==e.content){c.next=t(PHPParser,"?>");break}}else"xml-attribute"==e.style&&'"php"'==e.content&&"script"==s&&"language"==o?s="script/php":">"==e.content&&("script/php"==s?c.next=t(PHPParser,"</script>"):"script"==s?c.next=t(JSParser,"</script"):"style"==s&&(c.next=t(CSSParser,"</style")),o=null,s=!1);return e}function t(n,t){var a=i.indentation();return l=n==PHPParser&&u?u(e):n.make(e,a+indentUnit),function(){if(e.lookAhead(t,!1,!1,!0))return n==PHPParser&&(u=l.copy()),l=null,c.next=r,r();var i=l.next(),s=i.value.lastIndexOf("<"),o=Math.min(i.value.length-s,t.length);if(-1!=s&&i.value.slice(s,s+o).toLowerCase()==t.slice(0,o)&&e.lookAhead(t.slice(o),!1,!1,!0)&&(e.push(i.value.slice(s)),i.value=i.value.slice(0,s)),i.indentation){var P=i.indentation;i.indentation=function(e){return"</"==e?a:P(e)}}return i}}function a(){var n=i.copy(),r=l&&l.copy(),t=c.next,a=s,P=o,p=u;return function(f){return e=f,i=n(f),l=r&&r(f),u=p,c.next=t,s=a,o=P,c}}var i=XMLParser.make(e),l=null,s=!1,o=null,u=null,c={next:r,copy:a};return c}var n=["<?php"];if(!(PHPParser&&CSSParser&&JSParser&&XMLParser))throw new Error("PHP, CSS, JS, and XML parsers must be loaded for PHP+HTML mixed mode to work.");return XMLParser.configure({useHTMLKludges:!0}),{make:e,electricChars:"{}/:",configure:function(e){null!=e.opening&&(n=e.opening)}}}();