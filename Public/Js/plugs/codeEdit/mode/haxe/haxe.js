!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("haxe",function(t,e){function r(t,e,r){return e.tokenize=r,r(t,e)}function n(t,e){for(var r,n=!1;null!=(r=t.next());){if(r==e&&!n)return!1;n=!n&&"\\"==r}return n}function a(t,e,r){return G=t,H=r,e}function i(t,e){var i=t.next();if('"'==i||"'"==i)return r(t,e,o(i));if(/[\[\]{}\(\),;\:\.]/.test(i))return a(i);if("0"==i&&t.eat(/x/i))return t.eatWhile(/[\da-f]/i),a("number","number");if(/\d/.test(i)||"-"==i&&t.eat(/\d/))return t.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),a("number","number");if(e.reAllowed&&"~"==i&&t.eat(/\//))return n(t,"/"),t.eatWhile(/[gimsu]/),a("regexp","string-2");if("/"==i)return t.eat("*")?r(t,e,u):t.eat("/")?(t.skipToEnd(),a("comment","comment")):(t.eatWhile(L),a("operator",null,t.current()));if("#"==i)return t.skipToEnd(),a("conditional","meta");if("@"==i)return t.eat(/:/),t.eatWhile(/[\w_]/),a("metadata","meta");if(L.test(i))return t.eatWhile(L),a("operator",null,t.current());var c;if(/[A-Z]/.test(i))return t.eatWhile(/[\w_<>]/),c=t.current(),a("type","variable-3",c);t.eatWhile(/[\w_]/);var c=t.current(),l=K.propertyIsEnumerable(c)&&K[c];return l&&e.kwAllowed?a(l.type,l.style,c):a("variable","variable",c)}function o(t){return function(e,r){return n(e,t)||(r.tokenize=i),a("string","string")}}function u(t,e){for(var r,n=!1;r=t.next();){if("/"==r&&n){e.tokenize=i;break}n="*"==r}return a("comment","comment")}function c(t,e,r,n,a,i){this.indented=t,this.column=e,this.type=r,this.prev=a,this.info=i,null!=n&&(this.align=n)}function l(t,e){for(var r=t.localVars;r;r=r.next)if(r.name==e)return!0}function f(t,e,r,n,a){var i=t.cc;for(Q.state=t,Q.stream=a,Q.marked=null,Q.cc=i,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;){var o=i.length?i.pop():k;if(o(r,n)){for(;i.length&&i[i.length-1].lex;)i.pop()();return Q.marked?Q.marked:"variable"==r&&l(t,n)?"variable-2":"variable"==r&&d(t,n)?"variable-3":e}}}function d(t,e){if(/[a-z]/.test(e.charAt(0)))return!1;for(var r=t.importedtypes.length,n=0;r>n;n++)if(t.importedtypes[n]==e)return!0}function s(t){for(var e=Q.state,r=e.importedtypes;r;r=r.next)if(r.name==t)return;e.importedtypes={name:t,next:e.importedtypes}}function p(){for(var t=arguments.length-1;t>=0;t--)Q.cc.push(arguments[t])}function m(){return p.apply(null,arguments),!0}function v(t){var e=Q.state;if(e.context){Q.marked="def";for(var r=e.localVars;r;r=r.next)if(r.name==t)return;e.localVars={name:t,next:e.localVars}}}function y(){Q.state.context||(Q.state.localVars=R),Q.state.context={prev:Q.state.context,vars:Q.state.localVars}}function b(){Q.state.localVars=Q.state.context.vars,Q.state.context=Q.state.context.prev}function h(t,e){var r=function(){var r=Q.state;r.lexical=new c(r.indented,Q.stream.column(),t,null,r.lexical,e)};return r.lex=!0,r}function x(){var t=Q.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function w(t){function e(r){return r==t?m():";"==t?p():m(e)}return e}function k(t){return"@"==t?m(W):"var"==t?m(h("vardef"),j,w(";"),x):"keyword a"==t?m(h("form"),g,k,x):"keyword b"==t?m(h("form"),k,x):"{"==t?m(h("}"),y,Z,x,b):";"==t?m():"attribute"==t?m(z):"function"==t?m(B):"for"==t?m(h("form"),w("("),h(")"),T,w(")"),x,k,x):"variable"==t?m(h("stat"),P):"switch"==t?m(h("form"),g,h("}","switch"),w("{"),Z,x,x):"case"==t?m(g,w(":")):"default"==t?m(w(":")):"catch"==t?m(h("form"),y,w("("),$,w(")"),k,x,b):"import"==t?m(M,w(";")):"typedef"==t?m(O):p(h("stat"),g,w(";"),x)}function g(t){return N.hasOwnProperty(t)?m(V):"function"==t?m(B):"keyword c"==t?m(A):"("==t?m(h(")"),A,w(")"),x,V):"operator"==t?m(g):"["==t?m(h("]"),I(g,"]"),x,V):"{"==t?m(h("}"),I(_,"}"),x,V):m()}function A(t){return t.match(/[;\}\)\],]/)?p():p(g)}function V(t,e){if("operator"==t&&/\+\+|--/.test(e))return m(V);if("operator"==t||":"==t)return m(g);if(";"!=t)return"("==t?m(h(")"),I(g,")"),x,V):"."==t?m(S,V):"["==t?m(h("]"),g,w("]"),x,V):void 0}function z(t){return"attribute"==t?m(z):"function"==t?m(B):"var"==t?m(j):void 0}function W(t){return":"==t?m(W):"variable"==t?m(W):"("==t?m(h(")"),I(E,")"),x,k):void 0}function E(t){return"variable"==t?m():void 0}function M(t,e){return"variable"==t&&/[A-Z]/.test(e.charAt(0))?(s(e),m()):"variable"==t||"property"==t||"."==t?m(M):void 0}function O(t,e){return"variable"==t&&/[A-Z]/.test(e.charAt(0))?(s(e),m()):void 0}function P(t){return":"==t?m(x,k):p(V,w(";"),x)}function S(t){return"variable"==t?(Q.marked="property",m()):void 0}function _(t){return"variable"==t&&(Q.marked="property"),N.hasOwnProperty(t)?m(w(":"),g):void 0}function I(t,e){function r(n){return","==n?m(t,r):n==e?m():m(w(e))}return function(n){return n==e?m():p(t,r)}}function Z(t){return"}"==t?m():p(k,Z)}function j(t,e){return"variable"==t?(v(e),m(D,C)):m()}function C(t,e){return"="==e?m(g,C):","==t?m(j):void 0}function T(t,e){return"variable"==t&&v(e),m(h(")"),y,q,g,x,k,b)}function q(t,e){return"in"==e?m():void 0}function B(t,e){return"variable"==t?(v(e),m(B)):"new"==e?m(B):"("==t?m(h(")"),y,I($,")"),x,D,k,b):void 0}function D(t){return":"==t?m(F):void 0}function F(t){return"type"==t?m():"variable"==t?m():"{"==t?m(h("}"),I(U,"}"),x):void 0}function U(t){return"variable"==t?m(D):void 0}function $(t,e){return"variable"==t?(v(e),m(D)):void 0}var G,H,J=t.indentUnit,K=function(){function t(t){return{type:t,style:"keyword"}}var e=t("keyword a"),r=t("keyword b"),n=t("keyword c"),a=t("operator"),i={type:"atom",style:"atom"},o={type:"attribute",style:"attribute"},u=t("typedef");return{"if":e,"while":e,"else":r,"do":r,"try":r,"return":n,"break":n,"continue":n,"new":n,"throw":n,"var":t("var"),inline:o,"static":o,using:t("import"),"public":o,"private":o,cast:t("cast"),"import":t("import"),macro:t("macro"),"function":t("function"),"catch":t("catch"),untyped:t("untyped"),callback:t("cb"),"for":t("for"),"switch":t("switch"),"case":t("case"),"default":t("default"),"in":a,never:t("property_access"),trace:t("trace"),"class":u,"enum":u,"interface":u,typedef:u,"extends":u,"implements":u,dynamic:u,"true":i,"false":i,"null":i}}(),L=/[+\-*&%=<>!?|]/,N={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},Q={state:null,column:null,marked:null,cc:null},R={name:"this",next:null};return x.lex=!0,{startState:function(t){var r=["Int","Float","String","Void","Std","Bool","Dynamic","Array"];return{tokenize:i,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new c((t||0)-J,0,"block",!1),localVars:e.localVars,importedtypes:r,context:e.localVars&&{vars:e.localVars},indented:0}},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation()),t.eatSpace())return null;var r=e.tokenize(t,e);return"comment"==G?r:(e.reAllowed=!("operator"!=G&&"keyword c"!=G&&!G.match(/^[\[{}\(,;:]$/)),e.kwAllowed="."!=G,f(e,r,G,H,t))},indent:function(t,e){if(t.tokenize!=i)return 0;var r=e&&e.charAt(0),n=t.lexical;"stat"==n.type&&"}"==r&&(n=n.prev);var a=n.type,o=r==a;return"vardef"==a?n.indented+4:"form"==a&&"{"==r?n.indented:"stat"==a||"form"==a?n.indented+J:"switch"!=n.info||o?n.align?n.column+(o?0:1):n.indented+(o?0:J):n.indented+(/^(?:case|default)\b/.test(e)?J:2*J)},electricChars:"{}"}}),t.defineMIME("text/x-haxe","haxe")});