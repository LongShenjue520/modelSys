!function(a){a.fn.anchorsToolBar=function(i){function s(i){var s=n.box;s.find(".side-catalog").toggle(),a(i).toggleClass("disabled")}function t(i){var s=n.box,t=a(i).find("a").attr("mdHeight");t||(t=0),s.find("."+n.pDivCalssTag).scrollTop(t),s.find("div.side-catalog-item").removeClass("active"),setTimeout(function(){s.find("div.side-catalog-item").removeClass("active"),a(i).addClass("active");var t=parseInt(a(i).attr("className").split("navonindex")[1]);o(t)},20);var d=s.find("."+n.pDivCalssTag).scrollTop();s.find(".sideToolbar").css("top",60+d)}function o(a){var i=n.box,s=i.find(".side-catalog-box"),t=i.find(".side-catalog-item").length;a>=5&&t-4>=a&&s.css("top",25*(5-a)+"px")}a.fn.anchorsToolBar.defaultSettings={box:navTab.getCurrentPanel(),pDivCalssTag:"pageFormContent",anchors:"side-catalog-anchor",textClassTag:"side-catalog-anchor",firstAnchors:"side-catalog-firstanchor"};var n=a.extend({},a.fn.anchorsToolBar.defaultSettings,i);return this.each(function(){var i=n.box,d=!1;i.find("."+n.pDivCalssTag).bind("scroll",function(){e()}),a(document).on("click","a.side-catalog-btn-disabled",function(){s(this)}),a(document).on("click","a.side-catalog-up",function(){t(this)}),a(document).on("click","div.side-catalog-item",function(){t(this)});var e=function(){for(var i=n.box,s=i.find("."+n.anchors),t=[],o=s.length,e=0;o>e;e++)a(s[e]).is(":visible")&&t.push(a(s[e]));var r=i.find("."+n.pDivCalssTag).scrollTop(),v=(i.find("."+n.pDivCalssTag).position().top,i.find("."+n.textClassTag).first().position().top),f='<div class="side-catalog">                                <div class="side-catalog-bar">                                    <div class="side-catalog-top"></div>                                    <div class="side-catalog-bottom"></div>                                </div>                                <div class="side-catalog-list">';f+='<div class="side-catalog-box">';var e=0,g=1,p=0,h=0,b=0;i.find("."+n.anchors).each(function(){if(a(this).is(":visible")){var i=t[e].position().top+r,s=a(this).find("."+n.textClassTag).text().trim().slice(0,5);if(d===!1){a(this).hasClass("side-catalog-anchor2")?(f+='<div class="side-catalog-item side-catalog-item2 navonindex'+(e+1)+'">                                        <span class="side-catalog-index">'+(e-p+"."+g)+'</span>                                        <a href="javascript:;" mdHeight="'+i+'">'+s+'</a>                                        <span class="side-catalog-dot"></span>                                    </div>',g++,p++):(f+='<div class="side-catalog-item navonindex'+(e+1)+'">                                        <span class="side-catalog-index">'+(e-p+1)+'</span>                                        <a href="javascript:;" mdHeight="'+i+'">'+s+'</a>                                        <span class="side-catalog-dot"></span>                                    </div>',g=1)}0!=e&&(h=t[e-1].position().top+r),e+1<t.length&&(b=t[e+1].position().top+r),r+(i-h)/2>h&&b>r+(b-i)/2&&l(e),e++}}),d===!1&&(f+='</div></div></div>                                <a class="side-catalog-btn side-catalog-btn-disabled">隐藏/显示</a>                                <a class="side-catalog-up" href="#" mdHeight="0" title="返回顶部">返回顶部</a>',i.find(".sideToolbar").empty(),i.find(".sideToolbar").append(f)),d=!0,c(r,v),i.find(".sideToolbar").css("top",60+r)},l=function(a){i.find(".sideToolbar").find(".side-catalog-item").removeClass("active"),i.find(".sideToolbar").find(".navonindex"+a).addClass("active"),o(a)},c=function(a,s){s>=a&&(i.find(".sideToolbar").empty(),d=!1)}})}}(jQuery);