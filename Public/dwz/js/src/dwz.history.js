!function(o){o.extend({History:{_hash:new Array,_cont:void 0,_currentHash:"",_callback:void 0,init:function(r,t){o.History._cont=r,o.History._callback=t;var s=location.hash.replace(/\?.*$/,"");if(o.History._currentHash=s,o.browser.msie){""==o.History._currentHash&&(o.History._currentHash="#"),o("body").prepend('<iframe id="jQuery_history" style="display: none;"></iframe>');var i=o("#jQuery_history")[0],e=i.contentDocument||i.contentWindow.document;e.open(),e.close(),e.location.hash=s}o.isFunction(this._callback)&&o.History._callback(s.skipChar("#")),setInterval(o.History._historyCheck,100)},_historyCheck:function(){var r="";if(o.browser.msie){var t=o("#jQuery_history")[0],s=t.contentWindow;r=s.location.hash.skipChar("#").replace(/\?.*$/,"")}else r=location.hash.skipChar("#").replace(/\?.*$/,"");r!=o.History._currentHash&&(o.History._currentHash=r,o.History.loadHistory(r))},addHistory:function(r,t,s){o.History._currentHash=r;var i=[r,t,s];if(o.History._hash.push(i),o.browser.msie){var e=o("#jQuery_history")[0],a=e.contentDocument||e.contentWindow.document;a.open(),a.close(),a.location.hash=r.replace(/\?.*$/,""),location.hash=r.replace(/\?.*$/,"")}else location.hash=r.replace(/\?.*$/,"")},loadHistory:function(r){o.browser.msie&&(location.hash=r);for(var t=0;t<o.History._hash.length;t+=1)if(o.History._hash[t][0]==r)return void o.History._hash[t][1](o.History._hash[t][2])}}})}(jQuery);