!function(t){t.fn.jDrag=function(e){return"string"==typeof e&&"destroy"==e?this.each(function(){t(this).unbind("mousedown",t.rwdrag.start),t.data(this,"pp-rwdrag",null)}):this.each(function(){var o=t(this);if(t.data(t.rwdrag,"pp-rwdrag",{options:t.extend({el:o,obj:o},e)}),e.event)t.rwdrag.start(e.event);else{var r=e.selector;t(r,obj).bind("mousedown",t.rwdrag.start)}})},t.rwdrag={start:function(e){var o=t.data(this,"pp-rwdrag"),r=o.options.el[0];t.data(r,"pp-rwdrag",{options:o.options}),t.rwdrag.current||(t.rwdrag.current={el:r,oleft:parseInt(r.style.left)||0,otop:parseInt(r.style.top)||0,ox:e.pageX||e.screenX,oy:e.pageY||e.screenY},t(document).bind("mouseup",t.rwdrag.stop),t(document).bind("mousemove",t.rwdrag.drag))},drag:function(e){if(!e)var e=window.event;var o=t.rwdrag.current,r=t.data(o.el,"pp-rwdrag"),n=o.oleft+(e.pageX||e.clientX)-o.ox,p=o.otop+(e.pageY||e.clientY)-o.oy;if(1>p&&(p=0),"horizontal"==r.options.move)r.options.minW&&n>=t(r.options.obj).cssv("left")+r.options.minW&&r.options.maxW&&n<=t(r.options.obj).cssv("left")+r.options.maxW?o.el.style.left=n+"px":r.options.scop&&(r.options.relObj?n-parseInt(r.options.relObj.style.left)>r.options.cellMinW&&(o.el.style.left=n+"px"):o.el.style.left=n+"px");else if("vertical"==r.options.move)o.el.style.top=p+"px";else{var a=t(r.options.selector,t(r.options.obj));n>=2*-a.outerWidth()/3&&p>=0&&n+a.outerWidth()/3<t(window).width()&&p+a.outerHeight()<t(window).height()&&(o.el.style.left=n+"px",o.el.style.top=p+"px")}return t.rwdrag.preventEvent(e)},stop:function(e){var o=t.rwdrag.current,r=t.data(o.el,"pp-rwdrag");return t(document).unbind("mousemove",t.rwdrag.drag),t(document).unbind("mouseup",t.rwdrag.stop),r.options.stop&&r.options.stop.apply(o.el,[o.el]),t.rwdrag.current=null,t.rwdrag.preventEvent(e)},preventEvent:function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1}}}(jQuery);