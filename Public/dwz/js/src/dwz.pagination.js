!function(e){e.fn.extend({pagination:function(a){function r(e,t,a,r){e.bind("click",{pageNum:t},function(e){dwzPageBreak({targetType:a,rel:r,data:{pageNum:e.data.pageNum}}),e.preventDefault()})}var n={first$:"li.j-first",prev$:"li.j-prev",next$:"li.j-next",last$:"li.j-last",nums$:"li.j-num>a",jumpto$:"li.jumpto",pageNumFrag:'<li class="#liClass#"><a href="javascript:;">#pageNum#</a></li>'};return this.each(function(){for(var i=e(this),s=new t(a),u=s.getInterval(),l="",g=u.start;g<u.end;g++)l+=n.pageNumFrag.replaceAll("#pageNum#",g).replaceAll("#liClass#",g==s.getCurrentPage()?"selected j-num":"j-num");i.html(DWZ.frag.pagination.replaceAll("#pageNumFrag#",l).replaceAll("#currentPage#",s.getCurrentPage())).find("li").hoverClass();var o=i.find(n.first$),p=i.find(n.prev$),c=i.find(n.next$),d=i.find(n.last$);s.hasPrev()?(o.add(p).find(">span").hide(),r(p,s.getCurrentPage()-1,s.targetType(),s.rel()),r(o,1,s.targetType(),s.rel())):o.add(p).addClass("disabled").find(">a").hide(),s.hasNext()?(c.add(d).find(">span").hide(),r(c,s.getCurrentPage()+1,s.targetType(),s.rel()),r(d,s.numPages(),s.targetType(),s.rel())):c.add(d).addClass("disabled").find(">a").hide(),i.find(n.nums$).each(function(t){r(e(this),t+u.start,s.targetType(),s.rel())}),i.find(n.jumpto$).each(function(){var t=e(this),a=t.find(":text"),r=t.find(":button");r.click(function(e){var t=a.val();t&&t.isPositiveInteger()&&dwzPageBreak({targetType:s.targetType(),rel:s.rel(),data:{pageNum:t}})}),a.keyup(function(e){e.keyCode==DWZ.keyCode.ENTER&&r.click()})})})},orderBy:function(t){var a=e.extend({targetType:"navTab",rel:"",asc:"asc",desc:"desc"},t);return this.each(function(){var t=e(this).css({cursor:"pointer"}).click(function(){var e=t.attr("orderField"),r=t.hasClass(a.asc)?a.desc:a.asc;dwzPageBreak({targetType:a.targetType,rel:a.rel,data:{orderField:e,orderDirection:r}})})})},pagerForm:function(t){var a=e.extend({pagerForm$:"#pagerForm",parentBox:document},t),r='<input type="hidden" name="#name#" value="#value#" />';return this.each(function(){var t=e(this),n=e(a.pagerForm$,a.parentBox),i=n.attr("action").replaceAll("#rel#",t.attr("action"));n.attr("action",i),t.find(":input").each(function(){var t=e(this),a=t.attr("name");if(a){var i=r.replaceAll("#name#",a).replaceAll("#value#",t.val());n.append(i)}})})}});var t=function(t){this.opts=e.extend({targetType:"navTab",rel:"",totalCount:0,numPerPage:10,pageNumShown:10,currentPage:1,callback:function(){return!1}},t)};e.extend(t.prototype,{targetType:function(){return this.opts.targetType},rel:function(){return this.opts.rel},numPages:function(){return Math.ceil(this.opts.totalCount/this.opts.numPerPage)},getInterval:function(){var e=Math.ceil(this.opts.pageNumShown/2),t=this.numPages(),a=t-this.opts.pageNumShown,r=this.getCurrentPage()>e?Math.max(Math.min(this.getCurrentPage()-e,a),0):0,n=this.getCurrentPage()>e?Math.min(this.getCurrentPage()+e,t):Math.min(this.opts.pageNumShown,t);return{start:r+1,end:n+1}},getCurrentPage:function(){var e=parseInt(this.opts.currentPage);return isNaN(e)?1:e},hasPrev:function(){return this.getCurrentPage()>1},hasNext:function(){return this.getCurrentPage()<this.numPages()}})}(jQuery);